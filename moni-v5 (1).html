<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Moni - Financial Confidence</title>
  <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    
    :root {
      --bg: #faf9f7;
      --card: #ffffff;
      --text: #1a1a1a;
      --text-soft: #6b6b6b;
      --text-muted: #9a9a9a;
      --accent: #1a1a1a;
      --green: #22c55e;
      --green-light: #f0fdf4;
      --orange: #f59e0b;
      --orange-light: #fffbeb;
      --border: #e8e6e3;
      --purple: #8b5cf6;
      --purple-light: #f5f3ff;
      --primary: #8b5cf6;
      /* Archetype colors */
      --dreamer: #8b5cf6;
      --experiencer: #f97316;
      --giver: #ec4899;
      --planner: #10b981;
    }

    body {
      min-height: 100vh;
      background: #1a1a1a;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Be Vietnam Pro', sans-serif;
      padding: 20px;
    }

    .phone {
      width: 100%;
      max-width: 390px;
      height: 844px;
      background: var(--bg);
      border-radius: 44px;
      box-shadow: 0 25px 80px rgba(0,0,0,0.5);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      position: relative;
    }

    .phone.splash-bg {
      background: linear-gradient(160deg, #1a1a1a 0%, #2d2d2d 100%);
    }

    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 16px 24px;
    }

    .btn-back {
      width: 44px;
      height: 44px;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 14px;
      font-size: 18px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .progress-dots {
      display: flex;
      gap: 6px;
    }

    .dot {
      width: 8px;
      height: 8px;
      border-radius: 4px;
      background: var(--border);
      transition: all 0.3s;
    }

    .dot.active {
      width: 24px;
      background: var(--text);
    }

    .content {
      flex: 1;
      overflow-y: auto;
      padding: 0 24px;
    }

    .footer {
      padding: 16px 24px 40px;
    }

    .btn {
      width: 100%;
      padding: 18px 24px;
      background: var(--text);
      border: none;
      border-radius: 16px;
      color: white;
      font-size: 17px;
      font-weight: 600;
      cursor: pointer;
      font-family: inherit;
      transition: transform 0.2s, opacity 0.2s;
    }

    .btn:hover { transform: scale(1.02); }
    .btn:disabled { opacity: 0.4; cursor: not-allowed; transform: none; }

    .btn.secondary {
      background: transparent;
      color: var(--text-muted);
      padding: 14px 24px;
    }

    .btn.white {
      background: white;
      color: var(--text);
    }

    .input {
      width: 100%;
      padding: 18px 20px;
      border: 2px solid var(--border);
      border-radius: 16px;
      font-size: 17px;
      font-family: inherit;
      outline: none;
      transition: border-color 0.2s;
      background: var(--card);
    }

    .input:focus { border-color: var(--text); }

    .hidden { display: none !important; }

    /* Splash */
    .splash {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      padding: 60px 32px 48px;
      text-align: center;
    }

    .splash-logo { font-size: 80px; margin-bottom: 16px; }
    .splash-title { font-size: 48px; font-weight: 800; color: white; letter-spacing: -1px; }
    .splash-tagline { font-size: 17px; color: rgba(255,255,255,0.7); margin-top: 12px; line-height: 1.5; }

    /* Onboarding */
    .ob-icon { font-size: 64px; margin-bottom: 20px; }
    .ob-title { font-size: 26px; font-weight: 700; color: var(--text); margin-bottom: 12px; line-height: 1.3; }
    .ob-desc { font-size: 16px; color: var(--text-soft); line-height: 1.6; }
    .ob-center { text-align: center; padding-top: 20px; }

    .benefits { display: flex; flex-direction: column; gap: 14px; margin: 28px 0; }
    .benefit { display: flex; align-items: center; gap: 14px; padding: 16px 18px; background: var(--card); border: 1px solid var(--border); border-radius: 16px; }
    .benefit-icon { font-size: 24px; }
    .benefit-text { font-size: 15px; color: var(--text); }

    .quote-box { padding: 20px 24px; background: var(--green-light); border-radius: 20px; text-align: center; }
    .quote-text { font-size: 15px; color: #166534; font-style: italic; line-height: 1.6; }

    /* Quiz */
    .quiz-progress { display: flex; align-items: center; gap: 12px; }
    .quiz-bar { width: 100px; height: 6px; background: var(--border); border-radius: 3px; overflow: hidden; }
    .quiz-bar-fill { height: 100%; background: var(--text); transition: width 0.3s; }
    .quiz-count { font-size: 14px; font-weight: 600; color: var(--text-muted); }
    .quiz-badge { display: inline-block; padding: 8px 16px; background: var(--purple-light); border-radius: 20px; font-size: 13px; font-weight: 600; color: var(--purple); margin-bottom: 20px; }
    .quiz-question { font-size: 20px; font-weight: 700; color: var(--text); line-height: 1.5; margin-bottom: 28px; }
    .quiz-option { display: flex; align-items: center; gap: 14px; width: 100%; padding: 18px 20px; background: var(--card); border: 2px solid var(--border); border-radius: 16px; cursor: pointer; text-align: left; margin-bottom: 12px; transition: all 0.2s; font-family: inherit; }
    .quiz-option:hover { border-color: var(--text); background: var(--bg); }
    .quiz-option-icon { font-size: 24px; }
    .quiz-option-text { font-size: 15px; color: var(--text); }

    /* Result */
    .result-card { background: linear-gradient(135deg, var(--purple), #a855f7); border-radius: 28px; padding: 36px 28px; text-align: center; color: white; margin: 20px 0; }
    .result-emoji { font-size: 72px; margin-bottom: 16px; }
    .result-type { font-size: 28px; font-weight: 800; }
    .result-tag { font-size: 16px; opacity: 0.9; margin-top: 8px; }
    .result-desc { font-size: 16px; color: var(--text-soft); line-height: 1.7; text-align: center; margin-top: 20px; }

    /* Income */
    .income-input-wrap { display: flex; background: var(--card); border-radius: 16px; border: 2px solid var(--border); overflow: hidden; margin: 24px 0; }
    .income-input-wrap:focus-within { border-color: var(--text); }
    .income-input { flex: 1; border: none; padding: 20px; font-size: 28px; font-weight: 700; text-align: center; outline: none; font-family: inherit; background: transparent; }
    .income-unit { display: flex; align-items: center; padding: 0 20px; font-size: 16px; color: var(--text-muted); background: var(--bg); }

    .presets { display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; margin-bottom: 24px; }
    .preset { padding: 12px 20px; border-radius: 12px; border: 1px solid var(--border); background: var(--card); font-size: 15px; font-weight: 600; color: var(--text-soft); cursor: pointer; transition: all 0.2s; font-family: inherit; }
    .preset:hover, .preset.active { background: var(--text); color: white; border-color: var(--text); }

    .privacy-note { display: flex; align-items: center; gap: 10px; padding: 14px 16px; background: var(--bg); border-radius: 14px; }
    .privacy-note span:first-child { font-size: 18px; }
    .privacy-note span:last-child { font-size: 13px; color: var(--text-muted); }

    /* Goals */
    .goal-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; margin: 24px 0; }
    .goal-item { display: flex; flex-direction: column; align-items: center; gap: 8px; padding: 18px 12px; background: var(--card); border: 2px solid var(--border); border-radius: 18px; cursor: pointer; transition: all 0.2s; }
    .goal-item:hover { border-color: var(--text-soft); }
    .goal-item.selected { border-color: var(--green); background: var(--green-light); }
    .goal-item-icon { font-size: 32px; }
    .goal-item-name { font-size: 13px; font-weight: 600; color: var(--text); }

    .selected-goals { display: flex; flex-direction: column; gap: 12px; margin-top: 20px; }
    .selected-goal { display: flex; align-items: center; gap: 14px; padding: 16px 18px; background: var(--green-light); border: 2px solid #86efac; border-radius: 16px; }
    .selected-goal-icon { font-size: 28px; }
    .selected-goal-info { flex: 1; }
    .selected-goal-name { font-size: 15px; font-weight: 600; color: var(--text); }
    .selected-goal-amount { font-size: 13px; color: var(--text-soft); }
    .selected-goal-remove { width: 32px; height: 32px; background: #fee2e2; border: none; border-radius: 10px; color: #ef4444; font-size: 18px; cursor: pointer; }

    /* Allocation */
    .allocation-card { background: var(--card); border: 1px solid var(--border); border-radius: 20px; padding: 20px; margin-bottom: 16px; }
    .allocation-header { display: flex; align-items: center; gap: 14px; margin-bottom: 16px; }
    .allocation-icon { font-size: 32px; }
    .allocation-name { font-size: 16px; font-weight: 600; color: var(--text); }
    .allocation-target { font-size: 13px; color: var(--text-muted); }
    .allocation-input-row { display: flex; align-items: center; gap: 12px; }
    .allocation-input { flex: 1; padding: 14px 16px; border: 2px solid var(--border); border-radius: 12px; font-size: 18px; font-weight: 600; font-family: inherit; outline: none; text-align: center; }
    .allocation-input:focus { border-color: var(--text); }
    .allocation-per { font-size: 14px; color: var(--text-muted); }
    .allocation-time { margin-top: 12px; padding: 12px; background: var(--bg); border-radius: 10px; text-align: center; font-size: 13px; color: var(--text-soft); }
    .allocation-time strong { color: var(--green); }

    /* Main App */
    .status-bar { display: flex; justify-content: space-between; padding: 14px 28px 10px; font-size: 14px; font-weight: 600; }
    .main-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 32px; }
    .greeting { font-size: 18px; font-weight: 600; color: var(--text); }
    .avatar { width: 40px; height: 40px; background: linear-gradient(135deg, #e0e0e0, #f5f5f5); border-radius: 14px; display: flex; align-items: center; justify-content: center; font-size: 18px; }

    /* New Homepage Design - Glass & Green Gradient */
    .glass-card {
      background: rgba(255, 255, 255, 0.7);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.8);
      border-radius: 20px;
    }

    .slide-up {
      animation: slideUp 0.5s ease-out forwards;
    }
    @keyframes slideUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .home-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 0 16px;
    }
    .home-greeting { color: var(--text-muted); font-size: 14px; }
    .home-name { font-size: 24px; font-weight: 700; color: var(--text); }
    .home-avatar {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background: linear-gradient(135deg, #10b981, #059669);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 700;
      font-size: 18px;
      box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
    }

    .main-card {
      background: linear-gradient(135deg, #10b981 0%, #059669 50%, #047857 100%);
      box-shadow: 0 20px 40px -12px rgba(16, 185, 129, 0.4);
      border-radius: 24px;
      padding: 24px;
      color: white;
      margin-bottom: 16px;
    }
    .main-card-top {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 20px;
    }
    .main-card-label { font-size: 14px; color: rgba(255,255,255,0.8); margin-bottom: 4px; }
    .main-card-amount { font-size: 36px; font-weight: 800; letter-spacing: -1px; }
    .main-card-sub { font-size: 12px; color: rgba(255,255,255,0.7); margin-top: 4px; }
    .main-card-badge {
      background: rgba(255,255,255,0.2);
      backdrop-filter: blur(10px);
      border-radius: 14px;
      padding: 10px 14px;
      text-align: center;
    }
    .main-card-badge-label { font-size: 11px; color: rgba(255,255,255,0.8); }
    .main-card-badge-value { font-size: 15px; font-weight: 700; }
    .main-card-progress {
      background: rgba(255,255,255,0.15);
      backdrop-filter: blur(10px);
      border-radius: 16px;
      padding: 14px 16px;
    }
    .main-card-progress-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
      font-size: 13px;
    }
    .main-card-progress-label { color: rgba(255,255,255,0.8); }
    .main-card-progress-value { font-weight: 600; }
    .main-card-progress-bar {
      height: 8px;
      background: rgba(255,255,255,0.2);
      border-radius: 4px;
      overflow: hidden;
    }
    .main-card-progress-fill {
      height: 100%;
      background: white;
      border-radius: 4px;
      transition: width 0.5s ease;
    }

    .quick-stats {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-bottom: 20px;
    }
    .stat-card {
      padding: 16px;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .stat-icon {
      width: 44px;
      height: 44px;
      border-radius: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 22px;
    }
    .stat-icon.buffer { background: #fef3c7; }
    .stat-icon.compare { background: #dbeafe; }
    .stat-label { font-size: 12px; color: var(--text-muted); margin-bottom: 2px; }
    .stat-value { font-size: 18px; font-weight: 700; color: var(--text); }
    .stat-value.positive { color: #10b981; }

    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }
    .section-title { font-size: 16px; font-weight: 600; color: var(--text); }
    .section-link { font-size: 13px; color: #10b981; cursor: pointer; font-weight: 500; }

    .goal-cards { display: flex; flex-direction: column; gap: 10px; margin-bottom: 20px; }
    .goal-card {
      padding: 16px;
      display: flex;
      align-items: center;
      gap: 14px;
      cursor: pointer;
      transition: all 0.3s;
    }
    .goal-card:hover { transform: translateX(4px); box-shadow: 0 4px 16px rgba(0,0,0,0.08); }
    .goal-card-icon {
      width: 48px;
      height: 48px;
      background: var(--bg);
      border-radius: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
    }
    .goal-card-info { flex: 1; }
    .goal-card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
    .goal-card-name { font-size: 15px; font-weight: 600; color: var(--text); }
    .goal-card-percent { font-size: 14px; font-weight: 600; color: var(--text-muted); }
    .goal-card-percent.complete { color: #10b981; }
    .goal-card-progress-bar { height: 8px; background: var(--bg); border-radius: 4px; overflow: hidden; }
    .goal-card-progress-fill { height: 100%; background: linear-gradient(90deg, #10b981, #34d399); border-radius: 4px; transition: width 0.7s ease; }
    .goal-card-progress-fill.complete { background: #10b981; }
    .goal-card-meta { font-size: 12px; color: var(--text-muted); margin-top: 6px; }

    .tx-cards { display: flex; flex-direction: column; gap: 8px; margin-bottom: 20px; }
    .tx-card {
      padding: 14px 16px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      cursor: pointer;
      transition: all 0.3s;
    }
    .tx-card:hover { transform: translateX(4px); }
    .tx-card-left { display: flex; align-items: center; gap: 12px; }
    .tx-card-icon {
      width: 44px;
      height: 44px;
      background: var(--bg);
      border-radius: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
    }
    .tx-card-name { font-size: 14px; font-weight: 500; color: var(--text); }
    .tx-card-time { font-size: 12px; color: var(--text-muted); margin-top: 2px; }
    .tx-card-amount { font-size: 15px; font-weight: 600; color: var(--text); }

    .fab-btn {
      position: fixed;
      bottom: 100px;
      right: 32px;
      width: 56px;
      height: 56px;
      background: linear-gradient(135deg, #10b981, #059669);
      border: none;
      border-radius: 50%;
      color: white;
      font-size: 28px;
      cursor: pointer;
      box-shadow: 0 8px 24px rgba(16, 185, 129, 0.4);
      transition: transform 0.2s, box-shadow 0.2s;
      z-index: 100;
    }
    .fab-btn:hover { transform: scale(1.1); }
    .fab-btn:active { transform: scale(0.95); }

    /* Legacy support */
    .spendable { text-align: center; margin-bottom: 40px; }
    .spendable-label { font-size: 14px; color: var(--text-muted); margin-bottom: 8px; }
    .spendable-amount { font-size: 56px; font-weight: 800; color: var(--text); letter-spacing: -3px; line-height: 1; margin-bottom: 8px; }
    .spendable-amount .unit { font-size: 32px; font-weight: 600; color: var(--text-soft); }
    .spendable-sub { font-size: 14px; color: var(--text-muted); }
    .spendable-sub span { color: var(--text-soft); font-weight: 600; }

    .goals-status { display: flex; gap: 12px; margin-bottom: 24px; }
    .goal-pill { flex: 1; background: var(--card); border: 1px solid var(--border); border-radius: 16px; padding: 14px 16px; display: flex; align-items: center; gap: 12px; transition: transform 0.2s, box-shadow 0.2s; }
    .goal-pill:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.08); }
    .goal-emoji { font-size: 24px; }
    .goal-info { flex: 1; min-width: 0; }
    .goal-name { font-size: 13px; font-weight: 600; color: var(--text); }
    .goal-meta { font-size: 12px; color: var(--text-muted); margin-top: 4px; display: flex; align-items: center; gap: 4px; }
    .goal-progress { width: 100%; height: 6px; background: rgba(0,0,0,0.06); border-radius: 3px; margin-top: 8px; overflow: hidden; }
    .goal-progress-fill { height: 100%; background: var(--primary); border-radius: 3px; transition: width 0.5s ease; }

    .recent-section { margin-bottom: 24px; }
    .recent-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
    .recent-title { font-size: 13px; font-weight: 600; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; }
    .recent-total { font-size: 14px; font-weight: 600; color: var(--text-soft); }
    .recent-list { background: var(--card); border: 1px solid var(--border); border-radius: 16px; overflow: hidden; }
    .recent-item { display: flex; align-items: center; gap: 12px; padding: 14px 16px; border-bottom: 1px solid var(--border); }
    .recent-item:last-child { border-bottom: none; }
    .recent-emoji { font-size: 18px; }
    .recent-name { flex: 1; font-size: 14px; color: var(--text); }
    .recent-amount { font-size: 14px; font-weight: 600; color: var(--text-soft); }

    .spacer { flex: 1; }

    .ask-section { padding-bottom: 24px; }
    .ask-container { background: var(--card); border: 2px solid var(--border); border-radius: 20px; padding: 6px; transition: all 0.2s ease; }
    .ask-container:focus-within { border-color: var(--text); }
    .ask-row { display: flex; align-items: center; gap: 12px; }
    .ask-icon { width: 42px; height: 42px; background: var(--bg); border-radius: 14px; display: flex; align-items: center; justify-content: center; font-size: 20px; }
    .ask-input { flex: 1; border: none; background: transparent; font-size: 16px; font-family: inherit; color: var(--text); outline: none; padding: 12px 0; }
    .ask-input::placeholder { color: var(--text-muted); }
    .ask-btn { width: 42px; height: 42px; background: var(--text); border: none; border-radius: 14px; color: white; font-size: 18px; cursor: pointer; transition: transform 0.2s; }
    .ask-btn:hover { transform: scale(1.05); }
    .ask-hint { text-align: center; font-size: 13px; color: var(--text-muted); margin-top: 16px; }

    .chips { display: flex; gap: 8px; margin-top: 14px; overflow-x: auto; padding-bottom: 4px; }
    .chips::-webkit-scrollbar { display: none; }
    .chip { flex-shrink: 0; padding: 10px 16px; background: var(--bg); border: 1px solid var(--border); border-radius: 12px; font-size: 14px; color: var(--text-soft); cursor: pointer; transition: all 0.2s; font-family: inherit; }
    .chip:hover { background: var(--card); border-color: var(--text-soft); }

    .response { margin-top: 20px; }
    .response.show { display: block; animation: slideUp 0.3s ease; }
    @keyframes slideUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

    /* Celebration animations */
    @keyframes confetti-fall { 0% { transform: translateY(-100vh) rotate(0deg); opacity: 1; } 100% { transform: translateY(100vh) rotate(720deg); opacity: 0; } }
    @keyframes celebrate-pop { 0% { transform: scale(0.8); opacity: 0; } 50% { transform: scale(1.1); } 100% { transform: scale(1); opacity: 1; } }
    @keyframes pulse-glow { 0%, 100% { box-shadow: 0 0 20px var(--primary); } 50% { box-shadow: 0 0 40px var(--primary); } }
    .celebration-banner { animation: celebrate-pop 0.5s ease forwards; background: linear-gradient(135deg, var(--primary), var(--purple)); color: white; padding: 16px 20px; border-radius: 16px; margin-bottom: 16px; display: flex; align-items: center; gap: 12px; }
    .celebration-banner .icon { font-size: 32px; }
    .celebration-banner .text { flex: 1; }
    .celebration-banner .title { font-weight: 700; font-size: 15px; }
    .celebration-banner .desc { font-size: 13px; opacity: 0.9; margin-top: 2px; }
    .celebration-banner .dismiss { background: rgba(255,255,255,0.2); border: none; color: white; width: 28px; height: 28px; border-radius: 14px; cursor: pointer; font-size: 16px; }
    .confetti { position: fixed; width: 10px; height: 10px; top: -10px; animation: confetti-fall 3s linear forwards; pointer-events: none; z-index: 1000; }
    .streak-badge { display: inline-flex; align-items: center; gap: 4px; background: var(--orange-light); color: var(--orange); padding: 4px 10px; border-radius: 8px; font-size: 12px; font-weight: 600; }
    .milestone-ring { animation: pulse-glow 2s ease-in-out infinite; }
    .response-bubble { background: var(--bg); border-radius: 18px; padding: 18px 20px; }
    .response-text { font-size: 15px; color: var(--text); line-height: 1.6; margin-bottom: 16px; }
    .response-meta { font-size: 13px; color: var(--text-muted); padding: 12px 0; border-top: 1px solid var(--border); margin-bottom: 16px; }
    .response-actions { display: flex; gap: 10px; }
    .res-btn { flex: 1; padding: 14px; border-radius: 12px; font-size: 15px; font-weight: 600; cursor: pointer; font-family: inherit; transition: all 0.2s; }
    .res-btn.primary { background: var(--text); border: none; color: white; }
    .res-btn.secondary { background: transparent; border: 1px solid var(--border); color: var(--text-soft); }

    .tab-bar { display: flex; justify-content: space-around; padding: 12px 0 32px; background: var(--bg); border-top: 1px solid var(--border); }
    .tab { display: flex; flex-direction: column; align-items: center; gap: 4px; background: none; border: none; cursor: pointer; padding: 8px 20px; }
    .tab-icon { font-size: 22px; opacity: 0.4; }
    .tab.active .tab-icon { opacity: 1; }
    .tab-label { font-size: 11px; font-weight: 600; color: var(--text-muted); }
    .tab.active .tab-label { color: var(--text); }

    /* FAB */
    .fab {
      position: absolute;
      bottom: 100px;
      right: 24px;
      width: 56px;
      height: 56px;
      background: var(--text);
      border: none;
      border-radius: 16px;
      color: white;
      font-size: 28px;
      cursor: pointer;
      box-shadow: 0 4px 20px rgba(0,0,0,0.25);
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.2s, box-shadow 0.2s;
      z-index: 50;
    }
    .fab:hover {
      transform: scale(1.05);
      box-shadow: 0 6px 25px rgba(0,0,0,0.3);
    }

    /* Language Selection Screen */
    .lang-screen {
      flex: 1;
      display: flex;
      flex-direction: column;
      padding: 48px 24px 32px;
      overflow-y: auto;
      max-height: 100%;
    }
    .lang-screen-header {
      text-align: center;
      margin-bottom: 28px;
    }
    .lang-screen-icon {
      font-size: 56px;
      margin-bottom: 16px;
    }
    .lang-screen-title {
      font-size: 26px;
      font-weight: 800;
      color: white;
      margin-bottom: 8px;
    }
    .lang-screen-subtitle {
      font-size: 15px;
      color: rgba(255,255,255,0.6);
      line-height: 1.5;
    }
    .lang-list {
      flex: 1;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 10px;
      padding: 4px;
      margin: 0 -4px;
    }
    .lang-list::-webkit-scrollbar { width: 0; }
    .lang-card {
      display: flex;
      align-items: center;
      gap: 14px;
      padding: 14px 16px;
      background: rgba(255,255,255,0.08);
      border: 2px solid rgba(255,255,255,0.1);
      border-radius: 16px;
      cursor: pointer;
      transition: all 0.2s ease;
      font-family: inherit;
      text-align: left;
      width: 100%;
    }
    .lang-card:hover {
      background: rgba(255,255,255,0.12);
      border-color: rgba(255,255,255,0.2);
      transform: translateY(-1px);
    }
    .lang-card.selected {
      background: rgba(255,255,255,0.15);
      border-color: rgba(255,255,255,0.5);
      box-shadow: 0 4px 20px rgba(0,0,0,0.2);
    }
    .lang-card-flag {
      font-size: 36px;
      line-height: 1;
    }
    .lang-card-info {
      flex: 1;
    }
    .lang-card-name {
      font-size: 16px;
      font-weight: 700;
      color: white;
      margin-bottom: 2px;
    }
    .lang-card-currency {
      font-size: 13px;
      color: rgba(255,255,255,0.5);
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .lang-card-currency-badge {
      padding: 2px 8px;
      background: rgba(255,255,255,0.15);
      border-radius: 6px;
      font-weight: 600;
      font-size: 12px;
      color: rgba(255,255,255,0.8);
    }
    .lang-card-check {
      width: 26px;
      height: 26px;
      border-radius: 13px;
      border: 2px solid rgba(255,255,255,0.3);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      color: transparent;
      transition: all 0.2s;
    }
    .lang-card.selected .lang-card-check {
      background: #22c55e;
      border-color: #22c55e;
      color: white;
    }
    .lang-screen-footer {
      padding: 20px 0 16px;
      background: linear-gradient(transparent, rgba(26, 26, 26, 0.95) 30%);
      margin: 0 -24px -32px;
      padding: 24px 24px 32px;
      position: sticky;
      bottom: 0;
    }
    .lang-screen-footer .btn {
      background: white;
      color: #1a1a1a;
      font-size: 18px;
      padding: 20px 24px;
      font-weight: 700;
      box-shadow: 0 4px 20px rgba(255,255,255,0.3);
    }
    .lang-screen-footer .btn:hover {
      transform: scale(1.02);
      box-shadow: 0 6px 25px rgba(255,255,255,0.4);
    }
    .lang-screen-footer .btn:disabled {
      background: rgba(255,255,255,0.3);
      color: rgba(255,255,255,0.5);
      box-shadow: none;
    }

    /* Small language button on splash */
    .splash-lang-btn {
      position: absolute;
      top: 20px;
      right: 20px;
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 8px 12px;
      background: rgba(255,255,255,0.1);
      border: 1px solid rgba(255,255,255,0.2);
      border-radius: 10px;
      color: rgba(255,255,255,0.8);
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      font-family: inherit;
    }
    .splash-lang-btn:hover {
      background: rgba(255,255,255,0.15);
      border-color: rgba(255,255,255,0.3);
    }
    .splash-lang-btn .flag { font-size: 16px; }

    /* Chat loading */
    .typing {
      display: flex;
      gap: 4px;
      padding: 8px 0;
    }
    .typing span {
      width: 8px;
      height: 8px;
      background: var(--text-muted);
      border-radius: 50%;
      animation: bounce 1.4s infinite ease-in-out;
    }
    .typing span:nth-child(1) { animation-delay: 0s; }
    .typing span:nth-child(2) { animation-delay: 0.2s; }
    .typing span:nth-child(3) { animation-delay: 0.4s; }
    @keyframes bounce {
      0%, 80%, 100% { transform: scale(0.8); opacity: 0.5; }
      40% { transform: scale(1); opacity: 1; }
    }
  </style>
</head>
<body>
  <div id="app" class="phone"></div>

  <script>
    // ============= TRANSLATIONS =============
    const TRANSLATIONS = {
      vi: {
        // Splash
        welcome: 'Ch√†o m·ª´ng ƒë·∫øn Moni!',
        tagline: 'Qu·∫£n l√Ω ti·ªÅn theo c√°ch c·ªßa b·∫°n.<br>Kh√¥ng ph√°n x√©t. Ch·ªâ ƒë·ªìng h√†nh.',
        start: 'B·∫Øt ƒë·∫ßu ‚Üí',
        // Onboarding Step 0
        welcomeTitle: 'Ch√†o m·ª´ng ƒë·∫øn Moni!',
        welcomeDesc: 'Moni s·∫Ω gi√∫p b·∫°n ti√™u ti·ªÅn c√≥ ch·ªß ƒë√≠ch ‚Äî kh√¥ng ph·∫£i theo d√µi t·ª´ng ƒë·ªìng, m√† l√† bi·∫øt m√¨nh ƒëang ·ªü ƒë√¢u tr√™n ƒë∆∞·ªùng ƒë·∫øn m·ª•c ti√™u.',
        nameLabel: 'M√¨nh g·ªçi b·∫°n l√† g√¨ nh·ªâ?',
        namePlaceholder: 'Nh·∫≠p t√™n c·ªßa b·∫°n...',
        continue: 'Ti·∫øp t·ª•c ‚Üí',
        // Onboarding Step 1 - Quiz Intro
        quizTitle: '4 Money Personalities',
        quizDesc: 'B·∫°n thu·ªôc nh√≥m n√†o? L√†m quiz ƒë·ªÉ kh√°m ph√°!',
        theDreamer: 'The Dreamer',
        dreamerTag: 'Ng∆∞·ªùi m∆° m·ªông',
        theExperiencer: 'The Experiencer',
        experiencerTag: 'Ng∆∞·ªùi tr·∫£i nghi·ªám',
        theGiver: 'The Giver',
        giverTag: 'Ng∆∞·ªùi cho ƒëi',
        thePlanner: 'The Planner',
        plannerTag: 'Ng∆∞·ªùi k·∫ø ho·∫°ch',
        quizAccompany: 'üéØ Moni s·∫Ω ƒë·ªìng h√†nh theo phong c√°ch c·ªßa b·∫°n',
        startQuiz: 'L√†m Quiz ¬∑ 4 c√¢u h·ªèi ‚Üí',
        skip: 'B·ªè qua',
        // Quiz Questions
        quiz1: 'Khi nh·∫≠n ƒë∆∞·ª£c ti·ªÅn th∆∞·ªüng b·∫•t ng·ªù, b·∫°n th∆∞·ªùng...',
        quiz1opt1: 'L√™n k·∫ø ho·∫°ch c·ª• th·ªÉ cho n√≥',
        quiz1opt2: 'T·ª± th∆∞·ªüng cho m√¨nh ngay',
        quiz1opt3: 'Nghƒ© ƒë·∫øn qu√† cho ng∆∞·ªùi th√¢n',
        quiz1opt4: 'M∆° v·ªÅ nh·ªØng possibilities',
        quiz2: 'B·∫°n hay v∆∞·ª£t chi ti√™u nh·∫•t khi n√†o?',
        quiz2opt1: 'ƒêi ch∆°i v·ªõi b·∫°n b√®',
        quiz2opt2: 'C√≥ ai ƒë√≥ c·∫ßn gi√∫p ƒë·ª°',
        quiz2opt3: 'B·ªã thu h√∫t b·ªüi c√°i m·ªõi',
        quiz2opt4: 'Hi·∫øm khi v∆∞·ª£t chi',
        quiz3: 'C·∫£m x√∫c c·ªßa b·∫°n khi nghƒ© v·ªÅ ti·ªÅn...',
        quiz3opt1: 'Excited v·ªÅ t∆∞∆°ng lai',
        quiz3opt2: 'Tho·∫£i m√°i, s·ªëng hi·ªán t·∫°i',
        quiz3opt3: 'Lo l·∫Øng cho ng∆∞·ªùi th√¢n',
        quiz3opt4: 'C·∫£m gi√°c ki·ªÉm so√°t',
        quiz4: 'ƒêi·ªÅu n√†o m√¥ t·∫£ b·∫°n nh·∫•t?',
        quiz4opt1: 'Nhi·ªÅu ∆∞·ªõc m∆°, kh√≥ focus',
        quiz4opt2: 'K·ª∑ ni·ªám quan tr·ªçng h∆°n ti·∫øt ki·ªám',
        quiz4opt3: 'Vui khi ƒë∆∞·ª£c gi√∫p ng∆∞·ªùi kh√°c',
        quiz4opt4: 'Th√≠ch k·∫ø ho·∫°ch r√µ r√†ng',
        // Quiz Result
        thisIsYou: '‚ú® ƒê√¢y l√† b·∫°n!',
        dreamerDesc: 'B·∫°n c√≥ nhi·ªÅu ∆∞·ªõc m∆° ƒë·∫πp v√† tr√≠ t∆∞·ªüng t∆∞·ª£ng phong ph√∫. Moni s·∫Ω gi√∫p b·∫°n focus v√†o ƒëi·ªÅu quan tr·ªçng nh·∫•t.',
        experiencerDesc: 'B·∫°n tin cu·ªôc s·ªëng l√† ƒë·ªÉ tr·∫£i nghi·ªám. Moni s·∫Ω gi√∫p b·∫°n balance gi·ªØa t·∫≠n h∆∞·ªüng v√† ƒë·∫£m b·∫£o t∆∞∆°ng lai.',
        giverDesc: 'Ni·ªÅm vui c·ªßa b·∫°n l√† mang l·∫°i ni·ªÅm vui cho ng∆∞·ªùi kh√°c. Moni s·∫Ω nh·∫Øc b·∫°n c≈©ng c·∫ßn invest v√†o b·∫£n th√¢n.',
        plannerDesc: 'B·∫°n c√≥ k·ª∑ lu·∫≠t t√†i ch√≠nh t·ªët. Moni s·∫Ω gi√∫p b·∫°n optimize h∆°n n·ªØa v√† celebrate nh·ªØng progress nh·ªè.',
        // Archetype quotes
        dreamerQuote1: '∆Ø·ªõc m∆° th√†nh hi·ªán th·ª±c, t·ª´ng b∆∞·ªõc nh·ªè ‚ú®',
        dreamerQuote2: 'T·∫ßm nh√¨n c·ªßa b·∫°n l√† kim ch·ªâ nam üåü',
        dreamerQuote3: 'ƒêi·ªÅu l·ªõn lao b·∫Øt ƒë·∫ßu t·ª´ ti·∫øt ki·ªám nh·ªè üí´',
        experiencerQuote1: 'Cu·ªôc s·ªëng l√† nh·ªØng kho·∫£nh kh·∫Øc ƒë√°ng gi√° üé¢',
        experiencerQuote2: 'Phi√™u l∆∞u ƒëang ch·ªù, b·∫°n ƒëang chu·∫©n b·ªã t·ªët! üåà',
        experiencerQuote3: 'M·ªói l·∫ßn ti·∫øt ki·ªám ƒë∆∞a tr·∫£i nghi·ªám g·∫ßn h∆°n üéØ',
        giverQuote1: 'S·ª± r·ªông r√£i b·∫Øt ƒë·∫ßu t·ª´ t·ª± chƒÉm s√≥c üíù',
        giverQuote2: 'ƒêeo m·∫∑t n·∫° oxy cho m√¨nh tr∆∞·ªõc ƒë√£ ü§ù',
        giverQuote3: 'T√†i ch√≠nh v·ªØng gi√∫p b·∫°n cho ƒëi nhi·ªÅu h∆°n üíï',
        plannerQuote1: 'M·ªçi chi ti·∫øt ƒë·ªÅu quan tr·ªçng, b·∫°n ƒëang on track üìã',
        plannerQuote2: 'Ti·∫øn b·ªô c√≥ h·ªá th·ªëng d·∫´n ƒë·∫øn th√†nh c√¥ng üéØ',
        plannerQuote3: 'K·∫ø ho·∫°ch c·ªßa b·∫°n ƒëang ho·∫°t ƒë·ªông tuy·ªát v·ªùi ‚úÖ',
        // Celebration translations
        firstExpenseTitle: 'Chi ti√™u ƒë·∫ßu ti√™n!',
        firstExpenseDesc: 'B·∫°n ƒëang tr√™n ƒë∆∞·ªùng ƒëi!',
        tenExpensesTitle: 'Ng√†y c√†ng t·ªï ch·ª©c!',
        tenExpensesDesc: 'ƒê√£ ghi 10 kho·∫£n chi!',
        goalCompleteDesc: 'Th√†nh t·ª±u tuy·ªát v·ªùi!',
        keepGoingDesc: 'Ti·∫øp t·ª•c nh√©!',
        toward: 'h∆∞·ªõng t·ªõi',
        dayStreak: 'Ng√†y li√™n t·ª•c',
        streakDesc: 'B·∫°n ƒëang ch√°y!',
        days: 'ng√†y',
        // Moni mood messages
        moniCelebrating: 'Woohoo! B·∫°n l√†m ƒë∆∞·ª£c r·ªìi!',
        moniHappy: 'Ng√†y tuy·ªát v·ªùi!',
        moniExcited: 'B·∫°n ƒëang l√†m t·ªët l·∫Øm!',
        moniProud: 'Nh√¨n ti·∫øn ƒë·ªô k√¨a!',
        moniEncouraging: 'Kh·ªüi ƒë·∫ßu m·ªõi h√¥m nay!',
        moniCalm: 'C√¢n b·∫±ng v√† ·ªïn ƒë·ªãnh.',
        moniFriendly: 'Ch√†o b·∫°n!',
        moniSupportive: 'Ng√†y mai l√† ng√†y m·ªõi!',
        // Archetype goal UI
        dreamGoal: 'M·ª•c ti√™u m∆° ∆∞·ªõc',
        dreamerGoalQuote1: 'Gi·∫•c m∆° ƒëang th√†nh h√¨nh ‚ú®',
        dreamerGoalQuote2: 'T·ª´ng b∆∞·ªõc ƒë∆∞a b·∫°n g·∫ßn h∆°n üåü',
        bringDreamCloser: 'ƒê∆∞a gi·∫•c m∆° g·∫ßn h∆°n',
        dreamAchieved: 'Gi·∫•c m∆° th√†nh hi·ªán th·ª±c',
        breakdown: 'Chi ti·∫øt',
        week: 'tu·∫ßn',
        day: 'ng√†y',
        monthly: 'H√†ng th√°ng',
        giverTripImpact: 'T·∫°o k·ª∑ ni·ªám v·ªõi ng∆∞·ªùi th√¢n',
        giverEmergencyImpact: 'S·∫µn s√†ng khi ai ƒë√≥ c·∫ßn b·∫°n',
        giverDefaultImpact: 'Cho tr√°i tim r·ªông l∆∞·ª£ng',
        yourProgress: 'Ti·∫øn ƒë·ªô',
        toGo: 'c√≤n l·∫°i',
        addToGiving: 'Th√™m v√†o qu·ªπ y√™u th∆∞∆°ng',
        readyToGive: 'S·∫µn s√†ng cho ƒëi',
        adventure: 'CU·ªòC PHI√äU L∆ØU',
        fundedSoFar: 'ƒë√£ g√≥p',
        monthsToGo: 'th√°ng n·ªØa',
        fundAdventure: 'G√≥p qu·ªπ phi√™u l∆∞u',
        adventureReady: 'S·∫µn s√†ng phi√™u l∆∞u',
        // Income Step
        incomeTitle: 'Thu nh·∫≠p h√†ng th√°ng',
        incomeDesc: 'ƒê·ªÉ Moni t√≠nh ƒë∆∞·ª£c b·∫°n c√≥ th·ªÉ ti√™u tho·∫£i m√°i bao nhi√™u m·ªói th√°ng.',
        privacyNote: 'Th√¥ng tin ƒë∆∞·ª£c b·∫£o m·∫≠t v√† ch·ªâ l∆∞u tr√™n thi·∫øt b·ªã',
        smartInputHint: 'üí° Nh·∫≠p t·ª± nhi√™n: 15tr, 15 tri·ªáu, 500k, 500 ngh√¨n...',
        // Fixed Expenses Step
        fixedTitle: 'Chi ph√≠ c·ªë ƒë·ªãnh h√†ng th√°ng',
        fixedDesc: 'Nh·ªØng kho·∫£n ph·∫£i tr·∫£ ƒë·ªÅu ƒë·∫∑n. Nh·∫≠p s·ªë ti·ªÅn ho·∫∑c x√≥a n·∫øu kh√¥ng c√≥.',
        addOther: 'Th√™m kho·∫£n kh√°c',
        totalFixed: 'T·ªïng chi ph√≠ c·ªë ƒë·ªãnh',
        addFixedTitle: '‚ûï Th√™m chi ph√≠ c·ªë ƒë·ªãnh',
        expenseName: 'T√™n kho·∫£n chi',
        expenseNamePlaceholder: 'VD: Gym, Netflix, H·ªçc ph√≠...',
        amountPerMonth: 'S·ªë ti·ªÅn / th√°ng',
        add: 'Th√™m',
        // Goals Step
        goalsTitle: 'B·∫°n ƒëang h∆∞·ªõng t·ªõi ƒëi·ªÅu g√¨?',
        goalsDesc: 'Ch·ªçn 1-3 m·ª•c ti√™u. Moni s·∫Ω gi√∫p b·∫°n theo d√µi ti·∫øn ƒë·ªô.',
        createOwn: 'T·ª± t·∫°o',
        createGoalTitle: '‚ú® T·∫°o m·ª•c ti√™u m·ªõi',
        goalName: 'T√™n m·ª•c ti√™u',
        goalNamePlaceholder: 'VD: iPhone m·ªõi, Kh√≥a h·ªçc, Xe ƒë·∫°p...',
        amountNeeded: 'S·ªë ti·ªÅn c·∫ßn',
        addGoal: 'Th√™m m·ª•c ti√™u',
        // Allocation Step
        allocationTitle: 'M·ªói th√°ng d√†nh bao nhi√™u?',
        allocationDesc: 'Ch·ªçn s·ªë ti·ªÅn b·∫°n mu·ªën ƒë·ªÉ d√†nh cho m·ªói m·ª•c ti√™u h√†ng th√°ng.',
        target: 'M·ª•c ti√™u',
        perMonth: '/ th√°ng',
        reachGoalIn: 'ƒê·∫°t m·ª•c ti√™u trong',
        months: 'th√°ng',
        income: 'Thu nh·∫≠p',
        fixedExpenses: 'Chi ph√≠ c·ªë ƒë·ªãnh',
        savingForGoals: 'ƒê·ªÉ d√†nh cho goals',
        spendComfortably: 'Ti√™u tho·∫£i m√°i',
        finish: 'Ho√†n t·∫•t ‚Üí',
        // Main App
        hey: 'Hey,',
        spendableLabel: 'Ti√™u tho·∫£i m√°i',
        daysLeft: 'ng√†y n·ªØa',
        remaining: 'c√≤n',
        goalTarget: 'M·ª•c ti√™u',
        actual: 'Th·ª±c t·∫ø',
        today: 'H√¥m nay',
        yesterday: 'H√¥m qua',
        thisMonth: 'Th√°ng n√†y',
        seeAll: 'Xem t·∫•t c·∫£',
        askPlaceholder: 'Mu·ªën mua g√¨?',
        askHint: 'H·ªèi Moni tr∆∞·ªõc khi ti√™u',
        addExpenseTitle: '‚úèÔ∏è Th√™m chi ti√™u',
        expenseTextPlaceholder: 'VD: Cafe 50k, Grab 85k, C∆°m 45k...',
        expenseTextHint: 'üí° G√µ t√™n + s·ªë ti·ªÅn, AI s·∫Ω t·ª± ph√¢n lo·∫°i',
        name: 'T√™n',
        namePlaceholderExpense: 'VD: Cafe, Grab, ƒÇn tr∆∞a...',
        amount: 'S·ªë ti·ªÅn',
        addExpense: 'Th√™m chi ti√™u',
        expense: 'Chi ti√™u',
        enterValidAmount: 'Vui l√≤ng nh·∫≠p s·ªë ti·ªÅn h·ª£p l·ªá',
        viewAll: 'Xem danh m·ª•c',
        hideCategories: '·∫®n danh m·ª•c',
        noExpensesYet: 'Ch∆∞a c√≥ chi ti√™u n√†o h√¥m nay',
        noGoalsYet: 'Ch∆∞a c√≥ m·ª•c ti√™u n√†o',
        goalsWillAppear: 'M·ª•c ti√™u s·∫Ω hi·ªÉn th·ªã ·ªü ƒë√¢y',
        deposit: 'G·ª≠i ti·ªÅn',
        goalAchieved: 'ƒê·∫°t m·ª•c ti√™u',
        enterDepositAmount: 'Nh·∫≠p s·ªë ti·ªÅn g·ª≠i',
        enterWithdrawAmount: 'Nh·∫≠p s·ªë ti·ªÅn r√∫t',
        remaining: 'C√≤n l·∫°i',
        available: 'C√≥ s·∫µn',
        setAllocation: 'ƒê·∫∑t m·ª•c ti√™u h√†ng th√°ng',
        expensesWillAppear: 'Chi ti√™u s·∫Ω hi·ªÉn th·ªã ·ªü ƒë√¢y',
        saved: 'ƒë√£ ti·∫øt ki·ªám',
        total: 'T·ªïng',
        afterPurchase: 'Sau khi mua:',
        leftRemaining: 'c√≤n l·∫°i',
        bought: 'Mua r·ªìi ‚úì',
        cancel: 'Th√¥i',
        close: 'ƒê√≥ng',
        home: 'Home',
        goals: 'Goals',
        history: 'History',
        // Fixed expenses names
        rent: 'Ti·ªÅn nh√†',
        electric: 'ƒêi·ªán',
        water: 'N∆∞·ªõc',
        internet: 'Internet',
        phone: 'ƒêi·ªán tho·∫°i',
        insurance: 'B·∫£o hi·ªÉm',
        // Goals names
        laptop: 'Laptop',
        phoneGoal: 'ƒêi·ªán tho·∫°i',
        trip: 'Du l·ªãch',
        bike: 'Xe m√°y',
        emergency: 'Qu·ªπ kh·∫©n c·∫•p',
        wedding: 'ƒê√°m c∆∞·ªõi',
        // Chat
        notUnderstand: 'Moni ch∆∞a hi·ªÉu l·∫Øm. B·∫°n th·ª≠ nh·∫≠p ki·ªÉu "Cafe 50k" ho·∫∑c "Grab 85k" nh√©! üòä',
        buyIt: 'mua ƒëi!',
        okToBuy: 'ƒë∆∞·ª£c th√¥i!',
        tooMuch: 'h∆°i nhi·ªÅu ƒë√≥!',
        onlyPercent: 'Ch·ªâ',
        budget: 'ng√¢n s√°ch',
        comfortable: 'tho·∫£i m√°i!',
        considerIt: 'C√¢n nh·∫Øc ch√∫t nh√©.',
        areYouSure: 'B·∫°n ch·∫Øc ch·ª©?',
        percentOfBudget: 'ng√¢n s√°ch c√≤n l·∫°i.',
        // B1: Permission Engine
        mayAffectGoals: 'C√≥ th·ªÉ ·∫£nh h∆∞·ªüng m·ª•c ti√™u',
        noGoalImpact: 'Kh√¥ng ·∫£nh h∆∞·ªüng m·ª•c ti√™u',
        // B2: Future Self Visualization
        addFutureSelfNote: 'Vi·∫øt v·ªÅ t∆∞∆°ng lai c·ªßa b·∫°n...',
        futureSelfPrompt: 'T·∫°i sao b·∫°n mu·ªën ƒëi·ªÅu n√†y? M√¥ t·∫£ b·∫£n th√¢n t∆∞∆°ng lai:',
        // B3: Analytics
        analytics: 'Th·ªëng k√™',
        relationships: 'K·∫øt n·ªëi',
        selfCare: 'B·∫£n th√¢n',
        necessities: 'Thi·∫øt y·∫øu',
        thisMonthSpending: 'Chi ti√™u th√°ng n√†y',
        meaningAttached: '√ù nghƒ©a chi ti√™u',
        relationshipsFocus: 'X√¢y d·ª±ng m·ªëi quan h·ªá',
        selfCareFocus: 'ƒê·∫ßu t∆∞ cho b·∫£n th√¢n',
        necessitiesFocus: 'Chi ph√≠ c·∫ßn thi·∫øt',
        noDataYet: 'Ch∆∞a c√≥ d·ªØ li·ªáu chi ti√™u',
        // B4: Peace of Mind Indicator
        paceOkay: 'ƒêang okay',
        paceGood: 'V·∫´n ·ªïn',
        paceWatch: 'Ch√∫ √Ω ch√∫t',
        onPace: 'v·∫´n ƒë√∫ng pace',
        slowDown: 'n√™n ch·∫≠m l·∫°i',
        // B5: Settings
        settings: 'C√†i ƒë·∫∑t',
        edit: 'S·ª≠a',
        redo: 'L√†m l·∫°i',
        reset: 'X√≥a',
        month: 'th√°ng',
        enterIncome: 'Nh·∫≠p thu nh·∫≠p h√†ng th√°ng:',
        goalsAllocation: 'Goals & Allocation',
        monthlyAllocation: 'ƒê·ªÉ d√†nh h√†ng th√°ng',
        personality: 'T√≠nh c√°ch',
        languageLabel: 'Ng√¥n ng·ªØ',
        noFixedExpenses: 'Kh√¥ng c√≥ chi ph√≠ c·ªë ƒë·ªãnh',
        noGoals: 'Ch∆∞a c√≥ m·ª•c ti√™u',
        resetData: 'X√≥a d·ªØ li·ªáu',
        resetWarning: 'B·∫Øt ƒë·∫ßu l·∫°i t·ª´ ƒë·∫ßu',
        redoQuizConfirm: 'L√†m l·∫°i quiz t√≠nh c√°ch? K·∫øt qu·∫£ hi·ªán t·∫°i s·∫Ω b·ªã thay th·∫ø.',
        selectLanguage: 'Ch·ªçn ng√¥n ng·ªØ',
        enterNumber: 'Nh·∫≠p s·ªë (1-7)',
        resetConfirm: 'B·∫°n ch·∫Øc ch·ª©? T·∫•t c·∫£ d·ªØ li·ªáu s·∫Ω b·ªã x√≥a.',
        resetConfirm2: 'Kh√¥ng th·ªÉ ho√†n t√°c. Th·∫≠t s·ª± x√≥a?',
      },
      en: {
        welcome: 'Welcome to Moni!',
        tagline: 'Manage money your way.<br>No judgment. Just support.',
        start: 'Get Started ‚Üí',
        welcomeTitle: 'Welcome to Moni!',
        welcomeDesc: 'Moni helps you spend with intention ‚Äî not tracking every penny, but knowing where you are on the path to your goals.',
        nameLabel: 'What should we call you?',
        namePlaceholder: 'Enter your name...',
        continue: 'Continue ‚Üí',
        quizTitle: '4 Money Personalities',
        quizDesc: 'Which type are you? Take the quiz to find out!',
        theDreamer: 'The Dreamer',
        dreamerTag: 'Visionary',
        theExperiencer: 'The Experiencer',
        experiencerTag: 'Adventure Seeker',
        theGiver: 'The Giver',
        giverTag: 'Generous Soul',
        thePlanner: 'The Planner',
        plannerTag: 'Strategic Mind',
        quizAccompany: 'üéØ Moni will support your unique style',
        startQuiz: 'Take Quiz ¬∑ 4 questions ‚Üí',
        skip: 'Skip',
        quiz1: 'When you receive unexpected bonus money, you usually...',
        quiz1opt1: 'Make a specific plan for it',
        quiz1opt2: 'Treat yourself right away',
        quiz1opt3: 'Think about gifts for loved ones',
        quiz1opt4: 'Dream about possibilities',
        quiz2: 'When do you overspend the most?',
        quiz2opt1: 'Going out with friends',
        quiz2opt2: 'When someone needs help',
        quiz2opt3: 'Attracted by new things',
        quiz2opt4: 'Rarely overspend',
        quiz3: 'How do you feel when thinking about money...',
        quiz3opt1: 'Excited about the future',
        quiz3opt2: 'Relaxed, living in the moment',
        quiz3opt3: 'Worried about loved ones',
        quiz3opt4: 'Feeling in control',
        quiz4: 'What describes you best?',
        quiz4opt1: 'Many dreams, hard to focus',
        quiz4opt2: 'Memories matter more than saving',
        quiz4opt3: 'Happy when helping others',
        quiz4opt4: 'Love clear plans',
        thisIsYou: '‚ú® This is you!',
        dreamerDesc: 'You have beautiful dreams and rich imagination. Moni will help you focus on what matters most.',
        experiencerDesc: 'You believe life is for experiencing. Moni will help you balance enjoying now and securing your future.',
        giverDesc: 'Your joy is bringing joy to others. Moni will remind you to invest in yourself too.',
        plannerDesc: 'You have great financial discipline. Moni will help you optimize further and celebrate small wins.',
        // Archetype quotes
        dreamerQuote1: 'Dreams become reality, one step at a time ‚ú®',
        dreamerQuote2: 'Your vision is your compass üåü',
        dreamerQuote3: 'Big things start with small savings üí´',
        experiencerQuote1: 'Life is made of moments worth funding üé¢',
        experiencerQuote2: 'Adventures await, you\'re preparing well! üåà',
        experiencerQuote3: 'Each save brings new experiences closer üéØ',
        giverQuote1: 'Your generosity starts with self-care üíù',
        giverQuote2: 'Secure your mask first, then help others ü§ù',
        giverQuote3: 'Financial wellness lets you give more üíï',
        plannerQuote1: 'Every detail matters, you\'re on track üìã',
        plannerQuote2: 'Systematic progress leads to success üéØ',
        plannerQuote3: 'Your plan is working beautifully ‚úÖ',
        // Celebration translations
        firstExpenseTitle: 'First Expense!',
        firstExpenseDesc: 'You\'re on your way!',
        tenExpensesTitle: 'Getting Organized!',
        tenExpensesDesc: '10 expenses tracked!',
        goalCompleteDesc: 'Amazing achievement!',
        keepGoingDesc: 'Keep it up!',
        toward: 'toward',
        dayStreak: 'Day Streak',
        streakDesc: 'You\'re on fire!',
        days: 'days',
        // Moni mood messages
        moniCelebrating: 'Woohoo! You did it!',
        moniHappy: 'Great day so far!',
        moniExcited: 'You\'re on a roll!',
        moniProud: 'Look at that progress!',
        moniEncouraging: 'Fresh start today!',
        moniCalm: 'Balanced and steady.',
        moniFriendly: 'Hey there, friend!',
        moniSupportive: 'Tomorrow is a new day!',
        // Archetype goal UI
        dreamGoal: 'Dream Goal',
        dreamerGoalQuote1: 'Your dream is taking shape ‚ú®',
        dreamerGoalQuote2: 'Every step brings you closer üåü',
        bringDreamCloser: 'Bring Dream Closer',
        dreamAchieved: 'Dream Achieved',
        breakdown: 'Breakdown',
        week: 'wk',
        day: 'day',
        monthly: 'Monthly',
        giverTripImpact: 'Create memories with loved ones',
        giverEmergencyImpact: 'Be there when others need you',
        giverDefaultImpact: 'Enable your generous heart',
        yourProgress: 'Your progress',
        toGo: 'to go',
        addToGiving: 'Add to Your Giving Fund',
        readyToGive: 'Ready to Give',
        adventure: 'ADVENTURE',
        fundedSoFar: 'funded',
        monthsToGo: 'months to go',
        fundAdventure: 'Fund This Adventure',
        adventureReady: 'Adventure Ready',
        incomeTitle: 'Monthly Income',
        incomeDesc: 'So Moni can calculate how much you can comfortably spend each month.',
        privacyNote: 'Information is secure and stored only on your device',
        smartInputHint: 'üí° Type naturally: 15k, 1.5m, 1.5 million...',
        fixedTitle: 'Monthly Fixed Expenses',
        fixedDesc: 'Regular payments you make. Enter amounts or remove if not applicable.',
        addOther: 'Add another',
        totalFixed: 'Total fixed expenses',
        addFixedTitle: '‚ûï Add fixed expense',
        expenseName: 'Expense name',
        expenseNamePlaceholder: 'E.g.: Gym, Netflix, Tuition...',
        amountPerMonth: 'Amount / month',
        add: 'Add',
        goalsTitle: 'What are you working towards?',
        goalsDesc: 'Choose 1-3 goals. Moni will help you track progress.',
        createOwn: 'Create own',
        createGoalTitle: '‚ú® Create new goal',
        goalName: 'Goal name',
        goalNamePlaceholder: 'E.g.: New iPhone, Course, Bicycle...',
        amountNeeded: 'Amount needed',
        addGoal: 'Add goal',
        allocationTitle: 'How much to save monthly?',
        allocationDesc: 'Choose how much you want to save for each goal monthly.',
        target: 'Target',
        perMonth: '/ month',
        reachGoalIn: 'Reach goal in',
        months: 'months',
        income: 'Income',
        fixedExpenses: 'Fixed expenses',
        savingForGoals: 'Saving for goals',
        spendComfortably: 'Spend comfortably',
        finish: 'Finish ‚Üí',
        hey: 'Hey,',
        spendableLabel: 'Spendable',
        daysLeft: 'days left',
        remaining: 'remaining',
        goalTarget: 'Target',
        actual: 'Actual',
        today: 'Today',
        yesterday: 'Yesterday',
        thisMonth: 'This month',
        seeAll: 'See all',
        askPlaceholder: 'Want to buy something?',
        askHint: 'Ask Moni before spending',
        addExpenseTitle: '‚úèÔ∏è Add expense',
        expenseTextPlaceholder: 'E.g.: Coffee $5, Uber $25, Lunch $15...',
        expenseTextHint: 'üí° Type name + amount, AI will categorize',
        name: 'Name',
        namePlaceholderExpense: 'E.g.: Coffee, Uber, Lunch...',
        amount: 'Amount',
        addExpense: 'Add expense',
        expense: 'Expense',
        enterValidAmount: 'Please enter a valid amount',
        viewAll: 'View categories',
        hideCategories: 'Hide categories',
        noExpensesYet: 'No expenses yet today',
        noGoalsYet: 'No goals yet',
        goalsWillAppear: 'Your goals will appear here',
        deposit: 'Deposit',
        goalAchieved: 'Goal achieved',
        enterDepositAmount: 'Enter deposit amount',
        enterWithdrawAmount: 'Enter withdrawal amount',
        remaining: 'Remaining',
        available: 'Available',
        setAllocation: 'Set monthly goal',
        expensesWillAppear: 'Your expenses will appear here',
        saved: 'saved',
        total: 'Total',
        afterPurchase: 'After purchase:',
        leftRemaining: 'remaining',
        bought: 'Bought ‚úì',
        cancel: 'Cancel',
        close: 'Close',
        home: 'Home',
        goals: 'Goals',
        history: 'History',
        rent: 'Rent',
        electric: 'Electric',
        water: 'Water',
        internet: 'Internet',
        phone: 'Phone',
        insurance: 'Insurance',
        laptop: 'Laptop',
        phoneGoal: 'Phone',
        trip: 'Trip',
        bike: 'Motorbike',
        emergency: 'Emergency Fund',
        wedding: 'Wedding',
        notUnderstand: 'Moni doesn\'t understand. Try typing "Coffee 50k" or "Uber 85k"! üòä',
        buyIt: 'go for it!',
        okToBuy: 'looks good!',
        tooMuch: 'that\'s a bit much!',
        onlyPercent: 'Only',
        budget: 'budget',
        comfortable: 'comfortable!',
        considerIt: 'Consider it.',
        areYouSure: 'Are you sure?',
        percentOfBudget: 'of remaining budget.',
        // B1: Permission Engine
        mayAffectGoals: 'May slow down your goals',
        noGoalImpact: 'Won\'t affect your goals',
        // B2: Future Self Visualization
        addFutureSelfNote: 'Add a note about your future self...',
        futureSelfPrompt: 'Why do you want this? Describe your future self enjoying this goal:',
        // B3: Analytics
        analytics: 'Analytics',
        relationships: 'Relationships',
        selfCare: 'Self-care',
        necessities: 'Necessities',
        thisMonthSpending: 'This Month\'s Spending',
        meaningAttached: 'Meaning Attached',
        relationshipsFocus: 'Building connections',
        selfCareFocus: 'Investing in yourself',
        necessitiesFocus: 'Covering essentials',
        noDataYet: 'No spending data yet',
        // B4: Peace of Mind Indicator
        paceOkay: 'On track',
        paceGood: 'Doing well',
        paceWatch: 'Watch spending',
        onPace: 'on pace',
        slowDown: 'slow down a bit',
        // B5: Settings
        settings: 'Settings',
        edit: 'Edit',
        redo: 'Redo',
        reset: 'Reset',
        month: 'mo',
        enterIncome: 'Enter monthly income:',
        goalsAllocation: 'Goals & Allocation',
        monthlyAllocation: 'Monthly allocation',
        personality: 'Personality',
        languageLabel: 'Language',
        noFixedExpenses: 'No fixed expenses',
        noGoals: 'No goals set',
        resetData: 'Reset Data',
        resetWarning: 'Start fresh',
        redoQuizConfirm: 'Retake personality quiz? Your current type will be replaced.',
        selectLanguage: 'Select language',
        enterNumber: 'Enter number (1-7)',
        resetConfirm: 'Are you sure? All data will be deleted.',
        resetConfirm2: 'This cannot be undone. Really reset?',
      },
      zh: {
        welcome: 'Ê¨¢ËøéÊù•Âà∞Moni!',
        tagline: 'ÊåâÁÖßÊÇ®ÁöÑÊñπÂºèÁÆ°ÁêÜÈáëÈí±„ÄÇ<br>‰∏çËØÑÂà§ÔºåÂè™Èô™‰º¥„ÄÇ',
        start: 'ÂºÄÂßã ‚Üí',
        welcomeTitle: 'Ê¨¢ËøéÊù•Âà∞Moni!',
        welcomeDesc: 'MoniÂ∏ÆÂä©ÊÇ®ÊúâÁõÆÁöÑÂú∞Ê∂àË¥π‚Äî‚Äî‰∏çÊòØËøΩË∏™ÊØè‰∏ÄÂàÜÈí±ÔºåËÄåÊòØÁü•ÈÅìÊÇ®Âú®ÂÆûÁé∞ÁõÆÊ†áÁöÑË∑Ø‰∏äËµ∞Âà∞Âì™Èáå‰∫Ü„ÄÇ',
        nameLabel: 'Êàë‰ª¨ÊÄé‰πàÁß∞ÂëºÊÇ®Ôºü',
        namePlaceholder: 'ËæìÂÖ•ÊÇ®ÁöÑÂêçÂ≠ó...',
        continue: 'ÁªßÁª≠ ‚Üí',
        quizTitle: '4ÁßçÈáëÈí±ÊÄßÊ†º',
        quizDesc: 'ÊÇ®Â±û‰∫éÂì™‰∏ÄÁßçÔºüÂÅöÊµãËØïÊù•ÂèëÁé∞ÔºÅ',
        theDreamer: 'Ê¢¶ÊÉ≥ÂÆ∂',
        dreamerTag: 'ÂÖÖÊª°ÊÉ≥Ë±°',
        theExperiencer: '‰ΩìÈ™åËÄÖ',
        experiencerTag: 'ËøΩÊ±Ç‰ΩìÈ™å',
        theGiver: 'Áªô‰∫àËÄÖ',
        giverTag: 'ÊÖ∑ÊÖ®Â§ßÊñπ',
        thePlanner: 'ËßÑÂàíËÄÖ',
        plannerTag: 'Ê∑±ÊÄùÁÜüËôë',
        quizAccompany: 'üéØ MoniÂ∞Ü‰ª•ÊÇ®ÁöÑÈ£éÊ†ºÈô™‰º¥ÊÇ®',
        startQuiz: 'ÂºÄÂßãÊµãËØï ¬∑ 4‰∏™ÈóÆÈ¢ò ‚Üí',
        skip: 'Ë∑≥Ëøá',
        quiz1: 'ÂΩìÊÇ®Êî∂Âà∞ÊÑèÂ§ñÂ•ñÈáëÊó∂ÔºåÊÇ®ÈÄöÂ∏∏...',
        quiz1opt1: '‰∏∫ÂÆÉÂà∂ÂÆöÂÖ∑‰ΩìËÆ°Âàí',
        quiz1opt2: 'Á´ãÂç≥ÁäíÂä≥Ëá™Â∑±',
        quiz1opt3: 'ÊÉ≥ÁùÄÁªô‰∫≤‰∫∫‰π∞Á§ºÁâ©',
        quiz1opt4: 'Ê¢¶ÊÉ≥ÂêÑÁßçÂèØËÉΩÊÄß',
        quiz2: 'ÊÇ®‰ªÄ‰πàÊó∂ÂÄôÊúÄÂÆπÊòìË∂ÖÊîØÔºü',
        quiz2opt1: 'ÂíåÊúãÂèãÂá∫ÂéªÁé©',
        quiz2opt2: 'Êúâ‰∫∫ÈúÄË¶ÅÂ∏ÆÂä©Êó∂',
        quiz2opt3: 'Ë¢´Êñ∞‰∫ãÁâ©Âê∏Âºï',
        quiz2opt4: 'ÂæàÂ∞ëË∂ÖÊîØ',
        quiz3: 'ÂΩìÊÇ®ÊÉ≥Âà∞Èí±Êó∂ÁöÑÊÑüÂèó...',
        quiz3opt1: 'ÂØπÊú™Êù•ÊÑüÂà∞ÂÖ¥Â•ã',
        quiz3opt2: 'ÊîæÊùæÔºåÊ¥ªÂú®ÂΩì‰∏ã',
        quiz3opt3: 'ÊãÖÂøÉ‰∫≤‰∫∫',
        quiz3opt4: 'ÊÑüËßâÂú®ÊéåÊéß‰∏≠',
        quiz4: 'Âì™‰∏™ÊúÄËÉΩÊèèËø∞ÊÇ®Ôºü',
        quiz4opt1: 'Ê¢¶ÊÉ≥ÂæàÂ§öÔºåÈöæ‰ª•‰∏ìÊ≥®',
        quiz4opt2: 'ÂõûÂøÜÊØîÂ≠òÈí±Êõ¥ÈáçË¶Å',
        quiz4opt3: 'Â∏ÆÂä©‰ªñ‰∫∫Êó∂ÊÑüÂà∞Âø´‰πê',
        quiz4opt4: 'ÂñúÊ¨¢Ê∏ÖÊô∞ÁöÑËÆ°Âàí',
        thisIsYou: '‚ú® ËøôÂ∞±ÊòØÊÇ®ÔºÅ',
        dreamerDesc: 'ÊÇ®ÊúâÁæé‰∏ΩÁöÑÊ¢¶ÊÉ≥Âíå‰∏∞ÂØåÁöÑÊÉ≥Ë±°Âäõ„ÄÇMoniÂ∞ÜÂ∏ÆÂä©ÊÇ®‰∏ìÊ≥®‰∫éÊúÄÈáçË¶ÅÁöÑ‰∫ãÊÉÖ„ÄÇ',
        experiencerDesc: 'ÊÇ®Áõ∏‰ø°ÁîüÊ¥ªÂ∞±ÊòØË¶Å‰ΩìÈ™å„ÄÇMoniÂ∞ÜÂ∏ÆÂä©ÊÇ®Âú®‰∫´ÂèóÂΩì‰∏ãÂíåÁ°Æ‰øùÊú™Êù•‰πãÈó¥ÂèñÂæóÂπ≥Ë°°„ÄÇ',
        giverDesc: 'ÊÇ®ÁöÑÂø´‰πêÊòØÁªô‰ªñ‰∫∫Â∏¶Êù•Âø´‰πê„ÄÇMoni‰ºöÊèêÈÜíÊÇ®‰πüË¶ÅÊäïËµÑËá™Â∑±„ÄÇ',
        plannerDesc: 'ÊÇ®ÊúâÂæàÂ•ΩÁöÑË¥¢Âä°Á∫™Âæã„ÄÇMoniÂ∞ÜÂ∏ÆÂä©ÊÇ®Ëøõ‰∏ÄÊ≠•‰ºòÂåñÂπ∂Â∫ÜÁ•ùÂ∞èËÉúÂà©„ÄÇ',
        // Archetype quotes
        dreamerQuote1: 'Ê¢¶ÊÉ≥‰∏ÄÊ≠•Ê≠•Êàê‰∏∫Áé∞ÂÆû ‚ú®',
        dreamerQuote2: '‰Ω†ÁöÑÊÑøÊôØÊòØ‰Ω†ÁöÑÊåáÂçóÈíà üåü',
        dreamerQuote3: 'Â§ß‰∫ã‰ªéÂ∞èÂ≠òÂºÄÂßã üí´',
        experiencerQuote1: 'ÁîüÊ¥ªÁî±ÂÄºÂæóÊäïËµÑÁöÑÊó∂ÂàªÁªÑÊàê üé¢',
        experiencerQuote2: 'ÂÜíÈô©Âú®Á≠âÂæÖÔºå‰Ω†ÂáÜÂ§áÂæóÂæàÂ•ΩÔºÅüåà',
        experiencerQuote3: 'ÊØèÊ¨°ÂÇ®ËìÑÈÉΩËÆ©Êñ∞‰ΩìÈ™åÊõ¥Ëøë üéØ',
        giverQuote1: 'ÊÖ∑ÊÖ®‰ªéËá™ÊàëÂÖ≥Áà±ÂºÄÂßã üíù',
        giverQuote2: 'ÂÖàÊà¥Â•ΩËá™Â∑±ÁöÑÊ∞ßÊ∞îÈù¢ÁΩ© ü§ù',
        giverQuote3: 'Ë¥¢Âä°ÂÅ•Â∫∑ËÆ©‰Ω†Áªô‰∫àÊõ¥Â§ö üíï',
        plannerQuote1: 'ÊØè‰∏™ÁªÜËäÇÈÉΩÈáçË¶ÅÔºå‰Ω†Âú®Ê≠£ËΩ®‰∏ä üìã',
        plannerQuote2: 'Á≥ªÁªüÊÄßÁöÑËøõÊ≠•ÈÄöÂêëÊàêÂäü üéØ',
        plannerQuote3: '‰Ω†ÁöÑËÆ°ÂàíËøêË°åÂæóÂæàÂÆåÁæé ‚úÖ',
        // Celebration translations
        firstExpenseTitle: 'Á¨¨‰∏ÄÁ¨îÊîØÂá∫ÔºÅ',
        firstExpenseDesc: '‰Ω†Ê≠£Âú®Ë∑Ø‰∏äÔºÅ',
        tenExpensesTitle: 'Ë∂äÊù•Ë∂äÊúâÊù°ÁêÜÔºÅ',
        tenExpensesDesc: 'Â∑≤ËÆ∞ÂΩï10Á¨îÊîØÂá∫ÔºÅ',
        goalCompleteDesc: '‰∫Ü‰∏çËµ∑ÁöÑÊàêÂ∞±ÔºÅ',
        keepGoingDesc: 'ÁªßÁª≠Âä†Ê≤πÔºÅ',
        toward: 'ÊúùÂêë',
        dayStreak: 'Â§©ËøûÁª≠',
        streakDesc: '‰Ω†Â§™Ê£í‰∫ÜÔºÅ',
        days: 'Â§©',
        // Moni mood messages
        moniCelebrating: 'Â§™Ê£í‰∫ÜÔºÅ‰Ω†ÂÅöÂà∞‰∫ÜÔºÅ',
        moniHappy: 'ÁæéÂ•ΩÁöÑ‰∏ÄÂ§©ÔºÅ',
        moniExcited: '‰Ω†Âäø‰∏çÂèØÊå°ÔºÅ',
        moniProud: 'ÁúãÁúãËøôËøõÊ≠•ÔºÅ',
        moniEncouraging: '‰ªäÂ§©Êñ∞ÂºÄÂßãÔºÅ',
        moniCalm: 'Âπ≥Ë°°Á®≥ÂÆö„ÄÇ',
        moniFriendly: 'Âó®ÔºåÊúãÂèãÔºÅ',
        moniSupportive: 'ÊòéÂ§©ÂèàÊòØÊñ∞ÁöÑ‰∏ÄÂ§©ÔºÅ',
        // Archetype goal UI
        dreamGoal: 'Ê¢¶ÊÉ≥ÁõÆÊ†á',
        dreamerGoalQuote1: '‰Ω†ÁöÑÊ¢¶ÊÉ≥Ê≠£Âú®ÊàêÂΩ¢ ‚ú®',
        dreamerGoalQuote2: 'ÊØè‰∏ÄÊ≠•ÈÉΩËÆ©‰Ω†Êõ¥Ëøë üåü',
        bringDreamCloser: 'ËÆ©Ê¢¶ÊÉ≥Êõ¥Ëøë‰∏ÄÊ≠•',
        dreamAchieved: 'Ê¢¶ÊÉ≥ÊàêÁúü',
        breakdown: 'ÊòéÁªÜ',
        week: 'Âë®',
        day: 'Â§©',
        monthly: 'ÊØèÊúà',
        giverTripImpact: '‰∏é‰∫≤‰∫∫ÂàõÈÄ†ÂõûÂøÜ',
        giverEmergencyImpact: 'Âú®‰ªñ‰∫∫ÈúÄË¶ÅÊó∂‰º∏Âá∫Êè¥Êâã',
        giverDefaultImpact: 'ÊàêÂ∞±‰Ω†ÊÖ∑ÊÖ®ÁöÑÂøÉ',
        yourProgress: '‰Ω†ÁöÑËøõÂ∫¶',
        toGo: 'ËøòÂ∑Æ',
        addToGiving: 'Ê∑ªÂä†Âà∞Áà±ÂøÉÂü∫Èáë',
        readyToGive: 'ÂáÜÂ§áÂ•ΩÁªô‰∫à',
        adventure: 'ÂÜíÈô©',
        fundedSoFar: 'Â∑≤Á≠π',
        monthsToGo: '‰∏™ÊúàÂêé',
        fundAdventure: '‰∏∫ÂÜíÈô©ÂÇ®ËìÑ',
        adventureReady: 'ÂÜíÈô©ÂáÜÂ§áÂ∞±Áª™',
        incomeTitle: 'ÊúàÊî∂ÂÖ•',
        incomeDesc: 'ËøôÊ†∑MoniÂèØ‰ª•ËÆ°ÁÆóÊÇ®ÊØèÊúàÂèØ‰ª•ËàíÈÄÇÂú∞Ëä±Â§öÂ∞ëÈí±„ÄÇ',
        privacyNote: '‰ø°ÊÅØÂÆâÂÖ®Ôºå‰ªÖÂ≠òÂÇ®Âú®ÊÇ®ÁöÑËÆæÂ§á‰∏ä',
        smartInputHint: 'üí° Ëá™ÁÑ∂ËæìÂÖ•: 15k, 1.5‰∏á, 100‰∏á...',
        fixedTitle: 'ÊØèÊúàÂõ∫ÂÆöÊîØÂá∫',
        fixedDesc: 'ÊÇ®ÂÆöÊúüÊîØ‰ªòÁöÑË¥πÁî®„ÄÇËæìÂÖ•ÈáëÈ¢ùÊàñÂà†Èô§‰∏çÈÄÇÁî®ÁöÑÈ°πÁõÆ„ÄÇ',
        addOther: 'Ê∑ªÂä†ÂÖ∂‰ªñ',
        totalFixed: 'Âõ∫ÂÆöÊîØÂá∫ÊÄªËÆ°',
        addFixedTitle: '‚ûï Ê∑ªÂä†Âõ∫ÂÆöÊîØÂá∫',
        expenseName: 'ÊîØÂá∫ÂêçÁß∞',
        expenseNamePlaceholder: '‰æãÂ¶ÇÔºöÂÅ•Ë∫´Êàø„ÄÅNetflix„ÄÅÂ≠¶Ë¥π...',
        amountPerMonth: 'ÊØèÊúàÈáëÈ¢ù',
        add: 'Ê∑ªÂä†',
        goalsTitle: 'ÊÇ®Âú®ËøΩÊ±Ç‰ªÄ‰πàÔºü',
        goalsDesc: 'ÈÄâÊã©1-3‰∏™ÁõÆÊ†á„ÄÇMoniÂ∞ÜÂ∏ÆÂä©ÊÇ®Ë∑üË∏™ËøõÂ∫¶„ÄÇ',
        createOwn: 'Ëá™ÂÆö‰πâ',
        createGoalTitle: '‚ú® ÂàõÂª∫Êñ∞ÁõÆÊ†á',
        goalName: 'ÁõÆÊ†áÂêçÁß∞',
        goalNamePlaceholder: '‰æãÂ¶ÇÔºöÊñ∞iPhone„ÄÅËØæÁ®ã„ÄÅËá™Ë°åËΩ¶...',
        amountNeeded: 'ÈúÄË¶ÅÈáëÈ¢ù',
        addGoal: 'Ê∑ªÂä†ÁõÆÊ†á',
        allocationTitle: 'ÊØèÊúàÂ≠òÂ§öÂ∞ëÔºü',
        allocationDesc: 'ÈÄâÊã©ÊÇ®ÊØèÊúàÊÉ≥‰∏∫ÊØè‰∏™ÁõÆÊ†áÂ≠òÂ§öÂ∞ëÈí±„ÄÇ',
        target: 'ÁõÆÊ†á',
        perMonth: '/ Êúà',
        reachGoalIn: 'ËææÊàêÁõÆÊ†áÈúÄË¶Å',
        months: '‰∏™Êúà',
        income: 'Êî∂ÂÖ•',
        fixedExpenses: 'Âõ∫ÂÆöÊîØÂá∫',
        savingForGoals: 'ÁõÆÊ†áÂÇ®ËìÑ',
        spendComfortably: 'ÂèØËá™Áî±ÊîØÈÖç',
        finish: 'ÂÆåÊàê ‚Üí',
        hey: 'Âó®Ôºå',
        spendableLabel: 'ÂèØÊîØÈÖç',
        daysLeft: 'Â§©Ââ©‰Ωô',
        remaining: 'ËøòÊúâ',
        goalTarget: 'ÁõÆÊ†á',
        actual: 'ÂÆûÈôÖ',
        today: '‰ªäÂ§©',
        yesterday: 'Êò®Â§©',
        thisMonth: 'Êú¨Êúà',
        seeAll: 'Êü•ÁúãÂÖ®ÈÉ®',
        askPlaceholder: 'ÊÉ≥‰π∞‰ªÄ‰πàÔºü',
        askHint: 'Ê∂àË¥πÂâçÈóÆÈóÆMoni',
        addExpenseTitle: '‚úèÔ∏è Ê∑ªÂä†ÊîØÂá∫',
        expenseTextPlaceholder: '‰æãÂ¶ÇÔºöÂíñÂï° 30ÂÖÉ, ÊâìËΩ¶ 50ÂÖÉ...',
        expenseTextHint: 'üí° ËæìÂÖ•ÂêçÁß∞+ÈáëÈ¢ùÔºåAIËá™Âä®ÂàÜÁ±ª',
        name: 'ÂêçÁß∞',
        namePlaceholderExpense: '‰æãÂ¶ÇÔºöÂíñÂï°„ÄÅÊâìËΩ¶„ÄÅÂçàÈ§ê...',
        amount: 'ÈáëÈ¢ù',
        addExpense: 'Ê∑ªÂä†ÊîØÂá∫',
        expense: 'ÊîØÂá∫',
        enterValidAmount: 'ËØ∑ËæìÂÖ•ÊúâÊïàÈáëÈ¢ù',
        viewAll: 'Êü•ÁúãÂàÜÁ±ª',
        hideCategories: 'ÈöêËóèÂàÜÁ±ª',
        noExpensesYet: '‰ªäÂ§©ËøòÊ≤°ÊúâÊîØÂá∫',
        noGoalsYet: 'ËøòÊ≤°ÊúâÁõÆÊ†á',
        goalsWillAppear: '‰Ω†ÁöÑÁõÆÊ†áÂ∞ÜÊòæÁ§∫Âú®ËøôÈáå',
        deposit: 'Â≠òÊ¨æ',
        goalAchieved: 'ÁõÆÊ†áËææÊàê',
        enterDepositAmount: 'ËæìÂÖ•Â≠òÊ¨æÈáëÈ¢ù',
        enterWithdrawAmount: 'ËæìÂÖ•ÂèñÊ¨æÈáëÈ¢ù',
        remaining: 'Ââ©‰Ωô',
        available: 'ÂèØÁî®',
        setAllocation: 'ËÆæÁΩÆÊØèÊúàÁõÆÊ†á',
        expensesWillAppear: '‰Ω†ÁöÑÊîØÂá∫Â∞ÜÊòæÁ§∫Âú®ËøôÈáå',
        saved: 'Â∑≤Â≠ò',
        total: 'ÊÄªËÆ°',
        afterPurchase: 'Ë¥≠‰π∞ÂêéÔºö',
        leftRemaining: 'Ââ©‰Ωô',
        bought: 'Â∑≤Ë¥≠‰π∞ ‚úì',
        cancel: 'ÂèñÊ∂à',
        close: 'ÂÖ≥Èó≠',
        home: 'È¶ñÈ°µ',
        goals: 'ÁõÆÊ†á',
        history: 'ÂéÜÂè≤',
        rent: 'ÊàøÁßü',
        electric: 'ÁîµË¥π',
        water: 'Ê∞¥Ë¥π',
        internet: 'ÁΩëË¥π',
        phone: 'ËØùË¥π',
        insurance: '‰øùÈô©',
        laptop: 'Á¨îËÆ∞Êú¨',
        phoneGoal: 'ÊâãÊú∫',
        trip: 'ÊóÖË°å',
        bike: 'Êë©ÊâòËΩ¶',
        emergency: 'Â∫îÊÄ•Âü∫Èáë',
        wedding: 'Â©öÁ§º',
        notUnderstand: 'Moni‰∏çÂ§™ÊòéÁôΩ„ÄÇËØïËØïËæìÂÖ•"ÂíñÂï° 50k"Êàñ"ÊâìËΩ¶ 85k"ÔºÅüòä',
        buyIt: '‰π∞ÂêßÔºÅ',
        okToBuy: 'ÂèØ‰ª•‰π∞ÔºÅ',
        tooMuch: 'ÊúâÁÇπÂ§öÔºÅ',
        onlyPercent: 'Âè™Êúâ',
        budget: 'È¢ÑÁÆó',
        comfortable: 'Ê≤°ÈóÆÈ¢òÔºÅ',
        considerIt: 'ËÄÉËôë‰∏Ä‰∏ã„ÄÇ',
        areYouSure: 'Á°ÆÂÆöÂêóÔºü',
        percentOfBudget: 'Ââ©‰ΩôÈ¢ÑÁÆó„ÄÇ',
        // B1: Permission Engine
        mayAffectGoals: 'ÂèØËÉΩÂΩ±Âìç‰Ω†ÁöÑÁõÆÊ†á',
        noGoalImpact: '‰∏ç‰ºöÂΩ±Âìç‰Ω†ÁöÑÁõÆÊ†á',
        // B2: Future Self Visualization
        addFutureSelfNote: 'ÂÜô‰∏ãÂÖ≥‰∫éÊú™Êù•Ëá™Â∑±ÁöÑÁ¨îËÆ∞...',
        futureSelfPrompt: '‰∏∫‰ªÄ‰πàÊÉ≥Ë¶ÅËøô‰∏™ÔºüÊèèËø∞‰∫´ÂèóËøô‰∏™ÁõÆÊ†áÁöÑÊú™Êù•Ëá™Â∑±Ôºö',
        // B3: Analytics
        analytics: 'ÁªüËÆ°',
        relationships: '‰∫∫ÈôÖÂÖ≥Á≥ª',
        selfCare: 'Ëá™ÊàëÂÖ≥Áà±',
        necessities: 'ÂøÖÈúÄÂìÅ',
        thisMonthSpending: 'Êú¨ÊúàÊîØÂá∫',
        meaningAttached: 'Ê∂àË¥πÊÑè‰πâ',
        relationshipsFocus: 'Âª∫Á´ãËÅîÁ≥ª',
        selfCareFocus: 'ÊäïËµÑËá™Â∑±',
        necessitiesFocus: 'Âü∫Êú¨ÂºÄÊîØ',
        noDataYet: 'ÊöÇÊó†Ê∂àË¥πÊï∞ÊçÆ',
        // B4: Peace of Mind Indicator
        paceOkay: 'Áä∂ÊÄÅËâØÂ•Ω',
        paceGood: 'Ëøò‰∏çÈîô',
        paceWatch: 'Ê≥®ÊÑèÊîØÂá∫',
        onPace: 'ËøõÂ∫¶Ê≠£Â∏∏',
        slowDown: 'Á®çÂæÆÊÖ¢ÁÇπ',
        // B5: Settings
        settings: 'ËÆæÁΩÆ',
        edit: 'ÁºñËæë',
        redo: 'ÈáçÂÅö',
        reset: 'ÈáçÁΩÆ',
        month: 'Êúà',
        enterIncome: 'ËæìÂÖ•ÊúàÊî∂ÂÖ•Ôºö',
        goalsAllocation: 'ÁõÆÊ†áÂíåÂàÜÈÖç',
        monthlyAllocation: 'ÊØèÊúàÂàÜÈÖç',
        personality: 'ÊÄßÊ†º',
        languageLabel: 'ËØ≠Ë®Ä',
        noFixedExpenses: 'Êó†Âõ∫ÂÆöÊîØÂá∫',
        noGoals: 'Êú™ËÆæÁΩÆÁõÆÊ†á',
        resetData: 'ÈáçÁΩÆÊï∞ÊçÆ',
        resetWarning: 'ÈáçÊñ∞ÂºÄÂßã',
        redoQuizConfirm: 'ÈáçÂÅöÊÄßÊ†ºÊµãËØïÔºüÂΩìÂâçÁªìÊûúÂ∞ÜË¢´ÊõøÊç¢„ÄÇ',
        selectLanguage: 'ÈÄâÊã©ËØ≠Ë®Ä',
        enterNumber: 'ËæìÂÖ•Êï∞Â≠ó (1-7)',
        resetConfirm: 'Á°ÆÂÆöÂêóÔºüÊâÄÊúâÊï∞ÊçÆÂ∞ÜË¢´Âà†Èô§„ÄÇ',
        resetConfirm2: 'Êó†Ê≥ïÊí§ÈîÄ„ÄÇÁ°ÆÂÆöÈáçÁΩÆÔºü',
      },
      ja: {
        welcome: 'Moni„Å∏„Çà„ÅÜ„Åì„ÅùÔºÅ',
        tagline: '„ÅÇ„Å™„Åü„Çâ„Åó„ÅÑ„ÅäÈáë„ÅÆÁÆ°ÁêÜ„ÄÇ<br>ÊâπÂà§„Å™„Åó„ÄÇ„Çµ„Éù„Éº„Éà„ÅÆ„Åø„ÄÇ',
        start: 'Âßã„ÇÅ„Çã ‚Üí',
        welcomeTitle: 'Moni„Å∏„Çà„ÅÜ„Åì„ÅùÔºÅ',
        welcomeDesc: 'Moni„ÅØÁõÆÁöÑ„ÇíÊåÅ„Å£„ÅüÊîØÂá∫„Çí„ÅäÊâã‰ºù„ÅÑ„Åó„Åæ„Åô ‚Äî ‰∏ÄÂÜÜ‰∏ÄÂÜÜ„ÇíËøΩË∑°„Åô„Çã„ÅÆ„Åß„ÅØ„Å™„Åè„ÄÅÁõÆÊ®ô„Å∏„ÅÆÈÅì„ÅÆ„Çä„Åß„Å©„Åì„Å´„ÅÑ„Çã„Åã„ÇíÊääÊè°„Åó„Åæ„Åô„ÄÇ',
        nameLabel: '„ÅäÂêçÂâç„ÅØ‰Ωï„Åß„Åô„ÅãÔºü',
        namePlaceholder: '„ÅäÂêçÂâç„ÇíÂÖ•Âäõ...',
        continue: 'Á∂ö„Åë„Çã ‚Üí',
        quizTitle: '4„Å§„ÅÆ„Éû„Éç„ÉºÊÄßÊ†º',
        quizDesc: '„ÅÇ„Å™„Åü„ÅØ„Å©„ÅÆ„Çø„Ç§„ÉóÔºü„ÇØ„Ç§„Ç∫„ÅßÁô∫Ë¶ãÔºÅ',
        theDreamer: '„Éâ„É™„Éº„Éû„Éº',
        dreamerTag: 'Â§¢Ë¶ã„Çã‰∫∫',
        theExperiencer: '„Ç®„ÇØ„Çπ„Éö„É™„Ç®„É≥„Çµ„Éº',
        experiencerTag: '‰ΩìÈ®ìËÄÖ',
        theGiver: '„ÇÆ„Éê„Éº',
        giverTag: '‰∏é„Åà„Çã‰∫∫',
        thePlanner: '„Éó„É©„É≥„Éä„Éº',
        plannerTag: 'Ë®àÁîªËÄÖ',
        quizAccompany: 'üéØ Moni„ÅØ„ÅÇ„Å™„Åü„ÅÆ„Çπ„Çø„Ç§„É´„Åß„Çµ„Éù„Éº„Éà„Åó„Åæ„Åô',
        startQuiz: '„ÇØ„Ç§„Ç∫„ÇíÂßã„ÇÅ„Çã ¬∑ 4Âïè ‚Üí',
        skip: '„Çπ„Ç≠„ÉÉ„Éó',
        quiz1: '‰∫àÊúü„Åõ„Å¨„Éú„Éº„Éä„Çπ„Çí„ÇÇ„Çâ„Å£„Åü„Å®„Åç„ÄÅ„ÅÇ„Å™„Åü„ÅØ...',
        quiz1opt1: 'ÂÖ∑‰ΩìÁöÑ„Å™Ë®àÁîª„ÇíÁ´ã„Å¶„Çã',
        quiz1opt2: '„Åô„Åê„Å´Ëá™ÂàÜ„Å´„ÅîË§íÁæé',
        quiz1opt3: 'Â§ßÂàá„Å™‰∫∫„Å∏„ÅÆ„Éó„É¨„Çº„É≥„Éà„ÇíËÄÉ„Åà„Çã',
        quiz1opt4: 'ÂèØËÉΩÊÄß„ÇíÂ§¢Ë¶ã„Çã',
        quiz2: '„ÅÑ„Å§‰∏ÄÁï™‰Ωø„ÅÑ„Åô„Åé„Åæ„Åô„ÅãÔºü',
        quiz2opt1: 'ÂèãÈÅî„Å®ÈÅä„Å∂„Å®„Åç',
        quiz2opt2: 'Ë™∞„Åã„ÅåÂä©„Åë„ÇíÂøÖË¶Å„Å®„Åó„Å¶„ÅÑ„Çã„Å®„Åç',
        quiz2opt3: 'Êñ∞„Åó„ÅÑ„ÇÇ„ÅÆ„Å´ÊÉπ„Åã„Çå„Åü„Å®„Åç',
        quiz2opt4: '„ÇÅ„Å£„Åü„Å´‰Ωø„ÅÑ„Åô„Åé„Å™„ÅÑ',
        quiz3: '„ÅäÈáë„ÅÆ„Åì„Å®„ÇíËÄÉ„Åà„Çã„Å®„Åç...',
        quiz3opt1: 'Êú™Êù•„Å´„ÉØ„ÇØ„ÉØ„ÇØ',
        quiz3opt2: '„É™„É©„ÉÉ„ÇØ„Çπ„ÄÅ‰ªä„ÇíÁîü„Åç„Çã',
        quiz3opt3: 'Â§ßÂàá„Å™‰∫∫„ÅåÂøÉÈÖç',
        quiz3opt4: '„Ç≥„É≥„Éà„É≠„Éº„É´„Åó„Å¶„ÅÑ„ÇãÊÑüË¶ö',
        quiz4: '„ÅÇ„Å™„Åü„ÇíÊúÄ„ÇÇ„Çà„ÅèË°®„Åô„ÅÆ„ÅØÔºü',
        quiz4opt1: 'Â§¢„Åå„Åü„Åè„Åï„Çì„ÄÅÈõÜ‰∏≠„Åó„Å´„Åè„ÅÑ',
        quiz4opt2: 'ÊÄù„ÅÑÂá∫„ÅØË≤ØÈáë„Çà„ÇäÂ§ßÂàá',
        quiz4opt3: '‰∫∫„ÇíÂä©„Åë„Çã„Å®Â¨â„Åó„ÅÑ',
        quiz4opt4: 'ÊòéÁ¢∫„Å™Ë®àÁîª„ÅåÂ•Ω„Åç',
        thisIsYou: '‚ú® „Åì„Çå„Åå„ÅÇ„Å™„Åü„Åß„ÅôÔºÅ',
        dreamerDesc: 'Áæé„Åó„ÅÑÂ§¢„Å®Ë±ä„Åã„Å™ÊÉ≥ÂÉèÂäõ„ÇíÊåÅ„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇMoni„ÅØÊúÄ„ÇÇÂ§ßÂàá„Å™„Åì„Å®„Å´ÈõÜ‰∏≠„Åô„Çã„ÅäÊâã‰ºù„ÅÑ„Çí„Åó„Åæ„Åô„ÄÇ',
        experiencerDesc: '‰∫∫Áîü„ÅØ‰ΩìÈ®ì„Åô„Çã„Åü„ÇÅ„Å´„ÅÇ„Çã„Å®‰ø°„Åò„Å¶„ÅÑ„Åæ„Åô„ÄÇMoni„ÅØ‰ªä„ÇíÊ•Ω„Åó„Åø„Å™„Åå„ÇâÂ∞ÜÊù•„ÇÇÁ¢∫‰øù„Åô„Çã„Éê„É©„É≥„Çπ„Çí„ÅäÊâã‰ºù„ÅÑ„Åó„Åæ„Åô„ÄÇ',
        giverDesc: '„ÅÇ„Å™„Åü„ÅÆÂñú„Å≥„ÅØ‰ªñ„ÅÆ‰∫∫„Å´Âñú„Å≥„Çí„ÇÇ„Åü„Çâ„Åô„Åì„Å®„ÄÇMoni„ÅØËá™ÂàÜËá™Ë∫´„Å∏„ÅÆÊäïË≥á„ÇÇÂøò„Çå„Å™„ÅÑ„Çà„ÅÜ„É™„Éû„Ç§„É≥„Éâ„Åó„Åæ„Åô„ÄÇ',
        plannerDesc: 'Á¥†Êô¥„Çâ„Åó„ÅÑÈáëËûçË¶èÂæã„ÇíÊåÅ„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇMoni„ÅØ„Åï„Çâ„Å´ÊúÄÈÅ©Âåñ„Åó„ÄÅÂ∞è„Åï„Å™ÂãùÂà©„ÇíÁ•ù„ÅÜ„ÅäÊâã‰ºù„ÅÑ„Çí„Åó„Åæ„Åô„ÄÇ',
        // Archetype quotes
        dreamerQuote1: 'Â§¢„ÅØ‰∏ÄÊ≠©„Åö„Å§ÁèæÂÆü„Å´„Å™„Çã ‚ú®',
        dreamerQuote2: '„ÅÇ„Å™„Åü„ÅÆ„Éì„Ç∏„Éß„É≥„ÅåÁæÖÈáùÁõ§ üåü',
        dreamerQuote3: 'Â§ß„Åç„Å™„Åì„Å®„ÅØÂ∞è„Åï„Å™Ë≤ØÈáë„Åã„ÇâÂßã„Åæ„Çã üí´',
        experiencerQuote1: '‰∫∫Áîü„ÅØÊäïË≥á„Å´ÂÄ§„Åô„ÇãÁû¨Èñì„Åß„Åß„Åç„Å¶„ÅÑ„Çã üé¢',
        experiencerQuote2: 'ÂÜíÈô∫„ÅåÂæÖ„Å£„Å¶„ÅÑ„Çã„ÄÅÊ∫ñÂÇô‰∏áÁ´ØÔºÅüåà',
        experiencerQuote3: 'Ë≤ØÈáë„Åô„Çã„Åü„Å≥„Å´Êñ∞„Åó„ÅÑ‰ΩìÈ®ì„ÅåËøë„Å•„Åè üéØ',
        giverQuote1: 'ÂØõÂ§ß„Åï„ÅØËá™Â∑±„Ç±„Ç¢„Åã„ÇâÂßã„Åæ„Çã üíù',
        giverQuote2: '„Åæ„ÅöËá™ÂàÜ„ÅÆÈÖ∏Á¥†„Éû„Çπ„ÇØ„Çí ü§ù',
        giverQuote3: 'ÁµåÊ∏àÁöÑÂÅ•Â∫∑„Åß„ÇÇ„Å£„Å®‰∏é„Åà„Çâ„Çå„Çã üíï',
        plannerQuote1: '„Åô„Åπ„Å¶„ÅÆË©≥Á¥∞„ÅåÈáçË¶Å„ÄÅÈ†ÜË™ø„Åß„Åô üìã',
        plannerQuote2: 'Ë®àÁîªÁöÑ„Å™ÈÄ≤Ê≠©„ÅåÊàêÂäü„Å´„Å§„Å™„Åå„Çã üéØ',
        plannerQuote3: 'Ë®àÁîª„ÅØÁæé„Åó„ÅèÊ©üËÉΩ„Åó„Å¶„ÅÑ„Åæ„Åô ‚úÖ',
        // Celebration translations
        firstExpenseTitle: 'ÊúÄÂàù„ÅÆÊîØÂá∫ÔºÅ',
        firstExpenseDesc: 'È†ÜË™ø„Åß„ÅôÔºÅ',
        tenExpensesTitle: 'Êï¥ÁêÜ‰∏äÊâãÔºÅ',
        tenExpensesDesc: '10‰ª∂„ÅÆÊîØÂá∫„ÇíË®òÈå≤ÔºÅ',
        goalCompleteDesc: 'Á¥†Êô¥„Çâ„Åó„ÅÑÈÅîÊàêÔºÅ',
        keepGoingDesc: '„Åù„ÅÆË™øÂ≠êÔºÅ',
        toward: '„Å´Âêë„Åë„Å¶',
        dayStreak: 'Êó•ÈÄ£Á∂ö',
        streakDesc: 'Áµ∂Â•ΩË™ø„Åß„ÅôÔºÅ',
        days: 'Êó•',
        // Moni mood messages
        moniCelebrating: '„ÇÑ„Å£„Åü„Å≠ÔºÅ„Åß„Åç„Åæ„Åó„ÅüÔºÅ',
        moniHappy: 'Á¥†Êô¥„Çâ„Åó„ÅÑ‰∏ÄÊó•ÔºÅ',
        moniExcited: 'Áµ∂Â•ΩË™ø„Åß„Åô„Å≠ÔºÅ',
        moniProud: '„Åì„ÅÆÈÄ≤Ê≠©„ÇíË¶ã„Å¶ÔºÅ',
        moniEncouraging: '‰ªäÊó•„ÅØÊñ∞„Åó„ÅÑ„Çπ„Çø„Éº„ÉàÔºÅ',
        moniCalm: '„Éê„É©„É≥„ÇπËâØ„ÅèÂÆâÂÆö„ÄÇ',
        moniFriendly: '„Åì„Çì„Å´„Å°„ÅØ„ÄÅÂèãÈÅîÔºÅ',
        moniSupportive: 'ÊòéÊó•„ÅØÊñ∞„Åó„ÅÑÊó•ÔºÅ',
        dreamGoal: 'Â§¢„ÅÆÁõÆÊ®ô',
        dreamerGoalQuote1: 'Â§¢„ÅåÂΩ¢„Å´„Å™„Å£„Å¶„Åç„Å¶„ÅÑ„Åæ„Åô ‚ú®',
        dreamerGoalQuote2: '‰∏ÄÊ≠©„Åö„Å§Ëøë„Å•„ÅÑ„Å¶„ÅÑ„Åæ„Åô üåü',
        bringDreamCloser: 'Â§¢„ÇíËøë„Å•„Åë„Çã',
        dreamAchieved: 'Â§¢„ÅåÂè∂„ÅÑ„Åæ„Åó„Åü',
        breakdown: 'ÂÜÖË®≥',
        week: 'ÈÄ±',
        day: 'Êó•',
        monthly: 'ÊúàÈ°ç',
        giverTripImpact: 'Â§ßÂàá„Å™‰∫∫„Å®„ÅÆÊÄù„ÅÑÂá∫„Çí‰Ωú„Çã',
        giverEmergencyImpact: 'Ë™∞„Åã„ÅåÂøÖË¶Å„Å™ÊôÇ„Å´„Åù„Å∞„Å´„ÅÑ„Çã',
        giverDefaultImpact: 'ÂØõÂ§ß„Å™ÂøÉ„ÇíÊîØ„Åà„Çã',
        yourProgress: 'ÈÄ≤Êçó',
        toGo: 'ÊÆã„Çä',
        addToGiving: 'ÊÄù„ÅÑ„ÇÑ„ÇäÂü∫Èáë„Å´ËøΩÂä†',
        readyToGive: '‰∏é„Åà„ÇãÊ∫ñÂÇôÂÆå‰∫Ü',
        adventure: '„Ç¢„Éâ„Éô„É≥„ÉÅ„É£„Éº',
        fundedSoFar: 'Á©çÁ´ãÊ∏à',
        monthsToGo: '„É∂ÊúàÂæå',
        fundAdventure: 'ÂÜíÈô∫„Å´ÊäïË≥á',
        adventureReady: 'ÂÜíÈô∫Ê∫ñÂÇôÂÆå‰∫Ü',
        incomeTitle: 'ÊúàÂèé',
        incomeDesc: 'Moni„ÅåÊØéÊúàÂø´ÈÅ©„Å´‰Ωø„Åà„ÇãÈáëÈ°ç„ÇíË®àÁÆó„Åß„Åç„Çã„Çà„ÅÜ„Å´„Åó„Åæ„Åô„ÄÇ',
        privacyNote: 'ÊÉÖÂ†±„ÅØÂÆâÂÖ®„Åß„ÄÅ„Éá„Éê„Ç§„Çπ„Å´„ÅÆ„Åø‰øùÂ≠ò„Åï„Çå„Åæ„Åô',
        smartInputHint: 'üí° Ëá™ÁÑ∂„Å´ÂÖ•Âäõ: 15k, 1.5‰∏á, 100‰∏á...',
        fixedTitle: 'ÊØéÊúà„ÅÆÂõ∫ÂÆöË≤ª',
        fixedDesc: 'ÂÆöÊúüÁöÑ„Å™ÊîØÊâï„ÅÑ„ÄÇÈáëÈ°ç„ÇíÂÖ•Âäõ„Åô„Çã„Åã„ÄÅË©≤ÂΩì„Åó„Å™„ÅÑÂ†¥Âêà„ÅØÂâäÈô§„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ',
        addOther: '‰ªñ„ÇíËøΩÂä†',
        totalFixed: 'Âõ∫ÂÆöË≤ªÂêàË®à',
        addFixedTitle: '‚ûï Âõ∫ÂÆöË≤ª„ÇíËøΩÂä†',
        expenseName: 'Ë≤ªÁî®Âêç',
        expenseNamePlaceholder: '‰æãÔºö„Ç∏„É†„ÄÅNetflix„ÄÅÂ≠¶Ë≤ª...',
        amountPerMonth: 'ÊúàÈ°ç',
        add: 'ËøΩÂä†',
        goalsTitle: '‰Ωï„ÇíÁõÆÊåá„Åó„Å¶„ÅÑ„Åæ„Åô„ÅãÔºü',
        goalsDesc: '1-3ÂÄã„ÅÆÁõÆÊ®ô„ÇíÈÅ∏Êäû„ÄÇMoni„ÅåÈÄ≤Êçó„ÇíËøΩË∑°„Åó„Åæ„Åô„ÄÇ',
        createOwn: 'Ëá™ÂàÜ„Åß‰ΩúÊàê',
        createGoalTitle: '‚ú® Êñ∞„Åó„ÅÑÁõÆÊ®ô„Çí‰ΩúÊàê',
        goalName: 'ÁõÆÊ®ôÂêç',
        goalNamePlaceholder: '‰æãÔºöÊñ∞„Åó„ÅÑiPhone„ÄÅË¨õÂ∫ß„ÄÅËá™Ëª¢Ëªä...',
        amountNeeded: 'ÂøÖË¶ÅÈáëÈ°ç',
        addGoal: 'ÁõÆÊ®ô„ÇíËøΩÂä†',
        allocationTitle: 'ÊØéÊúà„ÅÑ„Åè„ÇâË≤Ø„ÇÅ„ÇãÔºü',
        allocationDesc: 'ÂêÑÁõÆÊ®ô„Å´ÊØéÊúà„ÅÑ„Åè„ÇâË≤Ø„ÇÅ„Çã„ÅãÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ',
        target: 'ÁõÆÊ®ô',
        perMonth: '/ Êúà',
        reachGoalIn: 'ÁõÆÊ®ôÈÅîÊàê„Åæ„Åß',
        months: '„É∂Êúà',
        income: 'ÂèéÂÖ•',
        fixedExpenses: 'Âõ∫ÂÆöË≤ª',
        savingForGoals: 'ÁõÆÊ®ôË≤ØÈáë',
        spendComfortably: 'Ëá™Áî±„Å´‰Ωø„Åà„Çã',
        finish: 'ÂÆå‰∫Ü ‚Üí',
        hey: '„ÇÑ„ÅÇ„ÄÅ',
        spendableLabel: '‰Ωø„Åà„ÇãÈáëÈ°ç',
        daysLeft: 'Êó•ÊÆã„Çä',
        remaining: 'ÊÆã„Çä',
        goalTarget: 'ÁõÆÊ®ô',
        actual: 'ÂÆüÈöõ',
        today: '‰ªäÊó•',
        yesterday: 'Êò®Êó•',
        thisMonth: '‰ªäÊúà',
        seeAll: '„Åô„Åπ„Å¶Ë¶ã„Çã',
        askPlaceholder: '‰Ωï„ÇíË≤∑„ÅÑ„Åü„ÅÑÔºü',
        askHint: '‰Ωø„ÅÜÂâç„Å´Moni„Å´ËÅû„ÅÑ„Å¶',
        addExpenseTitle: '‚úèÔ∏è ÊîØÂá∫„ÇíËøΩÂä†',
        expenseTextPlaceholder: '‰æãÔºö„Ç≥„Éº„Éí„Éº 500ÂÜÜ, „Çø„ÇØ„Ç∑„Éº 2000ÂÜÜ...',
        expenseTextHint: 'üí° ÂêçÂâç+ÈáëÈ°ç„ÇíÂÖ•Âäõ„ÄÅAI„ÅåËá™ÂãïÂàÜÈ°û',
        name: 'ÂêçÂâç',
        namePlaceholderExpense: '‰æãÔºö„Ç≥„Éº„Éí„Éº„ÄÅ„Çø„ÇØ„Ç∑„Éº„ÄÅ„É©„É≥„ÉÅ...',
        amount: 'ÈáëÈ°ç',
        addExpense: 'ÊîØÂá∫„ÇíËøΩÂä†',
        expense: 'ÊîØÂá∫',
        enterValidAmount: 'ÊúâÂäπ„Å™ÈáëÈ°ç„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ',
        viewAll: '„Ç´„ÉÜ„Ç¥„É™„ÇíË¶ã„Çã',
        hideCategories: '„Ç´„ÉÜ„Ç¥„É™„ÇíÈö†„Åô',
        noExpensesYet: '‰ªäÊó•„ÅØ„Åæ„Å†ÊîØÂá∫„Åå„ÅÇ„Çä„Åæ„Åõ„Çì',
        noGoalsYet: '„Åæ„Å†ÁõÆÊ®ô„Åå„ÅÇ„Çä„Åæ„Åõ„Çì',
        goalsWillAppear: 'ÁõÆÊ®ô„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Åæ„Åô',
        deposit: 'ÂÖ•Èáë',
        goalAchieved: 'ÁõÆÊ®ôÈÅîÊàê',
        enterDepositAmount: 'ÂÖ•ÈáëÈ°ç„ÇíÂÖ•Âäõ',
        enterWithdrawAmount: 'Âá∫ÈáëÈ°ç„ÇíÂÖ•Âäõ',
        remaining: 'ÊÆã„Çä',
        available: 'Âà©Áî®ÂèØËÉΩ',
        setAllocation: 'ÊúàÈñìÁõÆÊ®ô„ÇíË®≠ÂÆö',
        expensesWillAppear: 'ÊîØÂá∫„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Åæ„Åô',
        saved: 'Ë≤ØËìÑÊ∏à„Åø',
        total: 'ÂêàË®à',
        afterPurchase: 'Ë≥ºÂÖ•ÂæåÔºö',
        leftRemaining: 'ÊÆã„Çä',
        bought: 'Ë≥ºÂÖ•Ê∏à„Åø ‚úì',
        cancel: '„Ç≠„É£„É≥„Çª„É´',
        close: 'Èñâ„Åò„Çã',
        home: '„Éõ„Éº„É†',
        goals: 'ÁõÆÊ®ô',
        history: 'Â±•Ê≠¥',
        rent: 'ÂÆ∂Ë≥É',
        electric: 'ÈõªÊ∞ó',
        water: 'Ê∞¥ÈÅì',
        internet: '„Ç§„É≥„Çø„Éº„Éç„ÉÉ„Éà',
        phone: 'ÈõªË©±',
        insurance: '‰øùÈô∫',
        laptop: '„Éé„Éº„ÉàPC',
        phoneGoal: '„Çπ„Éû„Éõ',
        trip: 'ÊóÖË°å',
        bike: '„Éê„Ç§„ÇØ',
        emergency: 'Á∑äÊÄ•Ë≥áÈáë',
        wedding: 'ÁµêÂ©öÂºè',
        notUnderstand: 'Moni„ÅØ„Çà„ÅèÂàÜ„Åã„Çä„Åæ„Åõ„Çì„ÄÇ„Äå„Ç≥„Éº„Éí„Éº 50k„Äç„ÇÑ„Äå„Çø„ÇØ„Ç∑„Éº 85k„Äç„Å®ÂÖ•Âäõ„Åó„Å¶„Åø„Å¶„Åè„Å†„Åï„ÅÑÔºÅüòä',
        buyIt: 'Ë≤∑„Å£„Å°„ÇÉ„Åä„ÅÜÔºÅ',
        okToBuy: 'Â§ß‰∏àÂ§´ÔºÅ',
        tooMuch: '„Å°„Çá„Å£„Å®Â§ö„ÅÑ„Åã„ÇÇÔºÅ',
        onlyPercent: '„Åü„Å£„Åü',
        budget: '‰∫àÁÆó',
        comfortable: 'ÂïèÈ°å„Å™„ÅóÔºÅ',
        considerIt: 'ËÄÉ„Åà„Å¶„Åø„Å¶„ÄÇ',
        areYouSure: 'Êú¨ÂΩì„Å´Ôºü',
        percentOfBudget: 'ÊÆã„Çä‰∫àÁÆó„ÅÆ„ÄÇ',
        // B1: Permission Engine
        mayAffectGoals: 'ÁõÆÊ®ô„Å´ÂΩ±Èüø„Åô„Çã„Åã„ÇÇ',
        noGoalImpact: 'ÁõÆÊ®ô„Å´„ÅØÂΩ±Èüø„Å™„Åó',
        // B2: Future Self Visualization
        addFutureSelfNote: 'Êú™Êù•„ÅÆËá™ÂàÜ„Å´„Å§„ÅÑ„Å¶„É°„É¢„ÇíËøΩÂä†...',
        futureSelfPrompt: '„Å™„Åú„Åì„Çå„ÅåÊ¨≤„Åó„ÅÑ„ÅÆÔºü„Åì„ÅÆÁõÆÊ®ô„ÇíÈÅîÊàê„Åó„ÅüÊú™Êù•„ÅÆËá™ÂàÜ„ÇíÊÉ≥ÂÉè„Åó„Å¶Ôºö',
        // B3: Analytics
        analytics: 'Áµ±Ë®à',
        relationships: '‰∫∫ÈñìÈñ¢‰øÇ',
        selfCare: '„Çª„É´„Éï„Ç±„Ç¢',
        necessities: 'ÂøÖÈúÄÂìÅ',
        thisMonthSpending: '‰ªäÊúà„ÅÆÊîØÂá∫',
        meaningAttached: 'ÊîØÂá∫„ÅÆÊÑèÂë≥',
        relationshipsFocus: '„Å§„Å™„Åå„Çä„ÇíÁØâ„Åè',
        selfCareFocus: 'Ëá™ÂàÜ„Å∏„ÅÆÊäïË≥á',
        necessitiesFocus: 'ÂøÖË¶ÅÁµåË≤ª',
        noDataYet: '„Åæ„Å†ÊîØÂá∫„Éá„Éº„Çø„Å™„Åó',
        // B4: Peace of Mind Indicator
        paceOkay: 'È†ÜË™ø',
        paceGood: '„ÅÑ„ÅÑÊÑü„Åò',
        paceWatch: 'Ê≥®ÊÑè',
        onPace: '„Éö„Éº„ÇπÈÄö„Çä',
        slowDown: '„Å°„Çá„Å£„Å®Êäë„Åà„Å¶',
        // B5: Settings
        settings: 'Ë®≠ÂÆö',
        edit: 'Á∑®ÈõÜ',
        redo: '„ÇÑ„ÇäÁõ¥„Åó',
        reset: '„É™„Çª„ÉÉ„Éà',
        month: 'Êúà',
        enterIncome: 'ÊúàÂèé„ÇíÂÖ•ÂäõÔºö',
        goalsAllocation: 'ÁõÆÊ®ô„Å®ÈÖçÂàÜ',
        monthlyAllocation: 'ÊúàÈ°çÈÖçÂàÜ',
        personality: 'ÊÄßÊ†º',
        languageLabel: 'Ë®ÄË™û',
        noFixedExpenses: 'Âõ∫ÂÆöË≤ª„Å™„Åó',
        noGoals: 'ÁõÆÊ®ôÊú™Ë®≠ÂÆö',
        resetData: '„Éá„Éº„Çø„É™„Çª„ÉÉ„Éà',
        resetWarning: 'ÊúÄÂàù„Åã„Çâ„ÇÑ„ÇäÁõ¥„Åô',
        redoQuizConfirm: 'ÊÄßÊ†º„ÇØ„Ç§„Ç∫„Çí„ÇÑ„ÇäÁõ¥„Åó„Åæ„Åô„ÅãÔºüÁèæÂú®„ÅÆÁµêÊûú„ÅØÁΩÆ„ÅçÊèõ„Åà„Çâ„Çå„Åæ„Åô„ÄÇ',
        selectLanguage: 'Ë®ÄË™û„ÇíÈÅ∏Êäû',
        enterNumber: 'Êï∞Â≠ó„ÇíÂÖ•Âäõ (1-7)',
        resetConfirm: 'Êú¨ÂΩì„Å´„É™„Çª„ÉÉ„Éà„Åó„Åæ„Åô„ÅãÔºüÂÖ®„Éá„Éº„Çø„ÅåÂâäÈô§„Åï„Çå„Åæ„Åô„ÄÇ',
        resetConfirm2: 'ÂÖÉ„Å´Êàª„Åõ„Åæ„Åõ„Çì„ÄÇÊú¨ÂΩì„Å´„É™„Çª„ÉÉ„ÉàÔºü',
      },
      ko: {
        welcome: 'MoniÏóê Ïò§Ïã† Í≤ÉÏùÑ ÌôòÏòÅÌï©ÎãàÎã§!',
        tagline: 'ÎãπÏã†ÎßåÏùò Î∞©ÏãùÏúºÎ°ú ÎèàÏùÑ Í¥ÄÎ¶¨ÌïòÏÑ∏Ïöî.<br>ÌåêÎã® ÏóÜÏù¥. Ïò§ÏßÅ ÏßÄÏõêÎßå.',
        start: 'ÏãúÏûëÌïòÍ∏∞ ‚Üí',
        welcomeTitle: 'MoniÏóê Ïò§Ïã† Í≤ÉÏùÑ ÌôòÏòÅÌï©ÎãàÎã§!',
        welcomeDesc: 'MoniÎäî ÏùòÎèÑÏ†ÅÏù∏ ÏÜåÎπÑÎ•º ÎèÑÏôÄÎìúÎ¶ΩÎãàÎã§ ‚Äî Î™®Îì† ÎèàÏùÑ Ï∂îÏ†ÅÌïòÎäî Í≤ÉÏù¥ ÏïÑÎãàÎùº, Î™©ÌëúÎ•º Ìñ•Ìïú Ïó¨Ï†ïÏóêÏÑú Ïñ¥ÎîîÏóê ÏûàÎäîÏßÄ ÏïåÎ†§ÎìúÎ¶ΩÎãàÎã§.',
        nameLabel: 'Ïù¥Î¶ÑÏù¥ Î≠êÏòàÏöî?',
        namePlaceholder: 'Ïù¥Î¶ÑÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî...',
        continue: 'Í≥ÑÏÜç ‚Üí',
        quizTitle: '4Í∞ÄÏßÄ Îèà ÏÑ±Í≤©',
        quizDesc: 'ÎãπÏã†ÏùÄ Ïñ¥Îñ§ Ïú†ÌòïÏù∏Í∞ÄÏöî? ÌÄ¥Ï¶àÎ°ú ÏïåÏïÑÎ≥¥ÏÑ∏Ïöî!',
        theDreamer: 'ÎìúÎ¶¨Î®∏',
        dreamerTag: 'ÍøàÍæ∏Îäî ÏÇ¨Îûå',
        theExperiencer: 'ÏùµÏä§ÌîºÎ¶¨Ïñ∏ÏÑú',
        experiencerTag: 'Í≤ΩÌóòÏùÑ Ï∂îÍµ¨ÌïòÎäî ÏÇ¨Îûå',
        theGiver: 'Í∏∞Î≤Ñ',
        giverTag: 'Î≤†Ìë∏Îäî ÏÇ¨Îûå',
        thePlanner: 'ÌîåÎûòÎÑà',
        plannerTag: 'Í≥ÑÌöçÌïòÎäî ÏÇ¨Îûå',
        quizAccompany: 'üéØ MoniÍ∞Ä ÎãπÏã†Ïùò Ïä§ÌÉÄÏùºÏóê ÎßûÏ∂∞ ÎèÑÏôÄÎìúÎ¶ΩÎãàÎã§',
        startQuiz: 'ÌÄ¥Ï¶à ÏãúÏûë ¬∑ 4Î¨∏Ìï≠ ‚Üí',
        skip: 'Í±¥ÎÑàÎõ∞Í∏∞',
        quiz1: 'ÏòàÏÉÅÏπò Î™ªÌïú Î≥¥ÎÑàÏä§Î•º Î∞õÏúºÎ©¥, Î≥¥ÌÜµ...',
        quiz1opt1: 'Íµ¨Ï≤¥Ï†ÅÏù∏ Í≥ÑÌöçÏùÑ ÏÑ∏Ïö¥Îã§',
        quiz1opt2: 'Î∞îÎ°ú ÏûêÏã†ÏóêÍ≤å Î≥¥ÏÉÅÌïúÎã§',
        quiz1opt3: 'ÏÇ¨ÎûëÌïòÎäî ÏÇ¨Îûå ÏÑ†Î¨ºÏùÑ ÏÉùÍ∞ÅÌïúÎã§',
        quiz1opt4: 'Í∞ÄÎä•ÏÑ±ÏùÑ ÍøàÍæºÎã§',
        quiz2: 'Ïñ∏Ï†ú Í∞ÄÏû• Í≥ºÏÜåÎπÑÌïòÎÇòÏöî?',
        quiz2opt1: 'ÏπúÍµ¨Îì§Í≥º ÎÜÄ Îïå',
        quiz2opt2: 'ÎàÑÍµ∞Í∞Ä ÎèÑÏõÄÏù¥ ÌïÑÏöîÌï† Îïå',
        quiz2opt3: 'ÏÉàÎ°úÏö¥ Í≤ÉÏóê ÎÅåÎ¶¥ Îïå',
        quiz2opt4: 'Í±∞Ïùò Í≥ºÏÜåÎπÑ Ïïà Ìï®',
        quiz3: 'ÎèàÏóê ÎåÄÌï¥ ÏÉùÍ∞ÅÌï† Îïå...',
        quiz3opt1: 'ÎØ∏ÎûòÏóê ÏÑ§Î†åÎã§',
        quiz3opt2: 'Ìé∏ÏïàÌïòÍ≤å, ÌòÑÏû¨Î•º ÏÇ∞Îã§',
        quiz3opt3: 'ÏÇ¨ÎûëÌïòÎäî ÏÇ¨ÎûåÏù¥ Í±±Ï†ïÎêúÎã§',
        quiz3opt4: 'ÌÜµÏ†úÌïòÎäî ÎäêÎÇå',
        quiz4: 'ÎãπÏã†ÏùÑ Í∞ÄÏû• Ïûò ÏÑ§Î™ÖÌïòÎäî Í≤ÉÏùÄ?',
        quiz4opt1: 'ÍøàÏù¥ ÎßéÍ≥†, ÏßëÏ§ëÏù¥ Ïñ¥Î†µÎã§',
        quiz4opt2: 'Ï∂îÏñµÏù¥ Ï†ÄÏ∂ïÎ≥¥Îã§ Ï§ëÏöîÌïòÎã§',
        quiz4opt3: 'Îã§Î•∏ ÏÇ¨ÎûåÏùÑ ÎèÑÏö∞Î©¥ ÌñâÎ≥µÌïòÎã§',
        quiz4opt4: 'Î™ÖÌôïÌïú Í≥ÑÌöçÏùÑ Ï¢ãÏïÑÌïúÎã§',
        thisIsYou: '‚ú® Ïù¥Í≤ÉÏù¥ ÎãπÏã†ÏûÖÎãàÎã§!',
        dreamerDesc: 'ÏïÑÎ¶ÑÎã§Ïö¥ ÍøàÍ≥º ÌíçÎ∂ÄÌïú ÏÉÅÏÉÅÎ†•ÏùÑ Í∞ÄÏßÄÍ≥† ÏûàÏäµÎãàÎã§. MoniÍ∞Ä Í∞ÄÏû• Ï§ëÏöîÌïú Í≤ÉÏóê ÏßëÏ§ëÌïòÎèÑÎ°ù ÎèÑÏôÄÎìúÎ¶ΩÎãàÎã§.',
        experiencerDesc: 'Ïù∏ÏÉùÏùÄ Í≤ΩÌóòÌïòÍ∏∞ ÏúÑÌïú Í≤ÉÏù¥ÎùºÍ≥† ÎØøÏäµÎãàÎã§. MoniÍ∞Ä ÌòÑÏû¨Î•º Ï¶êÍ∏∞Î©¥ÏÑú ÎØ∏ÎûòÎèÑ ÌôïÎ≥¥ÌïòÎäî Í∑†ÌòïÏùÑ ÎèÑÏôÄÎìúÎ¶ΩÎãàÎã§.',
        giverDesc: 'ÎãπÏã†Ïùò Í∏∞ÏÅ®ÏùÄ Îã§Î•∏ ÏÇ¨ÎûåÏóêÍ≤å Í∏∞ÏÅ®ÏùÑ Ï£ºÎäî Í≤ÉÏûÖÎãàÎã§. MoniÍ∞Ä ÏûêÏã†ÏóêÍ≤åÎèÑ Ìà¨ÏûêÌïòÎùºÍ≥† ÏïåÎ†§ÎìúÎ¶ΩÎãàÎã§.',
        plannerDesc: 'ÌõåÎ•≠Ìïú Ïû¨Ï†ï Í∑úÏú®ÏùÑ Í∞ÄÏßÄÍ≥† ÏûàÏäµÎãàÎã§. MoniÍ∞Ä Îçî ÏµúÏ†ÅÌôîÌïòÍ≥† ÏûëÏùÄ ÏäπÎ¶¨Î•º Ï∂ïÌïòÌïòÎèÑÎ°ù ÎèÑÏôÄÎìúÎ¶ΩÎãàÎã§.',
        // Archetype quotes
        dreamerQuote1: 'ÍøàÏùÄ Ìïú Í±∏ÏùåÏî© ÌòÑÏã§Ïù¥ Îê©ÎãàÎã§ ‚ú®',
        dreamerQuote2: 'ÎãπÏã†Ïùò ÎπÑÏ†ÑÏù¥ ÎÇòÏπ®Î∞òÏûÖÎãàÎã§ üåü',
        dreamerQuote3: 'ÌÅ∞ ÏùºÏùÄ ÏûëÏùÄ Ï†ÄÏ∂ïÏóêÏÑú ÏãúÏûëÎê©ÎãàÎã§ üí´',
        experiencerQuote1: 'Ïù∏ÏÉùÏùÄ Ìà¨ÏûêÌï† Í∞ÄÏπòÍ∞Ä ÏûàÎäî ÏàúÍ∞ÑÎì§Î°ú Ïù¥Î£®Ïñ¥Ï†∏ ÏûàÏäµÎãàÎã§ üé¢',
        experiencerQuote2: 'Î™®ÌóòÏù¥ Í∏∞Îã§Î¶¨Í≥† ÏûàÏñ¥Ïöî, Ïûò Ï§ÄÎπÑÌïòÍ≥† ÏûàÏñ¥Ïöî! üåà',
        experiencerQuote3: 'Ï†ÄÏ∂ïÌï† ÎïåÎßàÎã§ ÏÉàÎ°úÏö¥ Í≤ΩÌóòÏù¥ Í∞ÄÍπåÏõåÏßëÎãàÎã§ üéØ',
        giverQuote1: 'Í¥ÄÎåÄÌï®ÏùÄ ÏûêÍ∏∞ Í¥ÄÎ¶¨ÏóêÏÑú ÏãúÏûëÎê©ÎãàÎã§ üíù',
        giverQuote2: 'Î®ºÏ†Ä ÏûêÏã†Ïùò ÏÇ∞ÏÜåÎßàÏä§ÌÅ¨Î•º Ïì∞ÏÑ∏Ïöî ü§ù',
        giverQuote3: 'Ïû¨Ï†ï Í±¥Í∞ïÏù¥ Îçî ÎßéÏù¥ Ï§Ñ Ïàò ÏûàÍ≤å Ìï¥Ï§çÎãàÎã§ üíï',
        plannerQuote1: 'Î™®Îì† ÏÑ∏Î∂Ä ÏÇ¨Ìï≠Ïù¥ Ï§ëÏöîÌï¥Ïöî, ÏàúÏ°∞Î°≠ÏäµÎãàÎã§ üìã',
        plannerQuote2: 'Ï≤¥Í≥ÑÏ†ÅÏù∏ ÏßÑÏ†ÑÏù¥ ÏÑ±Í≥µÏúºÎ°ú Ïù¥ÎÅïÎãàÎã§ üéØ',
        plannerQuote3: 'Í≥ÑÌöçÏù¥ ÏïÑÎ¶ÑÎãµÍ≤å ÏûëÎèôÌïòÍ≥† ÏûàÏñ¥Ïöî ‚úÖ',
        // Celebration translations
        firstExpenseTitle: 'Ï≤´ Î≤àÏß∏ ÏßÄÏ∂ú!',
        firstExpenseDesc: 'Ïûò ÌïòÍ≥† ÏûàÏñ¥Ïöî!',
        tenExpensesTitle: 'Ï†êÏ†ê Ï†ïÎ¶¨ÎèºÏöî!',
        tenExpensesDesc: '10Í∞úÏùò ÏßÄÏ∂ú Í∏∞Î°ù!',
        goalCompleteDesc: 'ÎåÄÎã®Ìïú ÏÑ±Ï∑®!',
        keepGoingDesc: 'Í≥ÑÏÜç ÌôîÏù¥ÌåÖ!',
        toward: 'Ìñ•Ìï¥',
        dayStreak: 'Ïùº Ïó∞ÏÜç',
        streakDesc: 'ÎåÄÎã®Ìï¥Ïöî!',
        days: 'Ïùº',
        // Moni mood messages
        moniCelebrating: 'ÏôÄ! Ìï¥ÎÉàÏñ¥Ïöî!',
        moniHappy: 'Ï¢ãÏùÄ ÌïòÎ£®ÏòàÏöî!',
        moniExcited: 'ÎåÄÎã®Ìï¥Ïöî!',
        moniProud: 'Ïù¥ ÏßÑÏ†ÑÏùÑ Î≥¥ÏÑ∏Ïöî!',
        moniEncouraging: 'Ïò§Îäò ÏÉàÎ°úÏö¥ ÏãúÏûë!',
        moniCalm: 'Í∑†Ìòï Ïû°Ìûå ÌïòÎ£®.',
        moniFriendly: 'ÏïàÎÖïÌïòÏÑ∏Ïöî, ÏπúÍµ¨!',
        moniSupportive: 'ÎÇ¥ÏùºÏùÄ ÏÉàÎ°úÏö¥ ÎÇ†!',
        dreamGoal: 'ÍøàÏùò Î™©Ìëú',
        dreamerGoalQuote1: 'ÍøàÏù¥ Î™®ÏñëÏùÑ Í∞ñÏ∂îÍ≥† ÏûàÏñ¥Ïöî ‚ú®',
        dreamerGoalQuote2: 'Ìïú Í±∏ÏùåÏî© Í∞ÄÍπåÏõåÏßÄÍ≥† ÏûàÏñ¥Ïöî üåü',
        bringDreamCloser: 'ÍøàÏóê Í∞ÄÍπåÏù¥',
        dreamAchieved: 'Íøà Îã¨ÏÑ±',
        breakdown: 'ÎÇ¥Ïó≠',
        week: 'Ï£º',
        day: 'Ïùº',
        monthly: 'Ïõî',
        giverTripImpact: 'ÏÇ¨ÎûëÌïòÎäî ÏÇ¨ÎûåÍ≥º Ï∂îÏñµ ÎßåÎì§Í∏∞',
        giverEmergencyImpact: 'ÎàÑÍµ∞Í∞Ä ÌïÑÏöîÌï† Îïå Ìï®ÍªòÌïòÍ∏∞',
        giverDefaultImpact: 'Í¥ÄÎåÄÌïú ÎßàÏùåÏùÑ ÌéºÏπòÍ∏∞',
        yourProgress: 'ÏßÑÌñâ ÏÉÅÌô©',
        toGo: 'ÎÇ®Ïùå',
        addToGiving: 'ÎÇòÎàî Í∏∞Í∏àÏóê Ï∂îÍ∞Ä',
        readyToGive: 'ÎÇòÎàå Ï§ÄÎπÑ ÏôÑÎ£å',
        adventure: 'Î™®Ìóò',
        fundedSoFar: 'Î™®Í∏à',
        monthsToGo: 'Í∞úÏõî ÎÇ®Ïùå',
        fundAdventure: 'Ïù¥ Î™®ÌóòÏóê Ìà¨Ïûê',
        adventureReady: 'Î™®Ìóò Ï§ÄÎπÑ ÏôÑÎ£å',
        incomeTitle: 'Ïõî ÏàòÏûÖ',
        incomeDesc: 'MoniÍ∞Ä Îß§Ïõî Ìé∏ÏïàÌïòÍ≤å Ïì∏ Ïàò ÏûàÎäî Í∏àÏï°ÏùÑ Í≥ÑÏÇ∞Ìï† Ïàò ÏûàÍ≤å Ìï¥Ï§çÎãàÎã§.',
        privacyNote: 'Ï†ïÎ≥¥Îäî ÏïàÏ†ÑÌïòÎ©∞ Í∏∞Í∏∞ÏóêÎßå Ï†ÄÏû•Îê©ÎãàÎã§',
        smartInputHint: 'üí° ÏûêÏó∞Ïä§ÎüΩÍ≤å ÏûÖÎ†•: 15k, 1.5Îßå, 100Îßå...',
        fixedTitle: 'Ïõî Í≥†Ï†ï ÏßÄÏ∂ú',
        fixedDesc: 'Ï†ïÍ∏∞Ï†ÅÏù∏ ÏßÄÏ∂úÏûÖÎãàÎã§. Í∏àÏï°ÏùÑ ÏûÖÎ†•ÌïòÍ±∞ÎÇò Ìï¥ÎãπÎêòÏßÄ ÏïäÏúºÎ©¥ ÏÇ≠Ï†úÌïòÏÑ∏Ïöî.',
        addOther: 'Îã§Î•∏ Ìï≠Î™© Ï∂îÍ∞Ä',
        totalFixed: 'Í≥†Ï†ï ÏßÄÏ∂ú Ìï©Í≥Ñ',
        addFixedTitle: '‚ûï Í≥†Ï†ï ÏßÄÏ∂ú Ï∂îÍ∞Ä',
        expenseName: 'ÏßÄÏ∂ú Ïù¥Î¶Ñ',
        expenseNamePlaceholder: 'Ïòà: Ìó¨Ïä§Ïû•, ÎÑ∑ÌîåÎ¶≠Ïä§, ÌïôÎπÑ...',
        amountPerMonth: 'Ïõî Í∏àÏï°',
        add: 'Ï∂îÍ∞Ä',
        goalsTitle: 'Î¨¥ÏóáÏùÑ Ìñ•Ìï¥ ÎÇòÏïÑÍ∞ÄÍ≥† ÏûàÎÇòÏöî?',
        goalsDesc: '1-3Í∞ú Î™©ÌëúÎ•º ÏÑ†ÌÉùÌïòÏÑ∏Ïöî. MoniÍ∞Ä ÏßÑÌñâ ÏÉÅÌô©ÏùÑ Ï∂îÏ†ÅÌï©ÎãàÎã§.',
        createOwn: 'ÏßÅÏ†ë ÎßåÎì§Í∏∞',
        createGoalTitle: '‚ú® ÏÉà Î™©Ìëú ÎßåÎì§Í∏∞',
        goalName: 'Î™©Ìëú Ïù¥Î¶Ñ',
        goalNamePlaceholder: 'Ïòà: ÏÉà ÏïÑÏù¥Ìè∞, Í∞ïÏ¢å, ÏûêÏ†ÑÍ±∞...',
        amountNeeded: 'ÌïÑÏöî Í∏àÏï°',
        addGoal: 'Î™©Ìëú Ï∂îÍ∞Ä',
        allocationTitle: 'Îß§Ïõî ÏñºÎßàÎÇò Ï†ÄÏ∂ïÌï†ÍπåÏöî?',
        allocationDesc: 'Í∞Å Î™©ÌëúÏóê Îß§Ïõî ÏñºÎßàÎ•º Ï†ÄÏ∂ïÌï†ÏßÄ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî.',
        target: 'Î™©Ìëú',
        perMonth: '/ Ïõî',
        reachGoalIn: 'Î™©Ìëú Îã¨ÏÑ±ÍπåÏßÄ',
        months: 'Í∞úÏõî',
        income: 'ÏàòÏûÖ',
        fixedExpenses: 'Í≥†Ï†ï ÏßÄÏ∂ú',
        savingForGoals: 'Î™©Ìëú Ï†ÄÏ∂ï',
        spendComfortably: 'ÏûêÏú†Î°≠Í≤å Ïì∏ Ïàò ÏûàÎäî',
        finish: 'ÏôÑÎ£å ‚Üí',
        hey: 'ÏïàÎÖï,',
        spendableLabel: 'Ïì∏ Ïàò ÏûàÎäî Îèà',
        daysLeft: 'Ïùº ÎÇ®Ïùå',
        remaining: 'ÎÇ®ÏùÄ',
        goalTarget: 'Î™©Ìëú',
        actual: 'Ïã§Ï†ú',
        today: 'Ïò§Îäò',
        yesterday: 'Ïñ¥Ï†ú',
        thisMonth: 'Ïù¥Î≤à Îã¨',
        seeAll: 'Î™®Îëê Î≥¥Í∏∞',
        askPlaceholder: 'Î≠ò ÏÇ¨Í≥† Ïã∂Ïñ¥Ïöî?',
        askHint: 'Ïì∞Í∏∞ Ï†ÑÏóê MoniÏóêÍ≤å Î¨ºÏñ¥Î≥¥ÏÑ∏Ïöî',
        addExpenseTitle: '‚úèÔ∏è ÏßÄÏ∂ú Ï∂îÍ∞Ä',
        expenseTextPlaceholder: 'Ïòà: Ïª§Ìîº 5000Ïõê, ÌÉùÏãú 15000Ïõê...',
        expenseTextHint: 'üí° Ïù¥Î¶Ñ+Í∏àÏï° ÏûÖÎ†•, AIÍ∞Ä ÏûêÎèô Î∂ÑÎ•ò',
        name: 'Ïù¥Î¶Ñ',
        namePlaceholderExpense: 'Ïòà: Ïª§Ìîº, ÌÉùÏãú, Ï†êÏã¨...',
        amount: 'Í∏àÏï°',
        addExpense: 'ÏßÄÏ∂ú Ï∂îÍ∞Ä',
        expense: 'ÏßÄÏ∂ú',
        enterValidAmount: 'Ïú†Ìö®Ìïú Í∏àÏï°ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî',
        viewAll: 'Ïπ¥ÌÖåÍ≥†Î¶¨ Î≥¥Í∏∞',
        hideCategories: 'Ïπ¥ÌÖåÍ≥†Î¶¨ Ïà®Í∏∞Í∏∞',
        noExpensesYet: 'Ïò§Îäò ÏïÑÏßÅ ÏßÄÏ∂úÏù¥ ÏóÜÏäµÎãàÎã§',
        noGoalsYet: 'ÏïÑÏßÅ Î™©ÌëúÍ∞Ä ÏóÜÏäµÎãàÎã§',
        goalsWillAppear: 'Î™©ÌëúÍ∞Ä Ïó¨Í∏∞Ïóê ÌëúÏãúÎê©ÎãàÎã§',
        deposit: 'ÏûÖÍ∏à',
        goalAchieved: 'Î™©Ìëú Îã¨ÏÑ±',
        enterDepositAmount: 'ÏûÖÍ∏àÏï° ÏûÖÎ†•',
        enterWithdrawAmount: 'Ï∂úÍ∏àÏï° ÏûÖÎ†•',
        remaining: 'ÎÇ®ÏùÄ',
        available: 'Ïù¥Ïö© Í∞ÄÎä•',
        setAllocation: 'ÏõîÍ∞Ñ Î™©Ìëú ÏÑ§Ï†ï',
        expensesWillAppear: 'ÏßÄÏ∂úÏù¥ Ïó¨Í∏∞Ïóê ÌëúÏãúÎê©ÎãàÎã§',
        saved: 'Ï†ÄÏ∂ï',
        total: 'Ìï©Í≥Ñ',
        afterPurchase: 'Íµ¨Îß§ ÌõÑ:',
        leftRemaining: 'ÎÇ®Ïùå',
        bought: 'Íµ¨Îß§Ìï® ‚úì',
        cancel: 'Ï∑®ÏÜå',
        close: 'Îã´Í∏∞',
        home: 'Ìôà',
        goals: 'Î™©Ìëú',
        history: 'Í∏∞Î°ù',
        rent: 'ÏõîÏÑ∏',
        electric: 'Ï†ÑÍ∏∞',
        water: 'ÏàòÎèÑ',
        internet: 'Ïù∏ÌÑ∞ÎÑ∑',
        phone: 'Ï†ÑÌôî',
        insurance: 'Î≥¥Ìóò',
        laptop: 'ÎÖ∏Ìä∏Î∂Å',
        phoneGoal: 'Ìú¥ÎåÄÌè∞',
        trip: 'Ïó¨Ìñâ',
        bike: 'Ïò§ÌÜ†Î∞îÏù¥',
        emergency: 'ÎπÑÏÉÅÍ∏à',
        wedding: 'Í≤∞ÌòºÏãù',
        notUnderstand: 'MoniÍ∞Ä Ïù¥Ìï¥ÌïòÏßÄ Î™ªÌñàÏñ¥Ïöî. "Ïª§Ìîº 50k" ÎòêÎäî "ÌÉùÏãú 85k"Ï≤òÎüº ÏûÖÎ†•Ìï¥Î≥¥ÏÑ∏Ïöî! üòä',
        buyIt: 'ÏÇ¨ÏÑ∏Ïöî!',
        okToBuy: 'Í¥úÏ∞ÆÏïÑÏöî!',
        tooMuch: 'Ï¢Ä ÎßéÏïÑÏöî!',
        onlyPercent: 'Îã®',
        budget: 'ÏòàÏÇ∞',
        comfortable: 'Ìé∏Ìï¥Ïöî!',
        considerIt: 'Í≥†Î†§Ìï¥Î≥¥ÏÑ∏Ïöî.',
        areYouSure: 'ÌôïÏã§Ìï¥Ïöî?',
        percentOfBudget: 'ÎÇ®ÏùÄ ÏòàÏÇ∞Ïùò.',
        // B1: Permission Engine
        mayAffectGoals: 'Î™©ÌëúÏóê ÏòÅÌñ•ÏùÑ Ï§Ñ Ïàò ÏûàÏñ¥Ïöî',
        noGoalImpact: 'Î™©ÌëúÏóê ÏòÅÌñ• ÏóÜÏñ¥Ïöî',
        // B2: Future Self Visualization
        addFutureSelfNote: 'ÎØ∏ÎûòÏùò ÎÇòÏóê ÎåÄÌïú Î©îÎ™® Ï∂îÍ∞Ä...',
        futureSelfPrompt: 'Ïôú Ïù¥Í≤ÉÏùÑ ÏõêÌïòÎÇòÏöî? Ïù¥ Î™©ÌëúÎ•º Îã¨ÏÑ±Ìïú ÎØ∏ÎûòÏùò ÎÇòÎ•º Î¨òÏÇ¨Ìï¥Î≥¥ÏÑ∏Ïöî:',
        // B3: Analytics
        analytics: 'ÌÜµÍ≥Ñ',
        relationships: 'Ïù∏Í∞ÑÍ¥ÄÍ≥Ñ',
        selfCare: 'ÏûêÍ∏∞Í¥ÄÎ¶¨',
        necessities: 'ÌïÑÏàòÌíà',
        thisMonthSpending: 'Ïù¥Î≤à Îã¨ ÏßÄÏ∂ú',
        meaningAttached: 'ÏßÄÏ∂úÏùò ÏùòÎØ∏',
        relationshipsFocus: 'Í¥ÄÍ≥Ñ Íµ¨Ï∂ï',
        selfCareFocus: 'ÎÇòÏóêÍ≤å Ìà¨Ïûê',
        necessitiesFocus: 'ÌïÑÏàò ÏßÄÏ∂ú',
        noDataYet: 'ÏïÑÏßÅ ÏßÄÏ∂ú Îç∞Ïù¥ÌÑ∞ ÏóÜÏùå',
        // B4: Peace of Mind Indicator
        paceOkay: 'Ïûò Í∞ÄÍ≥† ÏûàÏñ¥Ïöî',
        paceGood: 'Í¥úÏ∞ÆÏïÑÏöî',
        paceWatch: 'Ï£ºÏùò ÌïÑÏöî',
        onPace: 'ÏòàÏ†ïÎåÄÎ°ú',
        slowDown: 'Ï°∞Í∏à Ï§ÑÏó¨Ïöî',
        // B5: Settings
        settings: 'ÏÑ§Ï†ï',
        edit: 'Ìé∏Ïßë',
        redo: 'Îã§ÏãúÌïòÍ∏∞',
        reset: 'Ï¥àÍ∏∞Ìôî',
        month: 'Ïõî',
        enterIncome: 'Ïõî ÏàòÏûÖÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî:',
        goalsAllocation: 'Î™©Ìëú Î∞è Î∞∞Î∂Ñ',
        monthlyAllocation: 'Ïõî Î∞∞Î∂Ñ',
        personality: 'ÏÑ±Í≤©',
        languageLabel: 'Ïñ∏Ïñ¥',
        noFixedExpenses: 'Í≥†Ï†ï ÏßÄÏ∂ú ÏóÜÏùå',
        noGoals: 'Î™©Ìëú ÏóÜÏùå',
        resetData: 'Îç∞Ïù¥ÌÑ∞ Ï¥àÍ∏∞Ìôî',
        resetWarning: 'Ï≤òÏùåÎ∂ÄÌÑ∞ ÏãúÏûë',
        redoQuizConfirm: 'ÏÑ±Í≤© ÌÄ¥Ï¶àÎ•º Îã§Ïãú ÌïòÏãúÍ≤†Ïñ¥Ïöî? ÌòÑÏû¨ Í≤∞Í≥ºÍ∞Ä ÎåÄÏ≤¥Îê©ÎãàÎã§.',
        selectLanguage: 'Ïñ∏Ïñ¥ ÏÑ†ÌÉù',
        enterNumber: 'Ïà´Ïûê ÏûÖÎ†• (1-7)',
        resetConfirm: 'Ï†ïÎßêÏöî? Î™®Îì† Îç∞Ïù¥ÌÑ∞Í∞Ä ÏÇ≠Ï†úÎê©ÎãàÎã§.',
        resetConfirm2: 'ÎêòÎèåÎ¶¥ Ïàò ÏóÜÏñ¥Ïöî. Ï†ïÎßê Ï¥àÍ∏∞Ìôî?',
      },
      fr: {
        welcome: 'Bienvenue sur Moni!',
        tagline: 'G√©rez votre argent √† votre fa√ßon.<br>Sans jugement. Juste du soutien.',
        start: 'Commencer ‚Üí',
        welcomeTitle: 'Bienvenue sur Moni!',
        welcomeDesc: 'Moni vous aide √† d√©penser avec intention ‚Äî pas en suivant chaque centime, mais en sachant o√π vous en √™tes sur le chemin de vos objectifs.',
        nameLabel: 'Comment vous appeler?',
        namePlaceholder: 'Entrez votre nom...',
        continue: 'Continuer ‚Üí',
        quizTitle: '4 Personnalit√©s Financi√®res',
        quizDesc: 'Quel type √™tes-vous? Faites le quiz pour d√©couvrir!',
        theDreamer: 'Le R√™veur',
        dreamerTag: 'Visionnaire',
        theExperiencer: 'L\'Exp√©rimentateur',
        experiencerTag: 'Aventurier',
        theGiver: 'Le Donneur',
        giverTag: '√Çme g√©n√©reuse',
        thePlanner: 'Le Planificateur',
        plannerTag: 'Esprit strat√©gique',
        quizAccompany: 'üéØ Moni vous accompagnera selon votre style',
        startQuiz: 'Faire le Quiz ¬∑ 4 questions ‚Üí',
        skip: 'Passer',
        quiz1: 'Quand vous recevez un bonus inattendu, vous...',
        quiz1opt1: 'Faites un plan pr√©cis',
        quiz1opt2: 'Vous faites plaisir tout de suite',
        quiz1opt3: 'Pensez √† des cadeaux pour vos proches',
        quiz1opt4: 'R√™vez aux possibilit√©s',
        quiz2: 'Quand d√©pensez-vous trop?',
        quiz2opt1: 'En sortant avec des amis',
        quiz2opt2: 'Quand quelqu\'un a besoin d\'aide',
        quiz2opt3: 'Attir√© par les nouveaut√©s',
        quiz2opt4: 'Rarement trop d√©penser',
        quiz3: 'Ce que vous ressentez en pensant √† l\'argent...',
        quiz3opt1: 'Excit√© par l\'avenir',
        quiz3opt2: 'D√©tendu, vivre le moment',
        quiz3opt3: 'Inquiet pour les proches',
        quiz3opt4: 'Sentiment de contr√¥le',
        quiz4: 'Qu\'est-ce qui vous d√©crit le mieux?',
        quiz4opt1: 'Beaucoup de r√™ves, difficile de se concentrer',
        quiz4opt2: 'Les souvenirs comptent plus que l\'√©pargne',
        quiz4opt3: 'Heureux d\'aider les autres',
        quiz4opt4: 'J\'aime les plans clairs',
        thisIsYou: '‚ú® C\'est vous!',
        dreamerDesc: 'Vous avez de beaux r√™ves et une imagination riche. Moni vous aidera √† vous concentrer sur l\'essentiel.',
        experiencerDesc: 'Vous croyez que la vie est faite pour √™tre v√©cue. Moni vous aidera √† √©quilibrer plaisir et avenir.',
        giverDesc: 'Votre joie est d\'apporter de la joie aux autres. Moni vous rappellera d\'investir en vous aussi.',
        plannerDesc: 'Vous avez une excellente discipline financi√®re. Moni vous aidera √† optimiser et c√©l√©brer les petites victoires.',
        // Archetype quotes
        dreamerQuote1: 'Les r√™ves deviennent r√©alit√©, pas √† pas ‚ú®',
        dreamerQuote2: 'Votre vision est votre boussole üåü',
        dreamerQuote3: 'Les grandes choses commencent par de petites √©conomies üí´',
        experiencerQuote1: 'La vie est faite de moments qui valent l\'investissement üé¢',
        experiencerQuote2: 'Les aventures attendent, vous vous pr√©parez bien ! üåà',
        experiencerQuote3: 'Chaque √©conomie rapproche de nouvelles exp√©riences üéØ',
        giverQuote1: 'La g√©n√©rosit√© commence par prendre soin de soi üíù',
        giverQuote2: 'Mettez d\'abord votre masque √† oxyg√®ne ü§ù',
        giverQuote3: 'La sant√© financi√®re permet de donner plus üíï',
        plannerQuote1: 'Chaque d√©tail compte, vous √™tes sur la bonne voie üìã',
        plannerQuote2: 'Le progr√®s syst√©matique m√®ne au succ√®s üéØ',
        plannerQuote3: 'Votre plan fonctionne √† merveille ‚úÖ',
        // Celebration translations
        firstExpenseTitle: 'Premi√®re d√©pense !',
        firstExpenseDesc: 'Vous √™tes en bonne voie !',
        tenExpensesTitle: 'De plus en plus organis√© !',
        tenExpensesDesc: '10 d√©penses suivies !',
        goalCompleteDesc: 'Accomplissement incroyable !',
        keepGoingDesc: 'Continuez !',
        toward: 'vers',
        dayStreak: 'Jours cons√©cutifs',
        streakDesc: 'Vous √™tes en feu !',
        days: 'jours',
        // Moni mood messages
        moniCelebrating: 'Woohoo ! Tu l\'as fait !',
        moniHappy: 'Super journ√©e !',
        moniExcited: 'Tu es en feu !',
        moniProud: 'Regarde ces progr√®s !',
        moniEncouraging: 'Nouveau d√©part aujourd\'hui !',
        moniCalm: '√âquilibr√© et stable.',
        moniFriendly: 'Salut, ami !',
        moniSupportive: 'Demain est un nouveau jour !',
        dreamGoal: 'Objectif de r√™ve',
        dreamerGoalQuote1: 'Votre r√™ve prend forme ‚ú®',
        dreamerGoalQuote2: 'Chaque pas vous rapproche üåü',
        bringDreamCloser: 'Rapprocher le r√™ve',
        dreamAchieved: 'R√™ve r√©alis√©',
        breakdown: 'D√©tails',
        week: 'sem',
        day: 'jour',
        monthly: 'Mensuel',
        giverTripImpact: 'Cr√©er des souvenirs avec vos proches',
        giverEmergencyImpact: '√ätre l√† quand les autres ont besoin',
        giverDefaultImpact: 'Soutenir votre c≈ìur g√©n√©reux',
        yourProgress: 'Votre progression',
        toGo: 'restant',
        addToGiving: 'Ajouter au fonds de g√©n√©rosit√©',
        readyToGive: 'Pr√™t √† donner',
        adventure: 'AVENTURE',
        fundedSoFar: 'financ√©',
        monthsToGo: 'mois restants',
        fundAdventure: 'Financer cette aventure',
        adventureReady: 'Aventure pr√™te',
        incomeTitle: 'Revenu Mensuel',
        incomeDesc: 'Pour que Moni calcule combien vous pouvez d√©penser confortablement chaque mois.',
        privacyNote: 'Les informations sont s√©curis√©es et stock√©es uniquement sur votre appareil',
        smartInputHint: 'üí° Tapez naturellement: 15k, 1.5m, 1.5 million...',
        fixedTitle: 'D√©penses Fixes Mensuelles',
        fixedDesc: 'Paiements r√©guliers. Entrez les montants ou supprimez si non applicable.',
        addOther: 'Ajouter autre',
        totalFixed: 'Total d√©penses fixes',
        addFixedTitle: '‚ûï Ajouter d√©pense fixe',
        expenseName: 'Nom de la d√©pense',
        expenseNamePlaceholder: 'Ex: Gym, Netflix, Frais de scolarit√©...',
        amountPerMonth: 'Montant / mois',
        add: 'Ajouter',
        goalsTitle: 'Vers quoi travaillez-vous?',
        goalsDesc: 'Choisissez 1-3 objectifs. Moni suivra votre progression.',
        createOwn: 'Cr√©er le v√¥tre',
        createGoalTitle: '‚ú® Cr√©er nouvel objectif',
        goalName: 'Nom de l\'objectif',
        goalNamePlaceholder: 'Ex: Nouvel iPhone, Cours, V√©lo...',
        amountNeeded: 'Montant n√©cessaire',
        addGoal: 'Ajouter objectif',
        allocationTitle: 'Combien √©pargner par mois?',
        allocationDesc: 'Choisissez combien √©pargner pour chaque objectif mensuellement.',
        target: 'Objectif',
        perMonth: '/ mois',
        reachGoalIn: 'Atteindre l\'objectif en',
        months: 'mois',
        income: 'Revenu',
        fixedExpenses: 'D√©penses fixes',
        savingForGoals: '√âpargne objectifs',
        spendComfortably: 'D√©penser librement',
        finish: 'Terminer ‚Üí',
        hey: 'Salut,',
        spendableLabel: 'D√©pensable',
        daysLeft: 'jours restants',
        remaining: 'restant',
        goalTarget: 'Objectif',
        actual: 'R√©el',
        today: 'Aujourd\'hui',
        yesterday: 'Hier',
        thisMonth: 'Ce mois',
        seeAll: 'Voir tout',
        askPlaceholder: 'Envie d\'acheter?',
        askHint: 'Demandez √† Moni avant de d√©penser',
        addExpenseTitle: '‚úèÔ∏è Ajouter d√©pense',
        expenseTextPlaceholder: 'Ex: Caf√© 4‚Ç¨, Uber 20‚Ç¨, D√©jeuner 15‚Ç¨...',
        expenseTextHint: 'üí° Tapez nom + montant, l\'IA cat√©gorise',
        name: 'Nom',
        namePlaceholderExpense: 'Ex: Caf√©, Uber, D√©jeuner...',
        amount: 'Montant',
        addExpense: 'Ajouter d√©pense',
        expense: 'D√©pense',
        enterValidAmount: 'Veuillez entrer un montant valide',
        viewAll: 'Voir cat√©gories',
        hideCategories: 'Masquer cat√©gories',
        noExpensesYet: 'Pas encore de d√©penses aujourd\'hui',
        noGoalsYet: 'Pas encore d\'objectifs',
        goalsWillAppear: 'Vos objectifs appara√Ætront ici',
        deposit: 'D√©poser',
        goalAchieved: 'Objectif atteint',
        enterDepositAmount: 'Entrez le montant du d√©p√¥t',
        enterWithdrawAmount: 'Entrez le montant du retrait',
        remaining: 'Restant',
        available: 'Disponible',
        setAllocation: 'D√©finir l\'objectif mensuel',
        expensesWillAppear: 'Vos d√©penses appara√Ætront ici',
        saved: '√©conomis√©',
        total: 'Total',
        afterPurchase: 'Apr√®s achat:',
        leftRemaining: 'restant',
        bought: 'Achet√© ‚úì',
        cancel: 'Annuler',
        close: 'Fermer',
        home: 'Accueil',
        goals: 'Objectifs',
        history: 'Historique',
        rent: 'Loyer',
        electric: '√âlectricit√©',
        water: 'Eau',
        internet: 'Internet',
        phone: 'T√©l√©phone',
        insurance: 'Assurance',
        laptop: 'Ordinateur',
        phoneGoal: 'T√©l√©phone',
        trip: 'Voyage',
        bike: 'Moto',
        emergency: 'Fonds d\'urgence',
        wedding: 'Mariage',
        notUnderstand: 'Moni ne comprend pas. Essayez "Caf√© 50k" ou "Uber 85k"! üòä',
        buyIt: 'achetez!',
        okToBuy: '√ßa va!',
        tooMuch: 'c\'est beaucoup!',
        onlyPercent: 'Seulement',
        budget: 'budget',
        comfortable: 'confortable!',
        considerIt: 'R√©fl√©chissez.',
        areYouSure: 'Vous √™tes s√ªr?',
        percentOfBudget: 'du budget restant.',
        // B1: Permission Engine
        mayAffectGoals: 'Peut affecter vos objectifs',
        noGoalImpact: 'N\'affectera pas vos objectifs',
        // B2: Future Self Visualization
        addFutureSelfNote: 'Ajoutez une note sur votre futur vous...',
        futureSelfPrompt: 'Pourquoi voulez-vous cela? D√©crivez votre futur vous profitant de cet objectif:',
        // B3: Analytics
        analytics: 'Statistiques',
        relationships: 'Relations',
        selfCare: 'Bien-√™tre',
        necessities: 'N√©cessit√©s',
        thisMonthSpending: 'D√©penses ce mois',
        meaningAttached: 'Sens des d√©penses',
        relationshipsFocus: 'Construire des liens',
        selfCareFocus: 'Investir en soi',
        necessitiesFocus: 'Couvrir l\'essentiel',
        noDataYet: 'Pas encore de donn√©es',
        // B4: Peace of Mind Indicator
        paceOkay: 'En bonne voie',
        paceGood: '√áa va',
        paceWatch: '√Ä surveiller',
        onPace: 'dans le rythme',
        slowDown: 'ralentir un peu',
        // B5: Settings
        settings: 'Param√®tres',
        edit: 'Modifier',
        redo: 'Refaire',
        reset: 'R√©initialiser',
        month: 'mois',
        enterIncome: 'Entrez votre revenu mensuel :',
        goalsAllocation: 'Objectifs et allocation',
        monthlyAllocation: 'Allocation mensuelle',
        personality: 'Personnalit√©',
        languageLabel: 'Langue',
        noFixedExpenses: 'Pas de frais fixes',
        noGoals: 'Pas d\'objectifs',
        resetData: 'R√©initialiser les donn√©es',
        resetWarning: 'Recommencer √† z√©ro',
        redoQuizConfirm: 'Refaire le quiz de personnalit√© ? Votre r√©sultat actuel sera remplac√©.',
        selectLanguage: 'Choisir la langue',
        enterNumber: 'Entrez un num√©ro (1-7)',
        resetConfirm: '√ätes-vous s√ªr ? Toutes les donn√©es seront supprim√©es.',
        resetConfirm2: 'Cela ne peut pas √™tre annul√©. Vraiment r√©initialiser ?',
      },
      es: {
        welcome: '¬°Bienvenido a Moni!',
        tagline: 'Administra tu dinero a tu manera.<br>Sin juicios. Solo apoyo.',
        start: 'Empezar ‚Üí',
        welcomeTitle: '¬°Bienvenido a Moni!',
        welcomeDesc: 'Moni te ayuda a gastar con intenci√≥n ‚Äî no rastreando cada centavo, sino sabiendo d√≥nde est√°s en el camino hacia tus metas.',
        nameLabel: '¬øC√≥mo te llamamos?',
        namePlaceholder: 'Ingresa tu nombre...',
        continue: 'Continuar ‚Üí',
        quizTitle: '4 Personalidades del Dinero',
        quizDesc: '¬øQu√© tipo eres? ¬°Haz el quiz para descubrirlo!',
        theDreamer: 'El So√±ador',
        dreamerTag: 'Visionario',
        theExperiencer: 'El Experimentador',
        experiencerTag: 'Buscador de aventuras',
        theGiver: 'El Dador',
        giverTag: 'Alma generosa',
        thePlanner: 'El Planificador',
        plannerTag: 'Mente estrat√©gica',
        quizAccompany: 'üéØ Moni te acompa√±ar√° seg√∫n tu estilo',
        startQuiz: 'Hacer Quiz ¬∑ 4 preguntas ‚Üí',
        skip: 'Saltar',
        quiz1: 'Cuando recibes dinero extra inesperado, normalmente...',
        quiz1opt1: 'Haces un plan espec√≠fico',
        quiz1opt2: 'Te das un gusto inmediatamente',
        quiz1opt3: 'Piensas en regalos para seres queridos',
        quiz1opt4: 'Sue√±as con posibilidades',
        quiz2: '¬øCu√°ndo gastas de m√°s?',
        quiz2opt1: 'Saliendo con amigos',
        quiz2opt2: 'Cuando alguien necesita ayuda',
        quiz2opt3: 'Atra√≠do por cosas nuevas',
        quiz2opt4: 'Raramente gasto de m√°s',
        quiz3: 'C√≥mo te sientes al pensar en dinero...',
        quiz3opt1: 'Emocionado por el futuro',
        quiz3opt2: 'Relajado, viviendo el momento',
        quiz3opt3: 'Preocupado por seres queridos',
        quiz3opt4: 'Sensaci√≥n de control',
        quiz4: '¬øQu√© te describe mejor?',
        quiz4opt1: 'Muchos sue√±os, dif√≠cil enfocarse',
        quiz4opt2: 'Los recuerdos importan m√°s que ahorrar',
        quiz4opt3: 'Feliz cuando ayudo a otros',
        quiz4opt4: 'Me gustan los planes claros',
        thisIsYou: '‚ú® ¬°Este eres t√∫!',
        dreamerDesc: 'Tienes sue√±os hermosos e imaginaci√≥n rica. Moni te ayudar√° a enfocarte en lo m√°s importante.',
        experiencerDesc: 'Crees que la vida es para experimentar. Moni te ayudar√° a equilibrar disfrutar y asegurar tu futuro.',
        giverDesc: 'Tu alegr√≠a es dar alegr√≠a a otros. Moni te recordar√° invertir en ti tambi√©n.',
        plannerDesc: 'Tienes gran disciplina financiera. Moni te ayudar√° a optimizar m√°s y celebrar peque√±as victorias.',
        // Archetype quotes
        dreamerQuote1: 'Los sue√±os se hacen realidad, paso a paso ‚ú®',
        dreamerQuote2: 'Tu visi√≥n es tu br√∫jula üåü',
        dreamerQuote3: 'Las grandes cosas empiezan con peque√±os ahorros üí´',
        experiencerQuote1: 'La vida est√° hecha de momentos que vale la pena financiar üé¢',
        experiencerQuote2: '¬°Las aventuras esperan, te preparas bien! üåà',
        experiencerQuote3: 'Cada ahorro acerca nuevas experiencias üéØ',
        giverQuote1: 'La generosidad empieza con el autocuidado üíù',
        giverQuote2: 'Ponte primero tu m√°scara de ox√≠geno ü§ù',
        giverQuote3: 'La salud financiera te permite dar m√°s üíï',
        plannerQuote1: 'Cada detalle importa, vas por buen camino üìã',
        plannerQuote2: 'El progreso sistem√°tico lleva al √©xito üéØ',
        plannerQuote3: 'Tu plan est√° funcionando perfectamente ‚úÖ',
        // Celebration translations
        firstExpenseTitle: '¬°Primer gasto!',
        firstExpenseDesc: '¬°Vas por buen camino!',
        tenExpensesTitle: '¬°Cada vez m√°s organizado!',
        tenExpensesDesc: '¬°10 gastos registrados!',
        goalCompleteDesc: '¬°Logro incre√≠ble!',
        keepGoingDesc: '¬°Sigue as√≠!',
        toward: 'hacia',
        dayStreak: 'D√≠as seguidos',
        streakDesc: '¬°Est√°s en racha!',
        days: 'd√≠as',
        // Moni mood messages
        moniCelebrating: '¬°Woohoo! ¬°Lo lograste!',
        moniHappy: '¬°Gran d√≠a!',
        moniExcited: '¬°Est√°s en racha!',
        moniProud: '¬°Mira ese progreso!',
        moniEncouraging: '¬°Nuevo comienzo hoy!',
        moniCalm: 'Equilibrado y estable.',
        moniFriendly: '¬°Hola, amigo!',
        moniSupportive: '¬°Ma√±ana es un nuevo d√≠a!',
        dreamGoal: 'Meta so√±ada',
        dreamerGoalQuote1: 'Tu sue√±o est√° tomando forma ‚ú®',
        dreamerGoalQuote2: 'Cada paso te acerca m√°s üåü',
        bringDreamCloser: 'Acercar el sue√±o',
        dreamAchieved: 'Sue√±o logrado',
        breakdown: 'Desglose',
        week: 'sem',
        day: 'd√≠a',
        monthly: 'Mensual',
        giverTripImpact: 'Crear recuerdos con seres queridos',
        giverEmergencyImpact: 'Estar ah√≠ cuando otros te necesiten',
        giverDefaultImpact: 'Alimentar tu coraz√≥n generoso',
        yourProgress: 'Tu progreso',
        toGo: 'por ir',
        addToGiving: 'A√±adir al fondo de generosidad',
        readyToGive: 'Listo para dar',
        adventure: 'AVENTURA',
        fundedSoFar: 'financiado',
        monthsToGo: 'meses restantes',
        fundAdventure: 'Financiar esta aventura',
        adventureReady: 'Aventura lista',
        incomeTitle: 'Ingreso Mensual',
        incomeDesc: 'Para que Moni calcule cu√°nto puedes gastar c√≥modamente cada mes.',
        privacyNote: 'La informaci√≥n es segura y se almacena solo en tu dispositivo',
        smartInputHint: 'üí° Escribe naturalmente: 15k, 1.5m, 1.5 million...',
        fixedTitle: 'Gastos Fijos Mensuales',
        fixedDesc: 'Pagos regulares. Ingresa montos o elimina si no aplica.',
        addOther: 'Agregar otro',
        totalFixed: 'Total gastos fijos',
        addFixedTitle: '‚ûï Agregar gasto fijo',
        expenseName: 'Nombre del gasto',
        expenseNamePlaceholder: 'Ej: Gimnasio, Netflix, Colegiatura...',
        amountPerMonth: 'Monto / mes',
        add: 'Agregar',
        goalsTitle: '¬øHacia qu√© est√°s trabajando?',
        goalsDesc: 'Elige 1-3 metas. Moni seguir√° tu progreso.',
        createOwn: 'Crear propio',
        createGoalTitle: '‚ú® Crear nueva meta',
        goalName: 'Nombre de la meta',
        goalNamePlaceholder: 'Ej: iPhone nuevo, Curso, Bicicleta...',
        amountNeeded: 'Monto necesario',
        addGoal: 'Agregar meta',
        allocationTitle: '¬øCu√°nto ahorrar al mes?',
        allocationDesc: 'Elige cu√°nto quieres ahorrar para cada meta mensualmente.',
        target: 'Meta',
        perMonth: '/ mes',
        reachGoalIn: 'Alcanzar meta en',
        months: 'meses',
        income: 'Ingreso',
        fixedExpenses: 'Gastos fijos',
        savingForGoals: 'Ahorro para metas',
        spendComfortably: 'Gastar libremente',
        finish: 'Finalizar ‚Üí',
        hey: 'Hola,',
        spendableLabel: 'Disponible',
        daysLeft: 'd√≠as restantes',
        remaining: 'restante',
        goalTarget: 'Meta',
        actual: 'Real',
        today: 'Hoy',
        yesterday: 'Ayer',
        thisMonth: 'Este mes',
        seeAll: 'Ver todo',
        askPlaceholder: '¬øQuieres comprar algo?',
        askHint: 'Pregunta a Moni antes de gastar',
        addExpenseTitle: '‚úèÔ∏è Agregar gasto',
        expenseTextPlaceholder: 'Ej: Caf√© 3‚Ç¨, Uber 15‚Ç¨, Almuerzo 12‚Ç¨...',
        expenseTextHint: 'üí° Escribe nombre + monto, IA categoriza',
        name: 'Nombre',
        namePlaceholderExpense: 'Ej: Caf√©, Uber, Almuerzo...',
        amount: 'Monto',
        addExpense: 'Agregar gasto',
        expense: 'Gasto',
        enterValidAmount: 'Por favor ingrese un monto v√°lido',
        viewAll: 'Ver categor√≠as',
        hideCategories: 'Ocultar categor√≠as',
        noExpensesYet: 'A√∫n no hay gastos hoy',
        noGoalsYet: 'A√∫n no hay metas',
        goalsWillAppear: 'Tus metas aparecer√°n aqu√≠',
        deposit: 'Depositar',
        goalAchieved: 'Meta alcanzada',
        enterDepositAmount: 'Ingrese el monto del dep√≥sito',
        enterWithdrawAmount: 'Ingrese el monto del retiro',
        remaining: 'Restante',
        available: 'Disponible',
        setAllocation: 'Establecer meta mensual',
        expensesWillAppear: 'Tus gastos aparecer√°n aqu√≠',
        saved: 'ahorrado',
        total: 'Total',
        afterPurchase: 'Despu√©s de comprar:',
        leftRemaining: 'restante',
        bought: 'Comprado ‚úì',
        cancel: 'Cancelar',
        close: 'Cerrar',
        home: 'Inicio',
        goals: 'Metas',
        history: 'Historial',
        rent: 'Alquiler',
        electric: 'Electricidad',
        water: 'Agua',
        internet: 'Internet',
        phone: 'Tel√©fono',
        insurance: 'Seguro',
        laptop: 'Laptop',
        phoneGoal: 'Tel√©fono',
        trip: 'Viaje',
        bike: 'Moto',
        emergency: 'Fondo de emergencia',
        wedding: 'Boda',
        notUnderstand: 'Moni no entiende. Intenta escribir "Caf√© 50k" o "Uber 85k"! üòä',
        buyIt: '¬°c√≥mpralo!',
        okToBuy: '¬°est√° bien!',
        tooMuch: '¬°es mucho!',
        onlyPercent: 'Solo',
        budget: 'presupuesto',
        comfortable: '¬°c√≥modo!',
        considerIt: 'Consid√©ralo.',
        areYouSure: '¬øEst√°s seguro?',
        percentOfBudget: 'del presupuesto restante.',
        // B1: Permission Engine
        mayAffectGoals: 'Puede afectar tus metas',
        noGoalImpact: 'No afectar√° tus metas',
        // B2: Future Self Visualization
        addFutureSelfNote: 'A√±ade una nota sobre tu yo futuro...',
        futureSelfPrompt: '¬øPor qu√© quieres esto? Describe a tu yo futuro disfrutando de esta meta:',
        // B3: Analytics
        analytics: 'Estad√≠sticas',
        relationships: 'Relaciones',
        selfCare: 'Autocuidado',
        necessities: 'Necesidades',
        thisMonthSpending: 'Gastos este mes',
        meaningAttached: 'Significado del gasto',
        relationshipsFocus: 'Construyendo conexiones',
        selfCareFocus: 'Invirtiendo en ti',
        necessitiesFocus: 'Cubriendo lo esencial',
        noDataYet: 'Sin datos a√∫n',
        // B4: Peace of Mind Indicator
        paceOkay: 'Bien',
        paceGood: 'Aceptable',
        paceWatch: 'Cuidado',
        onPace: 'al ritmo',
        slowDown: 'frenar un poco',
        // B5: Settings
        settings: 'Ajustes',
        edit: 'Editar',
        redo: 'Rehacer',
        reset: 'Reiniciar',
        month: 'mes',
        enterIncome: 'Ingresa tu ingreso mensual:',
        goalsAllocation: 'Metas y asignaci√≥n',
        monthlyAllocation: 'Asignaci√≥n mensual',
        personality: 'Personalidad',
        languageLabel: 'Idioma',
        noFixedExpenses: 'Sin gastos fijos',
        noGoals: 'Sin metas',
        resetData: 'Reiniciar datos',
        resetWarning: 'Empezar de nuevo',
        redoQuizConfirm: '¬øRehacer el quiz de personalidad? Tu resultado actual ser√° reemplazado.',
        selectLanguage: 'Selecciona idioma',
        enterNumber: 'Ingresa n√∫mero (1-7)',
        resetConfirm: '¬øEst√°s seguro? Todos los datos ser√°n eliminados.',
        resetConfirm2: 'No se puede deshacer. ¬øReiniciar de verdad?',
      }
    };

    const LANGUAGES = {
      vi: {
        label: 'Ti·∫øng Vi·ªát', flag: 'üáªüá≥',
        currency: 'VND', symbol: '‚Ç´', symbolPosition: 'after',
        incomePresets: [8, 10, 15, 20, 25, 30], // millions
        multiplier: 1000000, // 1 unit = 1 million VND
        formatUnit: 'tr',
        goalAmounts: { laptop: 25000000, phone: 15000000, trip: 10000000, bike: 50000000, emergency: 20000000, wedding: 100000000 },
        sampleExpenses: [
          { emoji: '‚òï', name: 'Cafe', amount: 50000 },
          { emoji: 'üçú', name: 'C∆°m tr∆∞a', amount: 45000 },
          { emoji: 'üöó', name: 'Grab', amount: 85000 },
          { emoji: 'üõí', name: 'Si√™u th·ªã', amount: 150000 }
        ],
        quickExpenses: [
          { emoji: '‚òï', name: 'Cafe', amount: 50000, label: 'Cafe 50k' },
          { emoji: 'üçú', name: 'C∆°m', amount: 45000, label: 'C∆°m 45k' },
          { emoji: 'üöó', name: 'Grab', amount: 85000, label: 'Grab 85k' },
          { emoji: 'üõí', name: 'Ch·ª£', amount: 150000, label: 'Ch·ª£ 150k' }
        ]
      },
      en: {
        label: 'English', flag: 'üá¨üáß',
        currency: 'USD', symbol: '$', symbolPosition: 'before',
        incomePresets: [3, 4, 5, 6, 8, 10], // thousands
        multiplier: 1000, // 1 unit = 1 thousand USD
        formatUnit: 'k',
        goalAmounts: { laptop: 1500, phone: 1000, trip: 2000, bike: 5000, emergency: 5000, wedding: 20000 },
        sampleExpenses: [
          { emoji: '‚òï', name: 'Coffee', amount: 5 },
          { emoji: 'üçú', name: 'Lunch', amount: 15 },
          { emoji: 'üöó', name: 'Uber', amount: 25 },
          { emoji: 'üõí', name: 'Groceries', amount: 80 }
        ],
        quickExpenses: [
          { emoji: '‚òï', name: 'Coffee', amount: 5, label: 'Coffee $5' },
          { emoji: 'üçú', name: 'Lunch', amount: 15, label: 'Lunch $15' },
          { emoji: 'üöó', name: 'Uber', amount: 25, label: 'Uber $25' },
          { emoji: 'üõí', name: 'Grocery', amount: 50, label: 'Grocery $50' }
        ]
      },
      zh: {
        label: '‰∏≠Êñá', flag: 'üá®üá≥',
        currency: 'CNY', symbol: '¬•', symbolPosition: 'before',
        incomePresets: [8, 10, 15, 20, 30, 50], // thousands
        multiplier: 1000,
        formatUnit: 'k',
        goalAmounts: { laptop: 8000, phone: 6000, trip: 10000, bike: 15000, emergency: 20000, wedding: 100000 },
        sampleExpenses: [
          { emoji: '‚òï', name: 'ÂíñÂï°', amount: 30 },
          { emoji: 'üçú', name: 'ÂçàÈ§ê', amount: 40 },
          { emoji: 'üöó', name: 'ÊâìËΩ¶', amount: 50 },
          { emoji: 'üõí', name: 'Ë∂ÖÂ∏Ç', amount: 200 }
        ],
        quickExpenses: [
          { emoji: '‚òï', name: 'ÂíñÂï°', amount: 30, label: 'ÂíñÂï° ¬•30' },
          { emoji: 'üçú', name: 'ÂçàÈ§ê', amount: 40, label: 'ÂçàÈ§ê ¬•40' },
          { emoji: 'üöó', name: 'ÊâìËΩ¶', amount: 50, label: 'ÊâìËΩ¶ ¬•50' },
          { emoji: 'üõí', name: 'Ë∂ÖÂ∏Ç', amount: 150, label: 'Ë∂ÖÂ∏Ç ¬•150' }
        ]
      },
      ja: {
        label: 'Êó•Êú¨Ë™û', flag: 'üáØüáµ',
        currency: 'JPY', symbol: '¬•', symbolPosition: 'before',
        incomePresets: [200, 250, 300, 400, 500, 600], // thousands
        multiplier: 10000, // ‰∏á = 10k
        formatUnit: '‰∏á',
        goalAmounts: { laptop: 150000, phone: 100000, trip: 200000, bike: 300000, emergency: 500000, wedding: 3000000 },
        sampleExpenses: [
          { emoji: '‚òï', name: '„Ç≥„Éº„Éí„Éº', amount: 500 },
          { emoji: 'üçú', name: '„É©„É≥„ÉÅ', amount: 1000 },
          { emoji: 'üöó', name: '„Çø„ÇØ„Ç∑„Éº', amount: 2000 },
          { emoji: 'üõí', name: '„Çπ„Éº„Éë„Éº', amount: 5000 }
        ],
        quickExpenses: [
          { emoji: '‚òï', name: '„Ç≥„Éº„Éí„Éº', amount: 500, label: '„Ç≥„Éº„Éí„Éº ¬•500' },
          { emoji: 'üçú', name: '„É©„É≥„ÉÅ', amount: 1000, label: '„É©„É≥„ÉÅ ¬•1000' },
          { emoji: 'üöó', name: '„Çø„ÇØ„Ç∑„Éº', amount: 2000, label: '„Çø„ÇØ„Ç∑„Éº ¬•2000' },
          { emoji: 'üõí', name: '„Çπ„Éº„Éë„Éº', amount: 3000, label: '„Çπ„Éº„Éë„Éº ¬•3000' }
        ]
      },
      ko: {
        label: 'ÌïúÍµ≠Ïñ¥', flag: 'üá∞üá∑',
        currency: 'KRW', symbol: '‚Ç©', symbolPosition: 'before',
        incomePresets: [200, 300, 400, 500, 600, 800], // ÎßåÏõê units (200Îßå = 2M KRW)
        multiplier: 10000, // Îßå = 10k
        formatUnit: 'Îßå',
        goalAmounts: { laptop: 1500000, phone: 1000000, trip: 2000000, bike: 5000000, emergency: 5000000, wedding: 30000000 },
        sampleExpenses: [
          { emoji: '‚òï', name: 'Ïª§Ìîº', amount: 5000 },
          { emoji: 'üçú', name: 'Ï†êÏã¨', amount: 10000 },
          { emoji: 'üöó', name: 'ÌÉùÏãú', amount: 15000 },
          { emoji: 'üõí', name: 'ÎßàÌä∏', amount: 50000 }
        ],
        quickExpenses: [
          { emoji: '‚òï', name: 'Ïª§Ìîº', amount: 5000, label: 'Ïª§Ìîº ‚Ç©5000' },
          { emoji: 'üçú', name: 'Ï†êÏã¨', amount: 10000, label: 'Ï†êÏã¨ ‚Ç©10000' },
          { emoji: 'üöó', name: 'ÌÉùÏãú', amount: 15000, label: 'ÌÉùÏãú ‚Ç©15000' },
          { emoji: 'üõí', name: 'ÎßàÌä∏', amount: 30000, label: 'ÎßàÌä∏ ‚Ç©30000' }
        ]
      },
      fr: {
        label: 'Fran√ßais', flag: 'üá´üá∑',
        currency: 'EUR', symbol: '‚Ç¨', symbolPosition: 'after',
        incomePresets: [2, 2.5, 3, 4, 5, 6], // thousands
        multiplier: 1000,
        formatUnit: 'k',
        goalAmounts: { laptop: 1200, phone: 800, trip: 1500, bike: 4000, emergency: 5000, wedding: 15000 },
        sampleExpenses: [
          { emoji: '‚òï', name: 'Caf√©', amount: 4 },
          { emoji: 'üçú', name: 'D√©jeuner', amount: 15 },
          { emoji: 'üöó', name: 'Uber', amount: 20 },
          { emoji: 'üõí', name: 'Courses', amount: 60 }
        ],
        quickExpenses: [
          { emoji: '‚òï', name: 'Caf√©', amount: 4, label: 'Caf√© 4‚Ç¨' },
          { emoji: 'üçú', name: 'D√©jeuner', amount: 15, label: 'D√©jeuner 15‚Ç¨' },
          { emoji: 'üöó', name: 'Uber', amount: 20, label: 'Uber 20‚Ç¨' },
          { emoji: 'üõí', name: 'Courses', amount: 50, label: 'Courses 50‚Ç¨' }
        ]
      },
      es: {
        label: 'Espa√±ol', flag: 'üá™üá∏',
        currency: 'EUR', symbol: '‚Ç¨', symbolPosition: 'after',
        incomePresets: [1.5, 2, 2.5, 3, 4, 5], // thousands
        multiplier: 1000,
        formatUnit: 'k',
        goalAmounts: { laptop: 1000, phone: 700, trip: 1200, bike: 3500, emergency: 4000, wedding: 12000 },
        sampleExpenses: [
          { emoji: '‚òï', name: 'Caf√©', amount: 3 },
          { emoji: 'üçú', name: 'Almuerzo', amount: 12 },
          { emoji: 'üöó', name: 'Uber', amount: 15 },
          { emoji: 'üõí', name: 'Compras', amount: 50 }
        ],
        quickExpenses: [
          { emoji: '‚òï', name: 'Caf√©', amount: 3, label: 'Caf√© 3‚Ç¨' },
          { emoji: 'üçú', name: 'Almuerzo', amount: 12, label: 'Almuerzo 12‚Ç¨' },
          { emoji: 'üöó', name: 'Uber', amount: 15, label: 'Uber 15‚Ç¨' },
          { emoji: 'üõí', name: 'Compras', amount: 40, label: 'Compras 40‚Ç¨' }
        ]
      }
    };

    // Translation function
    const t = (key) => TRANSLATIONS[state.language]?.[key] || TRANSLATIONS.vi[key] || key;

    // Currency helpers
    const getLang = () => LANGUAGES[state.language] || LANGUAGES.vi;

    const formatCurrency = (amount, compact = false) => {
      const lang = getLang();
      if (compact) {
        const unit = lang.multiplier || 1000000;
        const val = amount / unit;
        if (lang.symbolPosition === 'before') {
          return `${lang.symbol}${val.toFixed(val % 1 === 0 ? 0 : 1)}${lang.formatUnit}`;
        } else {
          return `${val.toFixed(val % 1 === 0 ? 0 : 1)}${lang.formatUnit}`;
        }
      }
      // Full format
      if (lang.symbolPosition === 'before') {
        return `${lang.symbol}${amount.toLocaleString()}`;
      } else {
        return `${amount.toLocaleString()} ${lang.symbol}`;
      }
    };

    const getIncomePresets = () => {
      const lang = getLang();
      return lang.incomePresets.map(n => n * lang.multiplier);
    };

    const getGoalAmount = (goalId) => {
      const lang = getLang();
      return lang.goalAmounts[goalId] || 0;
    };

    // Set language function
    const setLanguage = (langCode) => {
      state.language = langCode;
      localStorage.setItem('moni_language', langCode);
      document.documentElement.lang = langCode;
      // Reset financial data when changing language/currency
      state.income = '';
      state.fixedExpenses = getDefaultFixed();
      state.goals = [];
      state.allocations = {};
      state.transactions = []; // Start empty, user adds expenses
      render();
    };

    // ============= DATA PERSISTENCE =============
    const STORAGE_KEY = 'moni_app_data';

    const saveState = () => {
      const dataToSave = {
        version: 1,
        savedAt: Date.now(),
        language: state.language,
        userName: state.userName,
        archetype: state.archetype,
        income: state.income,
        fixedExpenses: state.fixedExpenses,
        goals: state.goals,
        allocations: state.allocations,
        transactions: state.transactions,
        goalDeposits: state.goalDeposits,
        goalNotes: state.goalNotes,
        onboardingCompleted: state.onboardingCompleted,
        // Buffer System
        buffer: state.buffer,
        cycleMode: state.cycleMode,
        debtHandling: state.debtHandling,
        cycleDay: state.cycleDay,
        lastCycleDate: state.lastCycleDate,
        // Celebration tracking
        milestonesAchieved: state.milestonesAchieved,
        streakDays: state.streakDays,
        lastActiveDate: state.lastActiveDate,
        totalExpensesLogged: state.totalExpensesLogged,
      };
      localStorage.setItem(STORAGE_KEY, JSON.stringify(dataToSave));
    };

    const loadState = () => {
      try {
        const saved = localStorage.getItem(STORAGE_KEY);
        if (saved) return JSON.parse(saved);
      } catch (e) {
        console.error('Failed to load state:', e);
      }
      return null;
    };

    // Load saved data
    const savedData = loadState();
    // Only skip onboarding if user has completed it with valid data
    const isReturningUser = savedData &&
                            savedData.onboardingCompleted &&
                            savedData.userName &&
                            savedData.income;

    let state = {
      screen: isReturningUser ? 'main' : 'language',
      language: savedData?.language || localStorage.getItem('moni_language') || 'vi',
      step: 0,
      quizStep: -1,
      quizAnswers: [],
      userName: savedData?.userName || '',
      archetype: savedData?.archetype || null,
      income: savedData?.income || '',
      fixedExpenses: savedData?.fixedExpenses || [],
      goals: savedData?.goals || [],
      allocations: savedData?.allocations || {},
      transactions: savedData?.transactions || [],
      goalDeposits: savedData?.goalDeposits || {},
      goalNotes: savedData?.goalNotes || {}, // Future Self Visualization notes
      onboardingCompleted: savedData?.onboardingCompleted || false,
      // Buffer System (persisted)
      buffer: savedData?.buffer || 0,
      cycleMode: savedData?.cycleMode || 'buffer', // 'reset' | 'rollover' | 'buffer'
      debtHandling: savedData?.debtHandling || 'deduct_buffer', // 'forgive' | 'deduct_buffer'
      cycleDay: savedData?.cycleDay || 1, // Day of month for cycle reset
      lastCycleDate: savedData?.lastCycleDate || null,
      // Celebration tracking (persisted)
      milestonesAchieved: savedData?.milestonesAchieved || [],
      streakDays: savedData?.streakDays || 0,
      lastActiveDate: savedData?.lastActiveDate || null,
      totalExpensesLogged: savedData?.totalExpensesLogged || 0,
      // UI state (not persisted)
      showAddExpense: false,
      showAddFixed: false,
      showAddGoal: false,
      fixedExpanded: false,
      selectedGoalEmoji: 'üéØ',
      inputModal: null, // Generic input modal config
      showCelebration: null,
      newExpense: { name: '', amount: '' },
      newFixed: { name: '', amount: '' },
      newGoal: { name: '', amount: '' },
      chatLoading: false,
      chatResponse: null,
      chatParsed: null,
      activeTab: 'home',
    };

    const getDefaultFixed = () => [
      { id: 'rent', e: 'üè†', nameKey: 'rent', amount: '' },
      { id: 'electric', e: 'üí°', nameKey: 'electric', amount: '' },
      { id: 'water', e: 'üíß', nameKey: 'water', amount: '' },
      { id: 'internet', e: 'üì∂', nameKey: 'internet', amount: '' },
      { id: 'phone', e: 'üì±', nameKey: 'phone', amount: '' },
      { id: 'insurance', e: 'üõ°Ô∏è', nameKey: 'insurance', amount: '' },
    ];
    const getFixedName = (item) => item.customName || t(item.nameKey) || item.nameKey;

    // Get sample transactions for current language/currency
    const getSampleTransactions = () => {
      const lang = getLang();
      return (lang.sampleExpenses || []).map(exp => ({
        emoji: exp.emoji,
        name: exp.name,
        amount: exp.amount
      }));
    };

    // Initialize fixed expenses from defaults ONLY if not already loaded from savedData
    if (!savedData?.fixedExpenses || savedData.fixedExpenses.length === 0) {
      state.fixedExpenses = getDefaultFixed();
    }
    // Don't overwrite transactions - they are already loaded from savedData or empty

    const getArchetypes = () => ({
      dreamer: { emoji: '‚ú®', name: t('theDreamer'), tag: t('dreamerTag'), color: '#8b5cf6', descKey: 'dreamerDesc' },
      experiencer: { emoji: 'üé¢', name: t('theExperiencer'), tag: t('experiencerTag'), color: '#f97316', descKey: 'experiencerDesc' },
      giver: { emoji: 'üíù', name: t('theGiver'), tag: t('giverTag'), color: '#ec4899', descKey: 'giverDesc' },
      planner: { emoji: 'üéØ', name: t('thePlanner'), tag: t('plannerTag'), color: '#10b981', descKey: 'plannerDesc' },
    });

    const getQuiz = () => [
      { q: t('quiz1'), opts: [
        { e: 'üìã', text: t('quiz1opt1'), type: 'planner' },
        { e: 'üéÅ', text: t('quiz1opt2'), type: 'experiencer' },
        { e: 'üíù', text: t('quiz1opt3'), type: 'giver' },
        { e: '‚ú®', text: t('quiz1opt4'), type: 'dreamer' },
      ]},
      { q: t('quiz2'), opts: [
        { e: 'üéâ', text: t('quiz2opt1'), type: 'experiencer' },
        { e: 'ü§ù', text: t('quiz2opt2'), type: 'giver' },
        { e: 'üÜï', text: t('quiz2opt3'), type: 'dreamer' },
        { e: '‚úÖ', text: t('quiz2opt4'), type: 'planner' },
      ]},
      { q: t('quiz3'), opts: [
        { e: 'üöÄ', text: t('quiz3opt1'), type: 'dreamer' },
        { e: 'üòå', text: t('quiz3opt2'), type: 'experiencer' },
        { e: 'ü´Ç', text: t('quiz3opt3'), type: 'giver' },
        { e: 'üí™', text: t('quiz3opt4'), type: 'planner' },
      ]},
      { q: t('quiz4'), opts: [
        { e: 'üåà', text: t('quiz4opt1'), type: 'dreamer' },
        { e: 'üì∏', text: t('quiz4opt2'), type: 'experiencer' },
        { e: 'üòä', text: t('quiz4opt3'), type: 'giver' },
        { e: 'üìä', text: t('quiz4opt4'), type: 'planner' },
      ]},
    ];

    const GOALS_DATA = [
      { id: 'laptop', e: 'üíª', nameKey: 'laptop' },
      { id: 'phone', e: 'üì±', nameKey: 'phoneGoal' },
      { id: 'trip', e: '‚úàÔ∏è', nameKey: 'trip' },
      { id: 'bike', e: 'üèçÔ∏è', nameKey: 'bike' },
      { id: 'emergency', e: 'üõ°Ô∏è', nameKey: 'emergency' },
      { id: 'wedding', e: 'üíí', nameKey: 'wedding' },
    ];
    const getGoals = () => GOALS_DATA.map(g => ({
      ...g,
      name: t(g.nameKey),
      amount: getGoalAmount(g.id)
    }));
    const getGoalName = (goal) => goal.customName || t(goal.nameKey) || goal.name;

    const $ = id => document.getElementById(id);
    const fmt = (n) => {
      const lang = getLang();
      const symbol = lang.symbol;
      const pos = lang.symbolPosition;
      const unit = lang.formatUnit;

      let formatted;
      // Different formatting based on currency type
      if (unit === 'tr') {
        // Vietnamese: use tri·ªáu (tr) and ngh√¨n (k)
        if (n >= 1000000) {
          formatted = (n / 1000000).toFixed(1).replace('.0', '') + 'tr';
        } else if (n >= 1000) {
          formatted = (n / 1000).toFixed(0) + 'k';
        } else {
          formatted = n.toString();
        }
      } else if (unit === '‰∏á' || unit === 'Îßå') {
        // Japanese/Chinese/Korean: use ‰∏á/Îßå (10k units)
        if (n >= 10000) {
          formatted = (n / 10000).toFixed(1).replace('.0', '') + unit;
        } else if (n >= 1000) {
          formatted = (n / 1000).toFixed(0) + 'k';
        } else {
          formatted = n.toString();
        }
      } else {
        // Western currencies (USD, EUR): use k and M
        if (n >= 1000000) {
          formatted = (n / 1000000).toFixed(1).replace('.0', '') + 'M';
        } else if (n >= 1000) {
          formatted = (n / 1000).toFixed(1).replace('.0', '') + 'k';
        } else {
          formatted = n.toString();
        }
      }

      if (pos === 'before') {
        return symbol + formatted;
      } else {
        return formatted + symbol;
      }
    };

    // Format large spendable amount for homepage display
    const formatSpendable = (n) => {
      const lang = getLang();
      const multiplier = lang.multiplier || 1000000;
      const unit = lang.formatUnit || 'tr';
      const symbol = lang.symbol;
      const pos = lang.symbolPosition;

      const value = (n / multiplier).toFixed(1).replace('.0', '');

      if (pos === 'before') {
        return `${symbol}${value}<span class="unit">${unit}</span>`;
      } else {
        return `${value}<span class="unit">${unit}</span>`;
      }
    };

    // AI-powered amount parser - understands various formats
    const parseAmount = (input) => {
      if (!input) return 0;
      const text = input.toString().toLowerCase().trim();
      const lang = getLang();

      // Remove currency symbols and spaces
      let clean = text.replace(/[$‚Ç¨¬•‚Ç´‚Ç©,\s]/g, '');

      // Parse different formats
      // Vietnamese: 50k, 1.5tr, 2 tri·ªáu, 500 ngh√¨n
      // English: 50k, 1.5m, 1.5 million, 500 thousand
      // Chinese: 50k, 1.5‰∏á, 100‰∏á
      // Japanese: 50k, 1.5‰∏á, 100‰∏á
      // Korean: 50k, 1.5Îßå, 100Îßå

      let multiplier = 1;

      // Check for multiplier keywords
      if (/tr(i·ªáu)?|million|m(?!\w)/i.test(clean)) {
        multiplier = 1000000;
        clean = clean.replace(/tr(i·ªáu)?|million|m(?!\w)/gi, '');
      } else if (/ngh√¨n|ng√†n|thousand|k(?!\w)/i.test(clean)) {
        multiplier = 1000;
        clean = clean.replace(/ngh√¨n|ng√†n|thousand|k(?!\w)/gi, '');
      } else if (/‰∏á|Îßå/i.test(clean)) {
        multiplier = 10000;
        clean = clean.replace(/‰∏á|Îßå/gi, '');
      } else if (/ÂÑÑ|Ïñµ/i.test(clean)) {
        multiplier = 100000000;
        clean = clean.replace(/ÂÑÑ|Ïñµ/gi, '');
      }

      // Parse the number
      const num = parseFloat(clean.replace(/[^\d.]/g, '')) || 0;
      return Math.round(num * multiplier);
    };

    const totalFixed = () => state.fixedExpenses.reduce((a, b) => a + (parseInt(b.amount) || 0), 0);
    const totalAllocation = () => Object.values(state.allocations).reduce((a, b) => a + (parseInt(b) || 0), 0);
    const spendable = () => (parseInt(state.income) || 0) - totalFixed() - totalAllocation();

    // ============= TIME HELPERS =============
    const getDaysRemainingInMonth = () => {
      const now = new Date();
      const lastDay = new Date(now.getFullYear(), now.getMonth() + 1, 0);
      return lastDay.getDate() - now.getDate();
    };

    const isToday = (timestamp) => {
      if (!timestamp) return true; // Legacy transactions without timestamp
      const date = new Date(timestamp);
      const today = new Date();
      return date.getDate() === today.getDate() &&
             date.getMonth() === today.getMonth() &&
             date.getFullYear() === today.getFullYear();
    };

    const isThisMonth = (timestamp) => {
      if (!timestamp) return true;
      const date = new Date(timestamp);
      const today = new Date();
      return date.getMonth() === today.getMonth() &&
             date.getFullYear() === today.getFullYear();
    };

    const formatDate = (timestamp) => {
      if (!timestamp) return t('today');
      const date = new Date(timestamp);
      const today = new Date();
      const yesterday = new Date(today);
      yesterday.setDate(yesterday.getDate() - 1);

      if (isToday(timestamp)) return t('today');
      if (date.getDate() === yesterday.getDate() &&
          date.getMonth() === yesterday.getMonth()) return t('yesterday');

      return date.toLocaleDateString(state.language, { day: 'numeric', month: 'short' });
    };

    // Filter transactions by today
    const getTodayTransactions = () => state.transactions.filter(tx => isToday(tx.timestamp));
    const getThisMonthTransactions = () => state.transactions.filter(tx => isThisMonth(tx.timestamp));

    const todaySpent = () => getTodayTransactions().reduce((a, b) => a + b.amount, 0);
    const monthSpent = () => getThisMonthTransactions().reduce((a, b) => a + b.amount, 0);

    // ============= CYCLE/BUFFER SYSTEM =============
    // Get the start date of current cycle based on cycleDay
    const getCycleStartDate = () => {
      const now = new Date();
      const cycleDay = state.cycleDay || 1;
      let cycleStart = new Date(now.getFullYear(), now.getMonth(), cycleDay);

      // If we haven't reached cycleDay this month, cycle started last month
      if (now.getDate() < cycleDay) {
        cycleStart = new Date(now.getFullYear(), now.getMonth() - 1, cycleDay);
      }
      return cycleStart;
    };

    // Get the next cycle reset date
    const getNextCycleDate = () => {
      const now = new Date();
      const cycleDay = state.cycleDay || 1;
      let nextCycle = new Date(now.getFullYear(), now.getMonth(), cycleDay);

      // If we've passed cycleDay, next cycle is next month
      if (now.getDate() >= cycleDay) {
        nextCycle = new Date(now.getFullYear(), now.getMonth() + 1, cycleDay);
      }
      return nextCycle;
    };

    // Get days remaining in current cycle
    const getDaysRemainingInCycle = () => {
      const now = new Date();
      const nextCycle = getNextCycleDate();
      const diffTime = nextCycle - now;
      return Math.ceil(diffTime / (1000 * 60 * 60 * 24));
    };

    // Check if a transaction is in current cycle
    const isInCurrentCycle = (timestamp) => {
      if (!timestamp) return true;
      const txDate = new Date(timestamp);
      const cycleStart = getCycleStartDate();
      return txDate >= cycleStart;
    };

    // Get transactions for current cycle
    const getCycleTransactions = () => state.transactions.filter(tx => isInCurrentCycle(tx.timestamp));

    // Total spent in current cycle
    const cycleSpent = () => getCycleTransactions().reduce((a, b) => a + b.amount, 0);

    // Calculate effective spendable (considering buffer mode and rollover)
    const getEffectiveSpendable = () => {
      const baseSpendable = spendable();
      if (state.cycleMode === 'rollover' && state.buffer > 0) {
        return baseSpendable + state.buffer;
      }
      return baseSpendable;
    };

    // Calculate next cycle values (called at cycle reset)
    const calculateNextCycleSpendable = () => {
      const baseSpendable = spendable();
      const currentRemaining = baseSpendable - cycleSpent();

      if (currentRemaining >= 0) {
        // C√≤n d∆∞
        if (state.cycleMode === 'reset') {
          return { spendable: baseSpendable, buffer: state.buffer };
        } else if (state.cycleMode === 'rollover') {
          return { spendable: baseSpendable + currentRemaining, buffer: 0 };
        } else {
          // Buffer mode: accumulate savings
          return { spendable: baseSpendable, buffer: state.buffer + currentRemaining };
        }
      } else {
        // Ti√™u qu√°
        const debtAmount = Math.abs(currentRemaining);
        if (state.debtHandling === 'forgive') {
          return { spendable: baseSpendable, buffer: state.buffer };
        } else {
          // Deduct from buffer first
          if (state.buffer >= debtAmount) {
            return { spendable: baseSpendable, buffer: state.buffer - debtAmount };
          } else {
            return { spendable: baseSpendable - (debtAmount - state.buffer), buffer: 0 };
          }
        }
      }
    };

    // Check and process cycle reset
    const checkCycleReset = () => {
      const now = new Date();
      const cycleStart = getCycleStartDate();
      const lastCycle = state.lastCycleDate ? new Date(state.lastCycleDate) : null;

      // If this is a new cycle (lastCycleDate is before current cycle start)
      if (!lastCycle || lastCycle < cycleStart) {
        const result = calculateNextCycleSpendable();
        state.buffer = result.buffer;
        state.lastCycleDate = cycleStart.toISOString();
        saveState();
      }
    };

    // ============= CELEBRATION SYSTEM =============
    const triggerConfetti = (count = 50) => {
      const colors = ['#8b5cf6', '#f97316', '#ec4899', '#10b981', '#fbbf24', '#3b82f6'];
      for (let i = 0; i < count; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.left = Math.random() * 100 + 'vw';
        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.animationDelay = Math.random() * 2 + 's';
        confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
        document.body.appendChild(confetti);
        setTimeout(() => confetti.remove(), 3500);
      }
    };

    const checkMilestones = () => {
      const milestones = [];

      // First expense logged
      if (state.totalExpensesLogged === 1 && !state.milestonesAchieved.includes('first_expense')) {
        milestones.push({ id: 'first_expense', icon: 'üéâ', title: t('firstExpenseTitle') || 'First Expense!', desc: t('firstExpenseDesc') || 'You\'re on your way!' });
      }

      // 10 expenses logged
      if (state.totalExpensesLogged >= 10 && !state.milestonesAchieved.includes('ten_expenses')) {
        milestones.push({ id: 'ten_expenses', icon: 'üåü', title: t('tenExpensesTitle') || 'Getting Organized!', desc: t('tenExpensesDesc') || '10 expenses tracked!' });
      }

      // Goal milestones (25%, 50%, 75%, 100%)
      state.goals.forEach(g => {
        const deposited = state.goalDeposits[g.id] || 0;
        const progress = g.amount > 0 ? Math.round((deposited / g.amount) * 100) : 0;
        const milestonePoints = [25, 50, 75, 100];

        milestonePoints.forEach(point => {
          const milestoneId = `goal_${g.id}_${point}`;
          if (progress >= point && !state.milestonesAchieved.includes(milestoneId)) {
            if (point === 100) {
              milestones.push({ id: milestoneId, icon: 'üèÜ', title: `${getGoalName(g)} ${t('completed') || 'Completed'}!`, desc: t('goalCompleteDesc') || 'Amazing achievement!' });
            } else {
              milestones.push({ id: milestoneId, icon: point === 75 ? 'üî•' : point === 50 ? 'üí™' : 'üå±', title: `${point}% ${t('toward') || 'toward'} ${getGoalName(g)}!`, desc: t('keepGoingDesc') || 'Keep it up!' });
            }
          }
        });
      });

      // Streak milestones
      const streakMilestones = [3, 7, 14, 30];
      streakMilestones.forEach(days => {
        const milestoneId = `streak_${days}`;
        if (state.streakDays >= days && !state.milestonesAchieved.includes(milestoneId)) {
          milestones.push({ id: milestoneId, icon: 'üî•', title: `${days} ${t('dayStreak') || 'Day Streak'}!`, desc: t('streakDesc') || 'You\'re on fire!' });
        }
      });

      return milestones;
    };

    const celebrateMilestone = (milestone) => {
      state.milestonesAchieved.push(milestone.id);
      state.showCelebration = milestone;
      triggerConfetti(milestone.id.includes('100') || milestone.id.includes('streak_30') ? 80 : 40);
      saveState();
    };

    window.dismissCelebration = () => {
      state.showCelebration = null;
      render();
    };

    const updateStreak = () => {
      const today = new Date().toDateString();
      if (state.lastActiveDate === today) return; // Already updated today

      const yesterday = new Date();
      yesterday.setDate(yesterday.getDate() - 1);

      if (state.lastActiveDate === yesterday.toDateString()) {
        state.streakDays++;
      } else if (state.lastActiveDate !== today) {
        state.streakDays = 1; // Reset streak
      }

      state.lastActiveDate = today;
      saveState();
    };

    // ============= MONI CHARACTER SYSTEM =============
    const getMoniMood = () => {
      const remaining = spendable() - todaySpent();
      const dailyBudget = spendable() / 30;
      const todayUsage = dailyBudget > 0 ? todaySpent() / dailyBudget : 0;
      const hasGoalProgress = state.goals.some(g => (state.goalDeposits[g.id] || 0) > 0);
      const streakActive = state.streakDays >= 3;

      // Determine Moni's mood based on context
      if (state.showCelebration) return 'celebrating';
      if (remaining < 0) return 'supportive'; // Over budget - be supportive, not judgmental
      if (todayUsage === 0 && remaining > dailyBudget * 0.5) return 'encouraging';
      if (todayUsage < 0.5) return 'happy';
      if (todayUsage < 1) return 'calm';
      if (hasGoalProgress) return 'proud';
      if (streakActive) return 'excited';
      return 'friendly';
    };

    const getMoniExpression = (mood) => {
      const expressions = {
        celebrating: 'üéâ',
        happy: 'üòä',
        excited: 'ü§©',
        proud: 'ü•≥',
        encouraging: 'üí™',
        calm: 'üòå',
        friendly: 'üåø',
        supportive: 'ü§ó',
      };
      return expressions[mood] || 'üåø';
    };

    const getMoniMessage = (mood) => {
      const messages = {
        celebrating: [t('moniCelebrating') || 'Woohoo! You did it!'],
        happy: [t('moniHappy') || 'Great day so far!'],
        excited: [t('moniExcited') || 'You\'re on a roll!'],
        proud: [t('moniProud') || 'Look at that progress!'],
        encouraging: [t('moniEncouraging') || 'Fresh start today!'],
        calm: [t('moniCalm') || 'Balanced and steady.'],
        friendly: [t('moniFriendly') || 'Hey there, friend!'],
        supportive: [t('moniSupportive') || 'Tomorrow is a new day!'],
      };
      const moodMessages = messages[mood] || messages.friendly;
      return moodMessages[Math.floor(Math.random() * moodMessages.length)];
    };

    const render = () => {
      const app = $('app');
      if (state.screen === 'language') renderLanguageSelection(app);
      else if (state.screen === 'splash') renderSplash(app);
      else if (state.screen === 'onboarding') renderOnboarding(app);
      else if (state.screen === 'main') renderMain(app);
    };

    // ============= LANGUAGE SELECTION SCREEN =============
    const renderLanguageSelection = (app) => {
      app.className = 'phone splash-bg';
      const langCards = Object.entries(LANGUAGES).map(([code, lang]) => `
        <button class="lang-card ${state.language === code ? 'selected' : ''}" onclick="selectLanguage('${code}')">
          <span class="lang-card-flag">${lang.flag}</span>
          <div class="lang-card-info">
            <div class="lang-card-name">${lang.label}</div>
            <div class="lang-card-currency">
              <span class="lang-card-currency-badge">${lang.currency}</span>
              <span>${lang.symbol}</span>
            </div>
          </div>
          <div class="lang-card-check">‚úì</div>
        </button>
      `).join('');

      app.innerHTML = `
        <div class="lang-screen">
          <div class="lang-screen-header">
            <div class="lang-screen-icon">üåç</div>
            <div class="lang-screen-title">Choose Language</div>
            <div class="lang-screen-subtitle">Select your preferred language and currency</div>
          </div>
          <div class="lang-list">
            ${langCards}
          </div>
          <div class="lang-screen-footer">
            <button class="btn" onclick="confirmLanguage()">Continue ‚Üí</button>
          </div>
        </div>
      `;
    };

    window.selectLanguage = (code) => {
      state.language = code;
      render();
    };

    window.confirmLanguage = () => {
      localStorage.setItem('moni_language', state.language);
      document.documentElement.lang = state.language;
      state.screen = 'splash';
      // Reset financial data for new currency
      state.income = '';
      state.fixedExpenses = getDefaultFixed();
      state.goals = [];
      state.allocations = {};
      state.transactions = []; // Start empty, user adds expenses
      render();
    };

    window.goToLanguageScreen = () => {
      state.screen = 'language';
      render();
    };

    window.switchTab = (tab) => {
      state.activeTab = tab;
      render();
    };

    const renderSplash = (app) => {
      app.className = 'phone splash-bg';

      app.innerHTML = `
        <div class="splash">
          <div></div>
          <div>
            <div class="splash-logo">üåø</div>
            <div class="splash-title">Moni</div>
            <div class="splash-tagline">${t('tagline')}</div>
          </div>
          <button class="btn white" onclick="startOnboarding()">${t('start')}</button>
        </div>
      `;
    };

    const renderOnboarding = (app) => {
      app.className = 'phone';
      const dots = [0,1,2,3,4,5,6].map(i => `<div class="dot ${i <= state.step ? 'active' : ''}"></div>`).join('');
      
      if (state.step === 0) {
        app.innerHTML = `
          <div class="header">
            <button class="btn-back" onclick="goSplash()">‚Üê</button>
            <div class="progress-dots">${dots}</div>
            <div style="width:44px"></div>
          </div>
          <div class="content">
            <div class="ob-center">
              <div class="ob-icon">üëã</div>
              <div class="ob-title">${t('welcomeTitle')}</div>
              <div class="ob-desc">${t('welcomeDesc')}</div>
            </div>
            <div style="margin-top:40px">
              <label style="font-size:14px;font-weight:600;color:var(--text-soft);display:block;margin-bottom:12px">${t('nameLabel')}</label>
              <input id="nameInput" class="input" style="text-align:center;font-weight:600" placeholder="${t('namePlaceholder')}" value="${state.userName}" onkeyup="state.userName=this.value;updateBtn()">
            </div>
          </div>
          <div class="footer">
            <button class="btn" id="nextBtn" ${state.userName.trim() ? '' : 'disabled'} onclick="nextStep()">${t('continue')}</button>
          </div>
        `;
        return;
      }

      if (state.step === 1) {
        const archetypes = getArchetypes();
        if (state.quizStep === -1) {
          app.innerHTML = `
            <div class="header">
              <button class="btn-back" onclick="prevStep()">‚Üê</button>
              <div class="progress-dots">${dots}</div>
              <div style="width:44px"></div>
            </div>
            <div class="content">
              <div class="ob-center" style="margin-bottom:20px">
                <div class="ob-icon">ü™û</div>
                <div class="ob-title">${t('quizTitle')}</div>
                <div class="ob-desc">${t('quizDesc')}</div>
              </div>
              <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px">
                <div style="background:linear-gradient(135deg, #8b5cf6, #a78bfa);border-radius:20px;padding:20px;color:white;text-align:center">
                  <div style="font-size:36px;margin-bottom:8px">‚ú®</div>
                  <div style="font-size:15px;font-weight:700">${t('theDreamer')}</div>
                  <div style="font-size:12px;opacity:0.9;margin-top:4px">${t('dreamerTag')}</div>
                </div>
                <div style="background:linear-gradient(135deg, #f97316, #fb923c);border-radius:20px;padding:20px;color:white;text-align:center">
                  <div style="font-size:36px;margin-bottom:8px">üé¢</div>
                  <div style="font-size:15px;font-weight:700">${t('theExperiencer')}</div>
                  <div style="font-size:12px;opacity:0.9;margin-top:4px">${t('experiencerTag')}</div>
                </div>
                <div style="background:linear-gradient(135deg, #ec4899, #f472b6);border-radius:20px;padding:20px;color:white;text-align:center">
                  <div style="font-size:36px;margin-bottom:8px">üíù</div>
                  <div style="font-size:15px;font-weight:700">${t('theGiver')}</div>
                  <div style="font-size:12px;opacity:0.9;margin-top:4px">${t('giverTag')}</div>
                </div>
                <div style="background:linear-gradient(135deg, #10b981, #34d399);border-radius:20px;padding:20px;color:white;text-align:center">
                  <div style="font-size:36px;margin-bottom:8px">üéØ</div>
                  <div style="font-size:15px;font-weight:700">${t('thePlanner')}</div>
                  <div style="font-size:12px;opacity:0.9;margin-top:4px">${t('plannerTag')}</div>
                </div>
              </div>
              <div style="margin-top:20px;padding:16px;background:var(--purple-light);border-radius:16px;text-align:center">
                <div style="font-size:14px;color:#6b21a8">${t('quizAccompany')}</div>
              </div>
            </div>
            <div class="footer">
              <button class="btn" onclick="startQuiz()">${t('startQuiz')}</button>
              <button class="btn secondary" onclick="skipQuiz()">${t('skip')}</button>
            </div>
          `;
        } else {
          const quiz = getQuiz();
          const q = quiz[state.quizStep];
          app.innerHTML = `
            <div class="header">
              <button class="btn-back" onclick="quizBack()">‚Üê</button>
              <div class="quiz-progress">
                <div class="quiz-bar"><div class="quiz-bar-fill" style="width:${((state.quizStep + 1) / 4) * 100}%"></div></div>
                <span class="quiz-count">${state.quizStep + 1}/4</span>
              </div>
              <div style="width:44px"></div>
            </div>
            <div class="content">
              <div class="quiz-badge">ü™û Money Personality</div>
              <div class="quiz-question">${q.q}</div>
              ${q.opts.map(opt => `
                <button class="quiz-option" onclick="answerQuiz('${opt.type}')">
                  <span class="quiz-option-icon">${opt.e}</span>
                  <span class="quiz-option-text">${opt.text}</span>
                </button>
              `).join('')}
            </div>
          `;
        }
        return;
      }

      if (state.step === 2) {
        const archetypes = getArchetypes();
        const arch = archetypes[state.archetype];
        app.innerHTML = `
          <div class="header">
            <button class="btn-back" onclick="backToQuiz()">‚Üê</button>
            <div class="progress-dots">${dots}</div>
            <div style="width:44px"></div>
          </div>
          <div class="content">
            <div style="text-align:center;margin-bottom:8px"><span class="quiz-badge">${t('thisIsYou')}</span></div>
            <div class="result-card" style="background:linear-gradient(135deg, ${arch.color}, ${arch.color}dd)">
              <div class="result-emoji">${arch.emoji}</div>
              <div class="result-type">${arch.name}</div>
              <div class="result-tag">${arch.tag}</div>
            </div>
            <p class="result-desc">${t(arch.descKey)}</p>
          </div>
          <div class="footer"><button class="btn" onclick="nextStep()">${t('continue')}</button></div>
        `;
        return;
      }

      if (state.step === 3) {
        const lang = getLang();
        const presets = getIncomePresets();
        const presetLabels = lang.incomePresets;

        app.innerHTML = `
          <div class="header">
            <button class="btn-back" onclick="prevStep()">‚Üê</button>
            <div class="progress-dots">${dots}</div>
            <div style="width:44px"></div>
          </div>
          <div class="content">
            <div class="ob-center">
              <div class="ob-icon">üí∞</div>
              <div class="ob-title">${t('incomeTitle')}</div>
              <div class="ob-desc">${t('incomeDesc')}</div>
            </div>
            <div class="income-input-wrap">
              <input id="incomeInput" class="income-input" placeholder="${formatCurrency(presets[2])}" value="${state.income ? parseInt(state.income).toLocaleString() : ''}" onkeyup="handleIncome(this)">
              <span class="income-unit">${lang.currency}</span>
            </div>
            <div style="text-align:center;font-size:13px;color:var(--text-muted);margin:-8px 0 16px">${t('smartInputHint')}</div>
            <div class="presets">
              ${presets.map((val, i) => `<button class="preset ${parseInt(state.income) === val ? 'active' : ''}" onclick="setIncome(${val})">${lang.symbolPosition === 'before' ? lang.symbol : ''}${presetLabels[i]}${lang.formatUnit}${lang.symbolPosition === 'after' ? lang.symbol : ''}</button>`).join('')}
            </div>
            <div class="privacy-note"><span>üîí</span><span>${t('privacyNote')}</span></div>
          </div>
          <div class="footer"><button class="btn" id="nextBtn" ${state.income ? '' : 'disabled'} onclick="nextStep()">${t('continue')}</button></div>
        `;
        return;
      }

      // Step 4: Fixed Expenses
      if (state.step === 4) {
        const fixed = totalFixed();
        const addModal = state.showAddFixed ? `
          <div style="position:absolute;inset:0;background:rgba(0,0,0,0.5);display:flex;align-items:flex-end;z-index:100">
            <div style="background:var(--bg);border-top-left-radius:28px;border-top-right-radius:28px;padding:24px;width:100%">
              <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:24px">
                <span style="font-size:20px;font-weight:700">${t('addFixedTitle')}</span>
                <button onclick="state.showAddFixed=false;render()" style="width:36px;height:36px;background:var(--card);border:1px solid var(--border);border-radius:18px;font-size:18px;cursor:pointer">√ó</button>
              </div>
              <div style="margin-bottom:16px">
                <label style="font-size:13px;font-weight:600;color:var(--text-muted);display:block;margin-bottom:8px">${t('expenseName')}</label>
                <input id="newFixedName" class="input" placeholder="${t('expenseNamePlaceholder')}">
              </div>
              <div style="margin-bottom:24px">
                <label style="font-size:13px;font-weight:600;color:var(--text-muted);display:block;margin-bottom:8px">${t('amountPerMonth')}</label>
                <input id="newFixedAmount" class="input" placeholder="500,000" style="font-size:20px;font-weight:600;text-align:center">
              </div>
              <button class="btn" onclick="addCustomFixed()">${t('add')}</button>
            </div>
          </div>
        ` : '';

        app.innerHTML = `
          <div class="header">
            <button class="btn-back" onclick="prevStep()">‚Üê</button>
            <div class="progress-dots">${dots}</div>
            <div style="width:44px"></div>
          </div>
          <div class="content">
            <div class="ob-center" style="margin-bottom:24px">
              <div class="ob-icon">üè†</div>
              <div class="ob-title">${t('fixedTitle')}</div>
              <div class="ob-desc">${t('fixedDesc')}</div>
            </div>
            <div style="display:flex;flex-direction:column;gap:12px">
              ${state.fixedExpenses.map((f, idx) => `
                <div style="display:flex;align-items:center;gap:12px;background:var(--card);border:1px solid var(--border);border-radius:14px;padding:12px 16px">
                  <span style="font-size:24px">${f.e}</span>
                  <span style="flex:1;font-size:15px;color:var(--text)">${getFixedName(f)}</span>
                  <input
                    id="fixed_${idx}"
                    style="width:110px;padding:10px 12px;border:1px solid var(--border);border-radius:10px;font-size:15px;text-align:right;font-family:inherit"
                    placeholder="0"
                    value="${f.amount ? parseInt(f.amount).toLocaleString() : ''}"
                    onblur="updateFixedAmount(${idx}, this.value)"
                  >
                  <button onclick="removeFixed(${idx})" style="width:32px;height:32px;background:#fee2e2;border:none;border-radius:8px;color:#ef4444;font-size:16px;cursor:pointer">√ó</button>
                </div>
              `).join('')}
              <button onclick="state.showAddFixed=true;render()" style="display:flex;align-items:center;justify-content:center;gap:8px;padding:16px;background:var(--card);border:2px dashed var(--border);border-radius:14px;color:var(--text-muted);font-size:15px;cursor:pointer;font-family:inherit">
                <span style="font-size:20px">+</span> ${t('addOther')}
              </button>
            </div>
            <div style="margin-top:20px;padding:16px;background:var(--bg);border-radius:14px;display:flex;justify-content:space-between;align-items:center">
              <span style="font-size:14px;color:var(--text-soft)">${t('totalFixed')}</span>
              <span data-fixed-total style="font-size:18px;font-weight:700;color:var(--orange)">${fmt(fixed)}/${t('months').charAt(0)}</span>
            </div>
          </div>
          <div class="footer"><button class="btn" onclick="nextStep()">${t('continue')}</button></div>
          ${addModal}
        `;
        return;
      }

      // Step 5: Goals
      if (state.step === 5) {
        const selectedIds = state.goals.map(g => g.id);
        const goals = getGoals();
        const available = goals.filter(g => !selectedIds.includes(g.id));

        const addModal = state.showAddGoal ? `
          <div style="position:absolute;inset:0;background:rgba(0,0,0,0.5);display:flex;align-items:flex-end;z-index:100">
            <div style="background:var(--bg);border-top-left-radius:28px;border-top-right-radius:28px;padding:24px;width:100%">
              <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:24px">
                <span style="font-size:20px;font-weight:700">${t('createGoalTitle')}</span>
                <button onclick="state.showAddGoal=false;render()" style="width:36px;height:36px;background:var(--card);border:1px solid var(--border);border-radius:18px;font-size:18px;cursor:pointer">√ó</button>
              </div>
              <div style="margin-bottom:16px">
                <label style="font-size:13px;font-weight:600;color:var(--text-muted);display:block;margin-bottom:8px">${t('goalName')}</label>
                <input id="newGoalName" class="input" placeholder="${t('goalNamePlaceholder')}">
              </div>
              <div style="margin-bottom:24px">
                <label style="font-size:13px;font-weight:600;color:var(--text-muted);display:block;margin-bottom:8px">${t('amountNeeded')}</label>
                <input id="newGoalAmount" class="input" placeholder="10,000,000" style="font-size:20px;font-weight:600;text-align:center">
              </div>
              <button class="btn" onclick="addCustomGoal()">${t('addGoal')}</button>
            </div>
          </div>
        ` : '';

        app.innerHTML = `
          <div class="header">
            <button class="btn-back" onclick="prevStep()">‚Üê</button>
            <div class="progress-dots">${dots}</div>
            <div style="width:44px"></div>
          </div>
          <div class="content">
            <div class="ob-center">
              <div class="ob-icon">üéØ</div>
              <div class="ob-title">${t('goalsTitle')}</div>
              <div class="ob-desc">${t('goalsDesc')}</div>
            </div>
            ${state.goals.length > 0 ? `<div class="selected-goals">${state.goals.map(g => `
              <div class="selected-goal">
                <span class="selected-goal-icon">${g.e}</span>
                <div class="selected-goal-info">
                  <div class="selected-goal-name">${getGoalName(g)}</div>
                  <div class="selected-goal-amount">${fmt(g.amount)}</div>
                </div>
                <button class="selected-goal-remove" onclick="removeGoal('${g.id}')">√ó</button>
              </div>
            `).join('')}</div>` : ''}
            <div class="goal-grid" style="margin-top:${state.goals.length > 0 ? '16px' : '24px'}">
              ${available.map(g => `
                <div class="goal-item" onclick="${state.goals.length < 3 ? `addGoal('${g.id}')` : ''}">
                  <span class="goal-item-icon">${g.e}</span>
                  <span class="goal-item-name">${g.name}</span>
                </div>
              `).join('')}
              ${state.goals.length < 3 ? `
                <div class="goal-item" onclick="state.showAddGoal=true;render()" style="border-style:dashed;background:transparent">
                  <span class="goal-item-icon" style="font-size:28px;opacity:0.6">+</span>
                </div>
              ` : ''}
            </div>
          </div>
          <div class="footer"><button class="btn" ${state.goals.length > 0 ? '' : 'disabled'} onclick="nextStep()">${t('continue')} (${state.goals.length}/3) ‚Üí</button></div>
          ${addModal}
        `;
        return;
      }

      // Step 6: Allocation
      if (state.step === 6) {
        const lang = getLang();
        const incomeVal = parseInt(state.income) || 0;
        const fixed = totalFixed();
        const allocated = totalAllocation();
        const remaining = spendable();
        app.innerHTML = `
          <div class="header">
            <button class="btn-back" onclick="prevStep()">‚Üê</button>
            <div class="progress-dots">${dots}</div>
            <div style="width:44px"></div>
          </div>
          <div class="content">
            <div class="ob-center" style="margin-bottom:24px">
              <div class="ob-icon">üí∏</div>
              <div class="ob-title">${t('allocationTitle')}</div>
              <div class="ob-desc">${t('allocationDesc')}</div>
            </div>
            ${state.goals.map((g, idx) => {
              const alloc = state.allocations[g.id] || '';
              const monthly = parseInt(alloc) || 0;
              const months = monthly > 0 ? Math.ceil(g.amount / monthly) : 0;
              return `
                <div class="allocation-card">
                  <div class="allocation-header">
                    <span class="allocation-icon">${g.e}</span>
                    <div>
                      <div class="allocation-name">${getGoalName(g)}</div>
                      <div class="allocation-target">${t('target')}: ${fmt(g.amount)}</div>
                    </div>
                  </div>
                  <div class="allocation-input-row">
                    <input id="alloc_${idx}" class="allocation-input" placeholder="0" value="${alloc ? parseInt(alloc).toLocaleString() : ''}" onblur="updateAllocation('${g.id}', this.value)">
                    <span class="allocation-per">${lang.currency} / ${t('months').slice(0,2)}</span>
                  </div>
                  <div class="allocation-time" data-time-${idx}>${monthly > 0 ? `${t('reachGoalIn')} <strong>${months} ${t('months')}</strong>` : ''}</div>
                </div>
              `;
            }).join('')}
            <div style="background:var(--card);border:1px solid var(--border);border-radius:16px;padding:20px;margin-top:8px">
              <div style="display:flex;justify-content:space-between;margin-bottom:12px">
                <span style="color:var(--text-muted);font-size:14px">${t('income')}</span>
                <span style="font-weight:600">${fmt(incomeVal)}</span>
              </div>
              <div style="display:flex;justify-content:space-between;margin-bottom:12px">
                <span style="color:var(--text-muted);font-size:14px">${t('fixedExpenses')}</span>
                <span style="font-weight:600;color:var(--text-soft)">${fmt(fixed)}</span>
              </div>
              <div style="display:flex;justify-content:space-between;margin-bottom:12px">
                <span style="color:var(--text-muted);font-size:14px">${t('savingForGoals')}</span>
                <span data-alloc-total style="font-weight:600;color:var(--orange)">${fmt(allocated)}</span>
              </div>
              <div style="border-top:1px solid var(--border);padding-top:12px;display:flex;justify-content:space-between">
                <span style="font-weight:600">${t('spendComfortably')}</span>
                <span data-remain-total style="font-weight:700;font-size:18px;color:${remaining >= 0 ? 'var(--green)' : '#ef4444'}">${fmt(remaining)}</span>
              </div>
            </div>
          </div>
          <div class="footer"><button class="btn" data-finish-btn ${allocated > 0 && remaining >= 0 ? '' : 'disabled'} onclick="finishOnboarding()">${t('finish')}</button></div>
        `;
        return;
      }
    };

    const renderMain = (app) => {
      app.className = 'phone';
      // Check for cycle reset on each render
      checkCycleReset();
      // Use cycle-based spending instead of daily
      const effectiveSpendable = getEffectiveSpendable();
      const remaining = effectiveSpendable - cycleSpent();
      const archetypes = getArchetypes();
      const arch = archetypes[state.archetype];

      // Apply archetype-specific theme color
      const archColor = arch?.color || '#8b5cf6';
      document.documentElement.style.setProperty('--primary', archColor);

      // Archetype-specific encouraging messages (cached for the day)
      const getArchetypeQuote = () => {
        const quotes = {
          dreamer: [
            t('dreamerQuote1') || 'Dreams become reality, one step at a time ‚ú®',
            t('dreamerQuote2') || 'Your vision is your compass üåü',
            t('dreamerQuote3') || 'Big things start with small savings üí´'
          ],
          experiencer: [
            t('experiencerQuote1') || 'Life is made of moments worth funding üé¢',
            t('experiencerQuote2') || 'Adventures await, you\'re preparing well! üåà',
            t('experiencerQuote3') || 'Each save brings new experiences closer üéØ'
          ],
          giver: [
            t('giverQuote1') || 'Your generosity starts with self-care üíù',
            t('giverQuote2') || 'Secure your mask first, then help others ü§ù',
            t('giverQuote3') || 'Financial wellness lets you give more üíï'
          ],
          planner: [
            t('plannerQuote1') || 'Every detail matters, you\'re on track üìã',
            t('plannerQuote2') || 'Systematic progress leads to success üéØ',
            t('plannerQuote3') || 'Your plan is working beautifully ‚úÖ'
          ]
        };
        const typeQuotes = quotes[state.archetype] || quotes.dreamer;
        // Use day of year as index to keep same quote all day
        const dayOfYear = Math.floor((Date.now() - new Date(new Date().getFullYear(), 0, 0)) / 86400000);
        return typeQuotes[dayOfYear % typeQuotes.length];
      };

      // Simple text-based add expense modal
      const addExpenseModal = state.showAddExpense ? `
        <div style="position:absolute;inset:0;background:rgba(0,0,0,0.5);display:flex;align-items:flex-end;z-index:100" onclick="if(event.target===this)closeAddExpense()">
          <div style="background:var(--bg);border-top-left-radius:28px;border-top-right-radius:28px;padding:24px;width:100%">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px">
              <span style="font-size:20px;font-weight:700">${t('addExpenseTitle')}</span>
              <button onclick="closeAddExpense()" style="width:36px;height:36px;background:var(--card);border:1px solid var(--border);border-radius:18px;font-size:18px;cursor:pointer">√ó</button>
            </div>
            <div style="margin-bottom:20px">
              <input id="expenseText" class="input" placeholder="${t('expenseTextPlaceholder')}" style="font-size:18px;padding:16px" onkeydown="if(event.key==='Enter')parseAndAddExpense()">
              <div style="font-size:12px;color:var(--text-muted);margin-top:8px;padding:0 4px">${t('expenseTextHint')}</div>
            </div>
            <button class="btn" onclick="parseAndAddExpense()">${t('addExpense')}</button>
          </div>
        </div>
      ` : '';

      // Add Goal Modal
      const addGoalModal = state.showAddGoal ? `
        <div style="position:absolute;inset:0;background:rgba(0,0,0,0.5);display:flex;align-items:flex-end;z-index:100" onclick="if(event.target===this)closeAddGoal()">
          <div style="background:var(--bg);border-top-left-radius:28px;border-top-right-radius:28px;padding:24px;width:100%">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px">
              <span style="font-size:20px;font-weight:700">üéØ ${t('addGoal') || 'Th√™m m·ª•c ti√™u'}</span>
              <button onclick="closeAddGoal()" style="width:36px;height:36px;background:var(--card);border:1px solid var(--border);border-radius:18px;font-size:18px;cursor:pointer">√ó</button>
            </div>
            ${state.goals.length >= 3 ? `
              <div style="text-align:center;padding:24px;color:var(--text-muted)">
                <div style="font-size:32px;margin-bottom:12px">üéØ</div>
                <div style="font-size:14px">${t('maxGoalsReached') || 'B·∫°n ƒë√£ c√≥ t·ªëi ƒëa 3 m·ª•c ti√™u'}</div>
              </div>
            ` : `
              <div style="margin-bottom:16px">
                <label style="font-size:13px;font-weight:600;color:var(--text-muted);display:block;margin-bottom:8px">${t('goalName') || 'T√™n m·ª•c ti√™u'}</label>
                <input id="newGoalNameInput" class="input" placeholder="${t('goalNamePlaceholder') || 'VD: MacBook, Du l·ªãch ƒê√† L·∫°t...'}" style="font-size:16px">
              </div>
              <div style="margin-bottom:20px">
                <label style="font-size:13px;font-weight:600;color:var(--text-muted);display:block;margin-bottom:8px">${t('amountNeeded') || 'S·ªë ti·ªÅn c·∫ßn'}</label>
                <input id="newGoalAmountInput" class="input" placeholder="5,000,000" style="font-size:18px;font-weight:600">
              </div>
              <div style="margin-bottom:20px">
                <label style="font-size:13px;font-weight:600;color:var(--text-muted);display:block;margin-bottom:8px">${t('chooseEmoji') || 'Ch·ªçn bi·ªÉu t∆∞·ª£ng'}</label>
                <div style="display:flex;flex-wrap:wrap;gap:8px">
                  ${['üéØ', '‚úàÔ∏è', 'üè†', 'üíª', 'üì±', 'üéì', 'üíç', 'üöó', 'üëú', '‚åö', 'üé∏', 'üì∑'].map(e => `
                    <button onclick="selectGoalEmoji('${e}')" style="width:44px;height:44px;border-radius:12px;border:2px solid ${state.selectedGoalEmoji === e ? 'var(--primary)' : 'var(--border)'};background:${state.selectedGoalEmoji === e ? 'var(--primary)' + '15' : 'var(--card)'};font-size:20px;cursor:pointer;transition:all 0.2s">${e}</button>
                  `).join('')}
                </div>
              </div>
              <button class="btn" onclick="submitNewGoal()">${t('addGoal') || 'Th√™m m·ª•c ti√™u'}</button>
            `}
          </div>
        </div>
      ` : '';

      // Add Fixed Expense Modal
      const addFixedModal = state.showAddFixed ? `
        <div style="position:absolute;inset:0;background:rgba(0,0,0,0.5);display:flex;align-items:flex-end;z-index:100" onclick="if(event.target===this)closeAddFixed()">
          <div style="background:var(--bg);border-top-left-radius:28px;border-top-right-radius:28px;padding:24px;width:100%">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px">
              <span style="font-size:20px;font-weight:700">üì¶ ${t('addFixedExpense') || 'Th√™m chi ph√≠ c·ªë ƒë·ªãnh'}</span>
              <button onclick="closeAddFixed()" style="width:36px;height:36px;background:var(--card);border:1px solid var(--border);border-radius:18px;font-size:18px;cursor:pointer">√ó</button>
            </div>
            <div style="margin-bottom:16px">
              <label style="font-size:13px;font-weight:600;color:var(--text-muted);display:block;margin-bottom:8px">${t('expenseName') || 'T√™n kho·∫£n chi'}</label>
              <input id="newFixedNameInput" class="input" placeholder="${t('expenseNamePlaceholder') || 'VD: Gym, Netflix...'}" style="font-size:16px">
            </div>
            <div style="margin-bottom:20px">
              <label style="font-size:13px;font-weight:600;color:var(--text-muted);display:block;margin-bottom:8px">${t('amountPerMonth') || 'S·ªë ti·ªÅn / th√°ng'}</label>
              <input id="newFixedAmountInput" class="input" placeholder="500,000" style="font-size:18px;font-weight:600">
            </div>
            <button class="btn" onclick="submitNewFixed()">${t('add') || 'Th√™m'}</button>
          </div>
        </div>
      ` : '';

      // Generic Input Modal - reusable for deposit, withdraw, edit income, etc.
      const inputModal = state.inputModal ? `
        <div style="position:absolute;inset:0;background:rgba(0,0,0,0.5);display:flex;align-items:flex-end;z-index:100" onclick="if(event.target===this)closeInputModal()">
          <div style="background:var(--bg);border-top-left-radius:28px;border-top-right-radius:28px;padding:24px;width:100%">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px">
              <span style="font-size:20px;font-weight:700">${state.inputModal.icon || ''} ${state.inputModal.title}</span>
              <button onclick="closeInputModal()" style="width:36px;height:36px;background:var(--card);border:1px solid var(--border);border-radius:18px;font-size:18px;cursor:pointer">√ó</button>
            </div>
            ${state.inputModal.subtitle ? `<div style="font-size:14px;color:var(--text-muted);margin-bottom:16px">${state.inputModal.subtitle}</div>` : ''}
            <div style="margin-bottom:20px">
              <input id="genericModalInput" class="input" type="${state.inputModal.type || 'text'}" placeholder="${state.inputModal.placeholder || ''}" value="${state.inputModal.value || ''}" style="font-size:18px;font-weight:600;${state.inputModal.inputStyle || ''}" onkeydown="if(event.key==='Enter')submitInputModal()">
              ${state.inputModal.hint ? `<div style="font-size:12px;color:var(--text-muted);margin-top:8px">${state.inputModal.hint}</div>` : ''}
            </div>
            ${state.inputModal.error ? `<div style="color:#ef4444;font-size:13px;margin-bottom:12px">${state.inputModal.error}</div>` : ''}
            <button class="btn" onclick="submitInputModal()">${state.inputModal.buttonText || 'OK'}</button>
          </div>
        </div>
      ` : '';

      // Chat response section
      let chatSection = '';
      if (state.chatLoading) {
        chatSection = `
          <div class="response show">
            <div class="response-bubble">
              <div class="typing">
                <span></span><span></span><span></span>
              </div>
            </div>
          </div>
        `;
      } else if (state.chatResponse) {
        // Calculate goal impact for permission engine
        const purchaseAmount = state.chatParsed?.amount || 0;
        const remainingAfter = remaining - purchaseAmount;
        const affectsGoals = purchaseAmount > (remaining * 0.3); // >30% affects goals
        const goalImpactText = state.goals.length > 0
          ? (affectsGoals
              ? `‚ö†Ô∏è ${t('mayAffectGoals') || 'May slow down goals'}`
              : `‚úì ${t('noGoalImpact') || 'Won\'t affect your goals'}`)
          : '';

        chatSection = `
          <div class="response show">
            <div class="response-bubble">
              <div class="response-text">${state.chatResponse}</div>
              ${state.chatParsed ? `
                <div style="background:var(--bg);border-radius:12px;padding:12px;margin:12px 0">
                  ${goalImpactText ? `<div style="font-size:13px;color:${affectsGoals ? 'var(--orange)' : 'var(--green)'};margin-bottom:8px">${goalImpactText}</div>` : ''}
                  <div style="font-size:13px;color:var(--text-muted)">‚úì ${t('afterPurchase')}: <strong style="color:var(--text)">${fmt(remainingAfter)}</strong> ${t('leftRemaining')}</div>
                </div>
                <div class="response-actions">
                  <button class="res-btn primary" onclick="confirmChatPurchase()">${t('bought')}</button>
                  <button class="res-btn secondary" onclick="clearChat()">${t('cancel')}</button>
                </div>
              ` : `
                <div class="response-actions">
                  <button class="res-btn secondary" onclick="clearChat()" style="flex:none;width:100%">${t('close')}</button>
                </div>
              `}
            </div>
          </div>
        `;
      }

      // Home tab content
      const celebrationBanner = state.showCelebration ? `
        <div class="celebration-banner">
          <div class="icon">${state.showCelebration.icon}</div>
          <div class="text">
            <div class="title">${state.showCelebration.title}</div>
            <div class="desc">${state.showCelebration.desc}</div>
          </div>
          <button class="dismiss" onclick="dismissCelebration()">√ó</button>
        </div>
      ` : '';
      const streakBadge = state.streakDays >= 3 ? `<span class="streak-badge">üî• ${state.streakDays} ${t('days') || 'days'}</span>` : '';
      // Calculate spending stats
      const spent = cycleSpent();
      const monthlyBudget = state.income - totalFixed();
      const spentPercent = monthlyBudget > 0 ? Math.min(100, Math.round((spent / monthlyBudget) * 100)) : 0;

      const homeContent = `
        ${celebrationBanner}

        <!-- Header -->
        <div class="home-header slide-up">
          <div>
            <div class="home-greeting">Xin ch√†o üëã</div>
            <div class="home-name">${state.userName} ${streakBadge}</div>
          </div>
          <div class="home-avatar">${state.userName?.charAt(0)?.toUpperCase() || 'M'}</div>
        </div>

        <!-- Main Balance Card -->
        <div class="main-card slide-up" style="animation-delay:0.1s">
          <div class="main-card-top">
            <div>
              <div class="main-card-label">${t('spendableLabel') || 'C√≥ th·ªÉ chi ti√™u'}</div>
              <div class="main-card-amount">${formatSpendable(remaining > 0 ? remaining : 0)}</div>
              <div class="main-card-sub">‚âà ${fmt(remaining > 0 ? remaining : 0)}</div>
            </div>
            <div class="main-card-badge">
              <div class="main-card-badge-label">C√≤n l·∫°i</div>
              <div class="main-card-badge-value">${getDaysRemainingInCycle()} ng√†y</div>
            </div>
          </div>
          <div class="main-card-progress">
            <div class="main-card-progress-header">
              <span class="main-card-progress-label">ƒê√£ chi th√°ng n√†y</span>
              <span class="main-card-progress-value">${fmt(spent)} / ${fmt(monthlyBudget)}</span>
            </div>
            <div class="main-card-progress-bar">
              <div class="main-card-progress-fill" style="width:${spentPercent}%"></div>
            </div>
          </div>
        </div>

        <!-- Quick Stats -->
        <div class="quick-stats slide-up" style="animation-delay:0.2s">
          <div class="glass-card stat-card">
            <div class="stat-icon buffer">üõ°Ô∏è</div>
            <div>
              <div class="stat-label">Qu·ªπ d·ª± ph√≤ng</div>
              <div class="stat-value">${fmt(state.buffer || 0)}</div>
            </div>
          </div>
          <div class="glass-card stat-card">
            <div class="stat-icon compare">üìä</div>
            <div>
              <div class="stat-label">Ng√†y reset</div>
              <div class="stat-value">${state.cycleDay || 1}</div>
            </div>
          </div>
        </div>

        <!-- Goals Section -->
        <div class="section-header slide-up" style="animation-delay:0.3s">
          <span class="section-title">${t('yourGoals') || 'M·ª•c ti√™u'}</span>
          <span class="section-link" onclick="switchTab('goals')">Xem t·∫•t c·∫£ ‚Üí</span>
        </div>
        <div class="goal-cards slide-up" style="animation-delay:0.3s">
          ${state.goals.slice(0, 2).map((g, i) => {
            const deposited = state.goalDeposits[g.id] || 0;
            const progress = Math.min(100, Math.round((deposited / g.amount) * 100));
            const isComplete = progress >= 100;
            return `
              <div class="glass-card goal-card" onclick="switchTab('goals')">
                <div class="goal-card-icon">${g.e}</div>
                <div class="goal-card-info">
                  <div class="goal-card-header">
                    <span class="goal-card-name">${getGoalName(g)}</span>
                    <span class="goal-card-percent ${isComplete ? 'complete' : ''}">${isComplete ? '‚úì Ho√†n th√†nh' : progress + '%'}</span>
                  </div>
                  <div class="goal-card-progress-bar">
                    <div class="goal-card-progress-fill ${isComplete ? 'complete' : ''}" style="width:${progress}%"></div>
                  </div>
                  <div class="goal-card-meta">${fmt(deposited)} / ${fmt(g.amount)}</div>
                </div>
              </div>
            `;
          }).join('')}
        </div>

        <!-- Today's Transactions -->
        <div class="section-header slide-up" style="animation-delay:0.4s">
          <span class="section-title">Giao d·ªãch h√¥m nay</span>
          <span class="section-link" onclick="switchTab('history')">L·ªãch s·ª≠ ‚Üí</span>
        </div>
        <div class="tx-cards slide-up" style="animation-delay:0.4s">
          ${getTodayTransactions().length > 0 ? getTodayTransactions().slice(0, 4).map(tx => {
            const txTime = new Date(tx.date);
            const timeStr = txTime.getHours().toString().padStart(2,'0') + ':' + txTime.getMinutes().toString().padStart(2,'0');
            return `
              <div class="glass-card tx-card">
                <div class="tx-card-left">
                  <div class="tx-card-icon">${tx.emoji}</div>
                  <div>
                    <div class="tx-card-name">${tx.name}</div>
                    <div class="tx-card-time">${timeStr}</div>
                  </div>
                </div>
                <div class="tx-card-amount">-${fmt(tx.amount)}</div>
              </div>
            `;
          }).join('') : `
            <div class="glass-card" style="text-align:center;padding:32px;color:var(--text-muted)">
              <div style="font-size:40px;margin-bottom:12px">‚ú®</div>
              <div style="font-size:14px">${t('noExpensesYet') || 'Ch∆∞a c√≥ giao d·ªãch h√¥m nay'}</div>
            </div>
          `}
        </div>

        <div style="height:80px"></div>

        <!-- FAB Button -->
        <button class="fab-btn" onclick="document.getElementById('askInput').focus()">+</button>

        <!-- Ask Moni Section -->
        <div class="ask-section">
          <div class="ask-container">
            <div class="ask-row">
              <div class="ask-icon">üåø</div>
              <input type="text" class="ask-input" placeholder="${t('askPlaceholder')}" id="askInput" onkeydown="if(event.key==='Enter')askMoni()">
              <button class="ask-btn" onclick="askMoni()">‚Üí</button>
            </div>
          </div>
          <div class="chips">
            ${(getLang().quickExpenses || []).slice(0, 3).map(qe => `
              <button class="chip" onclick="askWithText('${qe.label}')">${qe.emoji} ${qe.label}</button>
            `).join('')}
          </div>
          ${chatSection}
        </div>
      `;

      // Archetype-specific goal card renderer
      const renderGoalCard = (g) => {
        const deposited = state.goalDeposits[g.id] || 0;
        const alloc = parseInt(state.allocations[g.id]) || 0;
        const progress = Math.min(100, Math.round((deposited / g.amount) * 100));
        const remaining = g.amount - deposited;
        const monthsLeft = alloc > 0 ? Math.ceil(remaining / alloc) : 0;
        const isComplete = deposited >= g.amount;
        const archetype = state.archetype;
        const goalNote = state.goalNotes[g.id] || '';

        // Future Self note section - shared across all archetypes
        const noteSection = `
          <div style="background:var(--bg);border-radius:12px;padding:12px;margin:12px 0;cursor:pointer" onclick="editGoalNote('${g.id}')">
            ${goalNote
              ? `<div style="font-size:13px;color:var(--text-soft);font-style:italic">"${goalNote}"</div>`
              : `<div style="font-size:12px;color:var(--text-muted);display:flex;align-items:center;gap:6px"><span>‚úèÔ∏è</span> ${t('addFutureSelfNote') || 'Add a note about your future self...'}</div>`
            }
          </div>
        `;

        // DREAMER: Vision board style - soft, dreamy, inspirational
        if (archetype === 'dreamer') {
          const quote = progress >= 50 ? (t('dreamerGoalQuote1') || 'Your dream is taking shape ‚ú®') : (t('dreamerGoalQuote2') || 'Every step brings you closer üåü');
          return `
            <div style="background:linear-gradient(135deg, ${archColor}11, ${archColor}05);border:1px solid ${archColor}33;border-radius:20px;padding:24px;margin-bottom:16px;position:relative;overflow:hidden">
              <div style="position:absolute;top:12px;right:12px;font-size:40px;opacity:0.15">${g.e}</div>
              <div style="font-size:11px;text-transform:uppercase;letter-spacing:1px;color:${archColor};font-weight:600;margin-bottom:8px">‚ú® ${t('dreamGoal') || 'Dream Goal'}</div>
              <div style="font-size:20px;font-weight:700;margin-bottom:4px">${getGoalName(g)}</div>
              <div style="font-size:13px;color:var(--text-muted);font-style:italic;margin-bottom:16px">${quote}</div>
              <div style="display:flex;align-items:center;gap:16px;margin-bottom:16px">
                <div style="flex:1;background:rgba(0,0,0,0.06);border-radius:10px;height:12px;overflow:hidden">
                  <div style="background:${archColor};height:100%;width:${progress}%;border-radius:10px;transition:width 0.5s"></div>
                </div>
                <span style="font-size:15px;font-weight:700;color:${archColor}">${progress}%</span>
              </div>
              <div style="display:flex;justify-content:space-between;align-items:center;padding:12px 16px;background:rgba(255,255,255,0.5);border-radius:12px;margin-bottom:12px">
                <div><div style="font-size:11px;color:var(--text-muted)">${t('saved')}</div><div style="font-size:18px;font-weight:700">${fmt(deposited)}</div></div>
                <div style="font-size:20px">${isComplete ? 'üéâ' : monthsLeft <= 2 ? 'üî•' : '‚ú®'}</div>
                <div style="text-align:right"><div style="font-size:11px;color:var(--text-muted)">${t('target')}</div><div style="font-size:18px;font-weight:700">${fmt(g.amount)}</div></div>
              </div>
              ${noteSection}
              ${!isComplete ? `<button onclick="depositToGoal('${g.id}')" style="width:100%;padding:14px;background:${archColor};color:white;border:none;border-radius:14px;font-weight:600;cursor:pointer;font-family:inherit;font-size:15px">${t('bringDreamCloser') || 'Bring Dream Closer'} +</button>` : `<div style="text-align:center;padding:14px;background:rgba(34,197,94,0.15);border-radius:14px;color:var(--green);font-weight:700;font-size:15px">üéâ ${t('dreamAchieved') || 'Dream Achieved'}!</div>`}
            </div>
          `;
        }

        // PLANNER: Detailed stats view - organized, data-rich
        if (archetype === 'planner') {
          const weeklyTarget = alloc > 0 ? Math.round(alloc / 4) : 0;
          const dailyTarget = alloc > 0 ? Math.round(alloc / 30) : 0;
          const completionDate = monthsLeft > 0 ? new Date(Date.now() + monthsLeft * 30 * 24 * 60 * 60 * 1000).toLocaleDateString(state.language, { month: 'short', year: 'numeric' }) : '';
          return `
            <div style="background:var(--card);border:1px solid var(--border);border-radius:16px;padding:20px;margin-bottom:12px">
              <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:16px">
                <div style="display:flex;align-items:center;gap:12px">
                  <span style="font-size:28px">${g.e}</span>
                  <div><div style="font-weight:700;font-size:16px">${getGoalName(g)}</div><div style="font-size:12px;color:var(--text-muted)">${isComplete ? '‚úÖ ' + t('completed') : completionDate ? 'üìÖ ETA: ' + completionDate : ''}</div></div>
                </div>
                <div style="text-align:right"><div style="font-size:20px;font-weight:700;color:${isComplete ? 'var(--green)' : archColor}">${progress}%</div></div>
              </div>
              <div style="background:var(--bg);border-radius:8px;height:8px;overflow:hidden;margin-bottom:16px">
                <div style="background:${isComplete ? 'var(--green)' : archColor};height:100%;width:${progress}%;border-radius:8px"></div>
              </div>
              <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin-bottom:16px">
                <div style="background:var(--bg);padding:12px;border-radius:10px;text-align:center"><div style="font-size:11px;color:var(--text-muted);margin-bottom:4px">${t('saved')}</div><div style="font-size:14px;font-weight:700">${fmt(deposited)}</div></div>
                <div style="background:var(--bg);padding:12px;border-radius:10px;text-align:center"><div style="font-size:11px;color:var(--text-muted);margin-bottom:4px">${t('remaining')}</div><div style="font-size:14px;font-weight:700">${fmt(remaining)}</div></div>
                <div style="background:var(--bg);padding:12px;border-radius:10px;text-align:center"><div style="font-size:11px;color:var(--text-muted);margin-bottom:4px">${t('monthly')}</div><div style="font-size:14px;font-weight:700">${fmt(alloc)}</div></div>
              </div>
              ${alloc > 0 ? `<div style="font-size:12px;color:var(--text-muted);padding:10px;background:var(--bg);border-radius:8px;margin-bottom:12px">üìä ${t('breakdown') || 'Breakdown'}: ${fmt(weeklyTarget)}/${t('week') || 'wk'} ¬∑ ${fmt(dailyTarget)}/${t('day') || 'day'}</div>` : ''}
              ${noteSection}
              ${!isComplete ? `<div style="display:flex;gap:8px"><button onclick="depositToGoal('${g.id}')" style="flex:1;padding:12px;background:${archColor};color:white;border:none;border-radius:12px;font-weight:600;cursor:pointer;font-family:inherit">+ ${t('deposit')}</button>${deposited > 0 ? `<button onclick="withdrawFromGoal('${g.id}')" style="padding:12px 16px;background:var(--card);border:1px solid var(--border);border-radius:12px;cursor:pointer;font-family:inherit">‚àí</button>` : ''}</div>` : ''}
            </div>
          `;
        }

        // GIVER: Impact-focused view - warm, generous
        if (archetype === 'giver') {
          const impactMessage = g.id === 'trip' ? (t('giverTripImpact') || 'Create memories with loved ones') : g.id === 'emergency' ? (t('giverEmergencyImpact') || 'Be there when others need you') : (t('giverDefaultImpact') || 'Enable your generous heart');
          return `
            <div style="background:linear-gradient(135deg, #ec489911, #ec489905);border:1px solid #ec489933;border-radius:16px;padding:20px;margin-bottom:12px">
              <div style="display:flex;align-items:center;gap:12px;margin-bottom:12px">
                <span style="font-size:32px">${g.e}</span>
                <div style="flex:1"><div style="font-weight:700;font-size:16px">${getGoalName(g)}</div><div style="font-size:12px;color:#ec4899;font-style:italic">${impactMessage}</div></div>
              </div>
              <div style="background:rgba(236,72,153,0.1);border-radius:12px;padding:16px;margin-bottom:16px">
                <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px"><span style="font-size:13px;color:var(--text-muted)">${t('yourProgress') || 'Your progress'}</span><span style="font-size:15px;font-weight:700;color:#ec4899">${progress}%</span></div>
                <div style="background:rgba(0,0,0,0.1);border-radius:6px;height:8px;overflow:hidden"><div style="background:#ec4899;height:100%;width:${progress}%;border-radius:6px"></div></div>
              </div>
              <div style="display:flex;gap:12px;margin-bottom:16px">
                <div style="flex:1;text-align:center;padding:12px;background:rgba(255,255,255,0.5);border-radius:10px"><div style="font-size:18px;font-weight:700">${fmt(deposited)}</div><div style="font-size:11px;color:var(--text-muted)">${t('saved')}</div></div>
                <div style="flex:1;text-align:center;padding:12px;background:rgba(255,255,255,0.5);border-radius:10px"><div style="font-size:18px;font-weight:700">${fmt(remaining)}</div><div style="font-size:11px;color:var(--text-muted)">${t('toGo') || 'to go'}</div></div>
              </div>
              ${noteSection}
              ${!isComplete ? `<button onclick="depositToGoal('${g.id}')" style="width:100%;padding:14px;background:#ec4899;color:white;border:none;border-radius:14px;font-weight:600;cursor:pointer;font-family:inherit">üíù ${t('addToGiving') || 'Add to Your Giving Fund'}</button>` : `<div style="text-align:center;padding:14px;background:rgba(34,197,94,0.15);border-radius:14px;color:var(--green);font-weight:700">üíù ${t('readyToGive') || 'Ready to Give'}!</div>`}
            </div>
          `;
        }

        // EXPERIENCER: Adventure/memory style - exciting, bold
        if (archetype === 'experiencer') {
          return `
            <div style="background:linear-gradient(135deg, #f9731611, #f9731605);border:1px solid #f9731633;border-radius:20px;overflow:hidden;margin-bottom:16px">
              <div style="background:linear-gradient(135deg, #f97316, #fb923c);padding:20px;color:white">
                <div style="display:flex;align-items:center;gap:12px">
                  <span style="font-size:36px">${g.e}</span>
                  <div><div style="font-size:12px;opacity:0.9">üé¢ ${t('adventure') || 'ADVENTURE'}</div><div style="font-size:20px;font-weight:700">${getGoalName(g)}</div></div>
                </div>
              </div>
              <div style="padding:20px">
                <div style="display:flex;align-items:center;gap:12px;margin-bottom:16px">
                  <div style="flex:1;background:var(--bg);border-radius:8px;height:10px;overflow:hidden"><div style="background:linear-gradient(90deg, #f97316, #fb923c);height:100%;width:${progress}%;border-radius:8px"></div></div>
                  <span style="font-size:16px;font-weight:700;color:#f97316">${progress}%</span>
                </div>
                <div style="display:flex;justify-content:space-around;text-align:center;margin-bottom:16px">
                  <div><div style="font-size:20px;font-weight:700">${fmt(deposited)}</div><div style="font-size:11px;color:var(--text-muted)">${t('fundedSoFar') || 'funded'}</div></div>
                  <div style="width:1px;background:var(--border)"></div>
                  <div><div style="font-size:20px;font-weight:700">${monthsLeft || '‚àû'}</div><div style="font-size:11px;color:var(--text-muted)">${t('monthsToGo') || 'months to go'}</div></div>
                </div>
                ${noteSection}
                ${!isComplete ? `<button onclick="depositToGoal('${g.id}')" style="width:100%;padding:14px;background:linear-gradient(90deg, #f97316, #fb923c);color:white;border:none;border-radius:14px;font-weight:600;cursor:pointer;font-family:inherit;font-size:15px">üé¢ ${t('fundAdventure') || 'Fund This Adventure'}</button>` : `<div style="text-align:center;padding:14px;background:rgba(249,115,22,0.15);border-radius:14px;color:#f97316;font-weight:700;font-size:15px">üéâ ${t('adventureReady') || 'Adventure Ready'}!</div>`}
              </div>
            </div>
          `;
        }

        // Default fallback
        return `<div style="background:var(--card);border:1px solid var(--border);border-radius:16px;padding:20px;margin-bottom:12px">
          <div style="display:flex;align-items:center;gap:12px"><span style="font-size:32px">${g.e}</span><div><div style="font-weight:700">${getGoalName(g)}</div><div style="color:var(--text-muted)">${fmt(deposited)} / ${fmt(g.amount)}</div></div></div>
        </div>`;
      };

      // Goals tab content - archetype-specific
      const goalsContent = `
        <div class="main-header">
          <div class="greeting">${arch?.emoji || 'üéØ'} ${t('goals')}</div>
          <div class="avatar" style="background:linear-gradient(135deg, ${archColor}22, ${archColor}11)">${arch?.emoji || '‚ú®'}</div>
        </div>
        <div style="margin-top:16px">
          ${state.goals.length > 0 ? state.goals.map(g => renderGoalCard(g)).join('') : `
            <div style="text-align:center;padding:48px 24px;color:var(--text-muted)">
              <div style="font-size:48px;margin-bottom:16px">${arch?.emoji || 'üéØ'}</div>
              <div style="font-size:16px;font-weight:600;margin-bottom:8px">${t('noGoalsYet') || 'Ch∆∞a c√≥ m·ª•c ti√™u'}</div>
              <div style="font-size:14px">${t('goalsWillAppear') || 'Th√™m m·ª•c ti√™u ƒë·ªÉ b·∫Øt ƒë·∫ßu ti·∫øt ki·ªám'}</div>
            </div>
          `}
          ${state.goals.length < 3 ? `
            <button onclick="openAddGoal()" style="width:100%;margin-top:16px;padding:16px 20px;background:linear-gradient(135deg,${archColor},${archColor}dd);border:none;border-radius:16px;color:white;font-size:15px;font-weight:600;cursor:pointer;font-family:inherit;display:flex;align-items:center;justify-content:center;gap:8px;box-shadow:0 4px 12px ${archColor}40;transition:transform 0.2s,box-shadow 0.2s" onmouseover="this.style.transform='translateY(-2px)';this.style.boxShadow='0 6px 16px ${archColor}50'" onmouseout="this.style.transform='translateY(0)';this.style.boxShadow='0 4px 12px ${archColor}40'">
              <span style="font-size:18px">+</span> ${t('addGoal') || 'Th√™m m·ª•c ti√™u m·ªõi'}
            </button>
          ` : ''}
        </div>
      `;

      // History tab content - group transactions by date
      const groupByDate = (transactions) => {
        const groups = {};
        transactions.forEach(tx => {
          const dateKey = tx.timestamp ? new Date(tx.timestamp).toDateString() : new Date().toDateString();
          if (!groups[dateKey]) groups[dateKey] = [];
          groups[dateKey].push(tx);
        });
        return groups;
      };

      const txGroups = groupByDate(getThisMonthTransactions());
      const groupKeys = Object.keys(txGroups).sort((a, b) => new Date(b) - new Date(a));

      const historyContent = `
        <div class="main-header">
          <div class="greeting">üìä ${t('history')}</div>
          <div class="avatar">${arch?.emoji || '‚ú®'}</div>
        </div>
        <div style="margin-top:16px">
          ${getThisMonthTransactions().length > 0 ? `
            <div style="background:var(--card);border:1px solid var(--border);border-radius:16px;padding:16px;margin-bottom:12px">
              <div style="display:flex;justify-content:space-between;align-items:center">
                <span style="font-weight:600">${t('thisMonth')}</span>
                <span style="font-weight:700;color:var(--text)">${fmt(monthSpent())}</span>
              </div>
            </div>
            ${groupKeys.map(dateKey => {
              const txs = txGroups[dateKey];
              const dayTotal = txs.reduce((a, b) => a + b.amount, 0);
              const dateLabel = formatDate(txs[0].timestamp);
              return `
                <div style="background:var(--card);border:1px solid var(--border);border-radius:16px;padding:16px;margin-bottom:12px">
                  <div style="display:flex;justify-content:space-between;font-weight:600;font-size:14px;color:var(--text-muted);margin-bottom:12px">
                    <span>${dateLabel}</span>
                    <span>${fmt(dayTotal)}</span>
                  </div>
                  ${txs.map(tx => `
                    <div style="display:flex;align-items:center;padding:10px 0;border-bottom:1px solid var(--border)">
                      <span style="font-size:24px;margin-right:12px">${tx.emoji}</span>
                      <span style="flex:1;font-weight:500">${tx.name}</span>
                      <span style="font-weight:600;color:var(--text-soft)">${fmt(tx.amount)}</span>
                    </div>
                  `).join('')}
                </div>
              `;
            }).join('')}
          ` : `
            <div style="text-align:center;padding:48px 24px;color:var(--text-muted)">
              <div style="font-size:48px;margin-bottom:16px">üìä</div>
              <div style="font-size:16px;font-weight:600;margin-bottom:8px">${t('noExpensesYet')}</div>
              <div style="font-size:14px">${t('expensesWillAppear')}</div>
            </div>
          `}
        </div>
      `;

      // Analytics tab content - Spending meaning categories
      const categorizeTransaction = (tx) => {
        const name = (tx.name || '').toLowerCase();
        const emoji = tx.emoji || '';
        // Relationships: gifts, dining out, social
        if (['üéÅ', 'üíù', 'üçΩÔ∏è', 'üç∫', 'üéÇ', 'üéâ'].includes(emoji) || /gift|party|friend|date|dinner|lunch/i.test(name)) return 'relationships';
        // Self-care: health, wellness, entertainment, personal
        if (['üíä', 'üèãÔ∏è', 'üßò', 'üíá', 'üé¨', 'üéÆ', '‚òï', 'üßñ'].includes(emoji) || /spa|gym|movie|game|cafe|health|beauty/i.test(name)) return 'selfcare';
        // Default: Necessities
        return 'necessities';
      };

      const monthTx = getThisMonthTransactions();
      const categoryTotals = { relationships: 0, selfcare: 0, necessities: 0 };
      monthTx.forEach(tx => { categoryTotals[categorizeTransaction(tx)] += tx.amount; });
      const totalSpent = monthTx.reduce((a, b) => a + b.amount, 0);

      const categoryData = [
        { key: 'relationships', emoji: 'üë•', label: t('relationships') || 'Relationships', color: '#ec4899', amount: categoryTotals.relationships },
        { key: 'selfcare', emoji: 'üßò', label: t('selfCare') || 'Self-care', color: '#8b5cf6', amount: categoryTotals.selfcare },
        { key: 'necessities', emoji: 'üéØ', label: t('necessities') || 'Necessities', color: '#10b981', amount: categoryTotals.necessities },
      ];

      // Settings tab content
      const totalFixedSettings = Array.isArray(state.fixedExpenses)
        ? state.fixedExpenses.reduce((a, b) => a + (parseInt(b.amount) || 0), 0)
        : 0;
      const settingsContent = `
        <div class="main-header">
          <div class="greeting">‚öôÔ∏è ${t('settings') || 'Settings'}</div>
          <div class="avatar" style="background:linear-gradient(135deg, ${archColor}22, ${archColor}11)">${arch?.emoji || '‚ú®'}</div>
        </div>
        <div style="margin-top:16px">
          <!-- Income -->
          <div style="background:var(--card);border:1px solid var(--border);border-radius:16px;padding:16px;margin-bottom:12px">
            <div style="display:flex;justify-content:space-between;align-items:center">
              <div style="display:flex;align-items:center;gap:12px">
                <span style="font-size:24px">üí∞</span>
                <div>
                  <div style="font-size:13px;color:var(--text-muted)">${t('income') || 'Income'}</div>
                  <div style="font-size:18px;font-weight:700">${fmt(parseInt(state.income) || 0)}</div>
                </div>
              </div>
              <button onclick="editIncome()" style="padding:8px 16px;background:var(--bg);border:1px solid var(--border);border-radius:10px;font-size:13px;cursor:pointer;font-family:inherit">${t('edit') || 'Edit'}</button>
            </div>
          </div>

          <!-- Fixed Expenses - Collapsible -->
          <div style="background:var(--card);border:1px solid var(--border);border-radius:16px;overflow:hidden;margin-bottom:12px">
            <div onclick="toggleFixedExpenses()" style="display:flex;justify-content:space-between;align-items:center;padding:16px;cursor:pointer;transition:background 0.2s" onmouseover="this.style.background='var(--bg)'" onmouseout="this.style.background='transparent'">
              <div style="display:flex;align-items:center;gap:12px">
                <span style="font-size:24px">üè†</span>
                <div>
                  <div style="font-size:13px;color:var(--text-muted)">${t('fixedExpenses') || 'Chi ph√≠ c·ªë ƒë·ªãnh'}</div>
                  <div style="font-size:18px;font-weight:700">${fmt(totalFixedSettings)}/${t('month') || 'th√°ng'}</div>
                </div>
              </div>
              <span style="font-size:16px;color:var(--text-muted);transition:transform 0.3s;transform:rotate(${state.fixedExpanded ? '180deg' : '0deg'})">‚ñº</span>
            </div>
            ${state.fixedExpanded ? `
              <div style="border-top:1px solid var(--border);padding:12px 16px;background:var(--bg)">
                ${Array.isArray(state.fixedExpenses) ? state.fixedExpenses.map((f, idx) => `
                  <div style="display:flex;align-items:center;gap:12px;padding:10px 0;${idx > 0 ? 'border-top:1px solid var(--border);' : ''}">
                    <span style="font-size:18px">${f.emoji || 'üì¶'}</span>
                    <div style="flex:1;font-size:14px;color:var(--text)">${t(f.nameKey) || f.nameKey}</div>
                    <div style="display:flex;align-items:center;gap:4px">
                      <input
                        type="text"
                        value="${parseInt(f.amount) || ''}"
                        onchange="updateFixedExpense(${idx}, this.value)"
                        placeholder="0"
                        style="width:100px;padding:8px 12px;border:1px solid var(--border);border-radius:8px;font-size:14px;font-weight:600;text-align:right;font-family:inherit;background:var(--card)"
                      >
                      <span style="font-size:12px;color:var(--text-muted)">/${t('month') || 'th'}</span>
                    </div>
                  </div>
                `).join('') : ''}
                <button onclick="addNewFixedExpense()" style="width:100%;margin-top:12px;padding:12px;background:var(--card);border:1px dashed var(--border);border-radius:10px;font-size:13px;color:var(--text-muted);cursor:pointer;font-family:inherit;display:flex;align-items:center;justify-content:center;gap:6px">
                  <span>+</span> ${t('addOther') || 'Th√™m kho·∫£n kh√°c'}
                </button>
              </div>
            ` : ''}
          </div>

          <!-- Personality -->
          <div style="background:var(--card);border:1px solid var(--border);border-radius:16px;padding:16px;margin-bottom:12px">
            <div style="display:flex;justify-content:space-between;align-items:center">
              <div style="display:flex;align-items:center;gap:12px">
                <span style="font-size:24px">ü™û</span>
                <div>
                  <div style="font-size:13px;color:var(--text-muted)">${t('personality') || 'Personality'}</div>
                  <div style="font-size:18px;font-weight:700">${arch?.emoji || '‚ú®'} ${arch?.name || 'Dreamer'}</div>
                </div>
              </div>
              <button onclick="redoQuiz()" style="padding:8px 16px;background:var(--bg);border:1px solid var(--border);border-radius:10px;font-size:13px;cursor:pointer;font-family:inherit">${t('redo') || 'Redo'}</button>
            </div>
          </div>

          <!-- Language -->
          <div style="background:var(--card);border:1px solid var(--border);border-radius:16px;padding:16px;margin-bottom:12px">
            <div style="display:flex;justify-content:space-between;align-items:center">
              <div style="display:flex;align-items:center;gap:12px">
                <span style="font-size:24px">üåê</span>
                <div>
                  <div style="font-size:13px;color:var(--text-muted)">${t('languageLabel') || 'Language'}</div>
                  <div style="font-size:18px;font-weight:700">${getLang().flag || 'üåê'} ${getLang().label || 'Language'}</div>
                </div>
              </div>
              <button onclick="editLanguage()" style="padding:8px 16px;background:var(--bg);border:1px solid var(--border);border-radius:10px;font-size:13px;cursor:pointer;font-family:inherit">${t('edit') || 'Edit'}</button>
            </div>
          </div>

          <!-- Cycle Settings -->
          <div style="background:var(--card);border:1px solid var(--border);border-radius:16px;padding:16px;margin-bottom:12px">
            <div style="display:flex;align-items:center;gap:12px;margin-bottom:16px">
              <span style="font-size:24px">üîÑ</span>
              <div style="font-size:15px;font-weight:600">${t('cycleSettings') || 'Chu k·ª≥ chi ti√™u'}</div>
            </div>

            <!-- Cycle Day -->
            <div style="margin-bottom:16px">
              <div style="font-size:13px;color:var(--text-muted);margin-bottom:8px">${t('cycleResetDay') || 'Ng√†y reset chu k·ª≥'}</div>
              <div style="display:flex;gap:8px;flex-wrap:wrap">
                ${[1, 5, 10, 15, 25].map(day => `
                  <button onclick="setCycleDay(${day})" style="padding:8px 16px;background:${state.cycleDay === day ? archColor : 'var(--bg)'};color:${state.cycleDay === day ? 'white' : 'var(--text)'};border:1px solid ${state.cycleDay === day ? archColor : 'var(--border)'};border-radius:10px;font-size:13px;cursor:pointer;font-family:inherit">${t('day') || 'Ng√†y'} ${day}</button>
                `).join('')}
              </div>
            </div>

            <!-- Cycle Mode -->
            <div style="margin-bottom:16px">
              <div style="font-size:13px;color:var(--text-muted);margin-bottom:8px">Cu·ªëi chu k·ª≥, ti·ªÅn d∆∞ s·∫Ω...</div>
              <div style="display:flex;flex-direction:column;gap:8px">
                <button onclick="setCycleMode('buffer')" style="display:flex;align-items:center;gap:12px;padding:12px;background:${state.cycleMode === 'buffer' ? 'linear-gradient(135deg, ' + archColor + '11, ' + archColor + '05)' : 'var(--bg)'};border:1px solid ${state.cycleMode === 'buffer' ? archColor : 'var(--border)'};border-radius:12px;text-align:left;cursor:pointer;font-family:inherit">
                  <span style="font-size:20px">üõ°Ô∏è</span>
                  <div style="flex:1">
                    <div style="font-size:14px;font-weight:600;color:${state.cycleMode === 'buffer' ? archColor : 'var(--text)'}">Chuy·ªÉn v√†o Buffer</div>
                    <div style="font-size:12px;color:var(--text-muted)">T√≠ch l≈©y ri√™ng, spendable m·ªõi ‚ú®</div>
                  </div>
                </button>
                <button onclick="setCycleMode('rollover')" style="display:flex;align-items:center;gap:12px;padding:12px;background:${state.cycleMode === 'rollover' ? 'linear-gradient(135deg, ' + archColor + '11, ' + archColor + '05)' : 'var(--bg)'};border:1px solid ${state.cycleMode === 'rollover' ? archColor : 'var(--border)'};border-radius:12px;text-align:left;cursor:pointer;font-family:inherit">
                  <span style="font-size:20px">‚ÜóÔ∏è</span>
                  <div style="flex:1">
                    <div style="font-size:14px;font-weight:600;color:${state.cycleMode === 'rollover' ? archColor : 'var(--text)'}">C·ªông v√†o th√°ng sau</div>
                    <div style="font-size:12px;color:var(--text-muted)">D∆∞ th√°ng n√†y = th√™m th√°ng sau</div>
                  </div>
                </button>
                <button onclick="setCycleMode('reset')" style="display:flex;align-items:center;gap:12px;padding:12px;background:${state.cycleMode === 'reset' ? 'linear-gradient(135deg, ' + archColor + '11, ' + archColor + '05)' : 'var(--bg)'};border:1px solid ${state.cycleMode === 'reset' ? archColor : 'var(--border)'};border-radius:12px;text-align:left;cursor:pointer;font-family:inherit">
                  <span style="font-size:20px">üîÑ</span>
                  <div style="flex:1">
                    <div style="font-size:14px;font-weight:600;color:${state.cycleMode === 'reset' ? archColor : 'var(--text)'}">Reset v·ªÅ 0</div>
                    <div style="font-size:12px;color:var(--text-muted)">M·ªói th√°ng b·∫Øt ƒë·∫ßu m·ªõi</div>
                  </div>
                </button>
              </div>
            </div>

            <!-- Debt Handling -->
            <div>
              <div style="font-size:13px;color:var(--text-muted);margin-bottom:8px">N·∫øu ti√™u qu√°...</div>
              <div style="display:flex;flex-direction:column;gap:8px">
                <button onclick="setDebtHandling('deduct_buffer')" style="display:flex;align-items:center;gap:12px;padding:12px;background:${state.debtHandling === 'deduct_buffer' ? 'linear-gradient(135deg, ' + archColor + '11, ' + archColor + '05)' : 'var(--bg)'};border:1px solid ${state.debtHandling === 'deduct_buffer' ? archColor : 'var(--border)'};border-radius:12px;text-align:left;cursor:pointer;font-family:inherit">
                  <span style="font-size:20px">üí≥</span>
                  <div style="flex:1">
                    <div style="font-size:14px;font-weight:600;color:${state.debtHandling === 'deduct_buffer' ? archColor : 'var(--text)'}">Tr·ª´ t·ª´ Buffer tr∆∞·ªõc</div>
                    <div style="font-size:12px;color:var(--text-muted)">D√πng ti·ªÅn d·ª± ph√≤ng</div>
                  </div>
                </button>
                <button onclick="setDebtHandling('forgive')" style="display:flex;align-items:center;gap:12px;padding:12px;background:${state.debtHandling === 'forgive' ? 'linear-gradient(135deg, ' + archColor + '11, ' + archColor + '05)' : 'var(--bg)'};border:1px solid ${state.debtHandling === 'forgive' ? archColor : 'var(--border)'};border-radius:12px;text-align:left;cursor:pointer;font-family:inherit">
                  <span style="font-size:20px">üå±</span>
                  <div style="flex:1">
                    <div style="font-size:14px;font-weight:600;color:${state.debtHandling === 'forgive' ? archColor : 'var(--text)'}">B·ªè qua, b·∫Øt ƒë·∫ßu m·ªõi</div>
                    <div style="font-size:12px;color:var(--text-muted)">Fresh start kh√¥ng debt</div>
                  </div>
                </button>
              </div>
            </div>

            ${state.buffer > 0 ? `
              <div style="margin-top:16px;padding:12px;background:linear-gradient(135deg, #10b98111, #10b98105);border:1px solid #10b98133;border-radius:12px">
                <div style="display:flex;justify-content:space-between;align-items:center">
                  <div>
                    <div style="font-size:13px;color:var(--text-muted)">Buffer hi·ªán t·∫°i</div>
                    <div style="font-size:18px;font-weight:700;color:var(--green)">${fmt(state.buffer)}</div>
                  </div>
                  <button onclick="withdrawBuffer()" style="padding:8px 16px;background:var(--bg);border:1px solid var(--border);border-radius:10px;font-size:13px;cursor:pointer;font-family:inherit">R√∫t</button>
                </div>
              </div>
            ` : ''}
          </div>

          <!-- Reset Data -->
          <div style="background:var(--card);border:1px solid var(--border);border-radius:16px;padding:16px;margin-bottom:12px">
            <div style="display:flex;justify-content:space-between;align-items:center">
              <div style="display:flex;align-items:center;gap:12px">
                <span style="font-size:24px">üóëÔ∏è</span>
                <div>
                  <div style="font-size:13px;color:var(--text-muted)">${t('resetData') || 'Reset Data'}</div>
                  <div style="font-size:14px;color:var(--orange)">${t('resetWarning') || 'Start fresh with new setup'}</div>
                </div>
              </div>
              <button onclick="resetAllData()" style="padding:8px 16px;background:rgba(239,68,68,0.1);border:1px solid rgba(239,68,68,0.3);border-radius:10px;font-size:13px;cursor:pointer;font-family:inherit;color:#ef4444">${t('reset') || 'Reset'}</button>
            </div>
          </div>
        </div>
      `;

      // Select content based on active tab
      let tabContent = homeContent;
      if (state.activeTab === 'goals') tabContent = goalsContent;
      else if (state.activeTab === 'history') tabContent = historyContent;
      else if (state.activeTab === 'settings') tabContent = settingsContent;

      app.innerHTML = `
        <div class="status-bar"><span>9:41</span><span>üì∂ üîã</span></div>
        <div class="content" style="padding: 0 24px;">
          ${tabContent}
        </div>
        <button class="fab" onclick="openAddExpense()">+</button>
        <div class="tab-bar">
          <button class="tab ${state.activeTab === 'home' ? 'active' : ''}" onclick="switchTab('home')"><span class="tab-icon">üè†</span><span class="tab-label">${t('home')}</span></button>
          <button class="tab ${state.activeTab === 'goals' ? 'active' : ''}" onclick="switchTab('goals')"><span class="tab-icon">üéØ</span><span class="tab-label">${t('goals')}</span></button>
          <button class="tab ${state.activeTab === 'history' ? 'active' : ''}" onclick="switchTab('history')"><span class="tab-icon">üìú</span><span class="tab-label">${t('history')}</span></button>
          <button class="tab ${state.activeTab === 'settings' ? 'active' : ''}" onclick="switchTab('settings')"><span class="tab-icon">‚öôÔ∏è</span><span class="tab-label">${t('settings') || 'Settings'}</span></button>
        </div>
        ${addExpenseModal}
        ${addGoalModal}
        ${addFixedModal}
        ${inputModal}
      `;
    };

    window.startOnboarding = () => { state.screen = 'onboarding'; state.step = 0; render(); };
    window.goSplash = () => { state.screen = 'splash'; render(); };
    window.nextStep = () => { state.step++; render(); };
    window.prevStep = () => { state.step--; render(); };
    window.updateBtn = () => { const btn = $('nextBtn'); if (btn) btn.disabled = !state.userName.trim(); };
    window.startQuiz = () => { state.quizStep = 0; render(); };
    window.skipQuiz = () => { state.archetype = 'dreamer'; state.step = 2; render(); };
    window.quizBack = () => { if (state.quizStep > 0) { state.quizStep--; state.quizAnswers.pop(); } else { state.quizStep = -1; } render(); };
    window.backToQuiz = () => { state.step = 1; state.quizStep = 3; render(); };
    window.answerQuiz = (type) => {
      state.quizAnswers.push(type);
      if (state.quizStep < 3) { state.quizStep++; render(); }
      else {
        const counts = {};
        state.quizAnswers.forEach(t => counts[t] = (counts[t] || 0) + 1);
        let maxType = 'dreamer', maxCount = 0;
        Object.entries(counts).forEach(([t, c]) => { if (c > maxCount) { maxType = t; maxCount = c; } });
        state.archetype = maxType;
        // Set personality-based cycle defaults
        setArchetypeDefaults(maxType);
        state.step = 2;
        render();
      }
    };
    window.handleIncome = (el) => {
      // AI parse: supports "15tr", "15 tri·ªáu", "15m", "15 million", "15000000", etc.
      const parsed = parseAmount(el.value);
      state.income = parsed > 0 ? parsed.toString() : el.value.replace(/\D/g, '');
      const btn = $('nextBtn');
      if (btn) btn.disabled = !state.income;
    };
    window.setIncome = (val) => { state.income = val.toString(); render(); };

    // Fixed expenses
    window.updateFixedAmount = (idx, val) => {
      // AI parse for fixed expenses
      const parsed = parseAmount(val);
      state.fixedExpenses[idx].amount = parsed > 0 ? parsed.toString() : val.replace(/\D/g, '');
      // Update the total display without full re-render
      const totalEl = document.querySelector('[data-fixed-total]');
      if (totalEl) totalEl.textContent = fmt(totalFixed()) + '/' + t('months').charAt(0);
    };
    window.removeFixed = (idx) => { 
      state.fixedExpenses.splice(idx, 1); 
      render(); 
    };
    window.addCustomFixed = () => {
      const name = $('newFixedName')?.value;
      const rawAmount = $('newFixedAmount')?.value;
      // AI parse: "500k", "1tr", "1.5 million", etc.
      const amount = parseAmount(rawAmount);
      if (name && amount > 0) {
        const emojis = ['üì¶', 'üé¨', 'üèãÔ∏è', 'üìö', 'üéµ', 'üöå', 'üí≥', 'üîß'];
        state.fixedExpenses.push({
          id: 'custom_' + Date.now(),
          e: emojis[Math.floor(Math.random() * emojis.length)],
          customName: name,
          nameKey: '',
          amount: amount.toString()
        });
        state.showAddFixed = false;
        render();
      }
    };
    
    // Goals
    window.addGoal = (id) => {
      if (state.goals.length >= 3) return;
      const goalData = GOALS_DATA.find(g => g.id === id);
      if (goalData) {
        state.goals.push({
          ...goalData,
          amount: getGoalAmount(goalData.id)
        });
        render();
      }
    };
    window.removeGoal = (id) => { 
      state.goals = state.goals.filter(g => g.id !== id); 
      delete state.allocations[id]; 
      render(); 
    };
    window.addCustomGoal = () => {
      const name = $('newGoalName')?.value;
      const rawAmount = $('newGoalAmount')?.value;
      // AI parse: "25tr", "25 million", "$1500", etc.
      const amount = parseAmount(rawAmount);
      if (name && amount > 0 && state.goals.length < 3) {
        const emojis = ['üéØ', '‚≠ê', 'üåü', 'üí´', 'üéÅ', 'üèÜ', 'üíé', 'üöÄ'];
        state.goals.push({
          id: 'custom_' + Date.now(),
          e: emojis[Math.floor(Math.random() * emojis.length)],
          customName: name,
          nameKey: '',
          amount: amount
        });
        state.showAddGoal = false;
        render();
      }
    };

    // Goal Modal functions
    window.openAddGoal = () => {
      if (state.goals.length >= 3) {
        alert(t('maxGoalsReached') || 'B·∫°n ƒë√£ c√≥ t·ªëi ƒëa 3 m·ª•c ti√™u');
        return;
      }
      state.showAddGoal = true;
      state.selectedGoalEmoji = 'üéØ';
      render();
      setTimeout(() => $('newGoalNameInput')?.focus(), 100);
    };
    window.closeAddGoal = () => {
      state.showAddGoal = false;
      render();
    };
    window.selectGoalEmoji = (emoji) => {
      state.selectedGoalEmoji = emoji;
      render();
    };
    window.submitNewGoal = () => {
      const name = $('newGoalNameInput')?.value;
      const amountStr = $('newGoalAmountInput')?.value;
      if (!name || !name.trim()) {
        alert(t('enterGoalName') || 'Vui l√≤ng nh·∫≠p t√™n m·ª•c ti√™u');
        return;
      }
      const amount = parseAmount(amountStr);
      if (amount <= 0) {
        alert(t('invalidAmount') || 'S·ªë ti·ªÅn kh√¥ng h·ª£p l·ªá');
        return;
      }
      const newGoal = {
        id: 'custom_' + Date.now(),
        e: state.selectedGoalEmoji || 'üéØ',
        customName: name.trim(),
        nameKey: '',
        amount: amount
      };
      state.goals.push(newGoal);
      state.goalDeposits[newGoal.id] = 0;
      state.allocations[newGoal.id] = 0;
      state.showAddGoal = false;
      saveState();
      render();
    };

    // Generic Input Modal functions
    window.openInputModal = (config) => {
      state.inputModal = { ...config, error: null };
      render();
      setTimeout(() => $('genericModalInput')?.focus(), 100);
    };
    window.closeInputModal = () => {
      state.inputModal = null;
      render();
    };
    window.submitInputModal = () => {
      const value = $('genericModalInput')?.value;
      if (state.inputModal?.onSubmit) {
        state.inputModal.onSubmit(value);
      }
    };

    // Allocation  
    window.updateAllocation = (id, val) => {
      // AI parse for allocation: "500k", "1tr", "1 million", etc.
      const parsed = parseAmount(val);
      state.allocations[id] = parsed > 0 ? parsed.toString() : val.replace(/\D/g, '');
      // Update summary without full re-render
      updateAllocationSummary();
    };
    
    window.updateAllocationSummary = () => {
      const income = parseInt(state.income) || 0;
      const fixed = totalFixed();
      const allocated = totalAllocation();
      const remaining = spendable();
      
      const allocEl = document.querySelector('[data-alloc-total]');
      const remainEl = document.querySelector('[data-remain-total]');
      const btn = document.querySelector('[data-finish-btn]');
      
      if (allocEl) allocEl.textContent = '-' + fmt(allocated);
      if (remainEl) {
        remainEl.textContent = fmt(remaining);
        remainEl.style.color = remaining >= 0 ? 'var(--green)' : '#ef4444';
      }
      if (btn) btn.disabled = !(allocated > 0 && remaining >= 0);
      
      // Update time estimates
      state.goals.forEach((g, idx) => {
        const alloc = state.allocations[g.id] || 0;
        const monthly = parseInt(alloc) || 0;
        const monthsNum = monthly > 0 ? Math.ceil(g.amount / monthly) : 0;
        const timeEl = document.querySelector(`[data-time-${idx}]`);
        if (timeEl) {
          timeEl.innerHTML = monthly > 0 ? `${t('reachGoalIn')} <strong>${monthsNum} ${t('months')}</strong>` : '';
        }
      });
    };
    
    window.finishOnboarding = () => {
      state.onboardingCompleted = true;
      state.screen = 'main';
      saveState();
      render();
    };
    window.fillInput = (text) => { const input = $('askInput'); if (input) { input.value = text; input.focus(); } };
    
    // Chat functions with Claude API
    window.askWithText = (text) => {
      const input = $('askInput');
      if (input) input.value = text;
      askMoni();
    };
    
    window.askMoni = async () => {
      const input = $('askInput');
      const query = input?.value?.trim();
      if (!query) return;
      
      state.chatLoading = true;
      state.chatResponse = null;
      state.chatParsed = null;
      render();
      
      const remaining = spendable() - todaySpent();
      const goalsInfo = state.goals.map(g => `${getGoalName(g)}: ${fmt(g.amount)}, ti·∫øt ki·ªám ${fmt(state.allocations[g.id] || 0)}/th√°ng`).join('; ');
      
      const systemPrompt = `B·∫°n l√† Moni, m·ªôt tr·ª£ l√Ω t√†i ch√≠nh th√¢n thi·ªán. B·∫°n gi√∫p user quy·∫øt ƒë·ªãnh c√≥ n√™n mua m·ªôt m√≥n ƒë·ªì hay kh√¥ng d·ª±a tr√™n ng√¢n s√°ch c·ªßa h·ªç.

Th√¥ng tin t√†i ch√≠nh c·ªßa user:
- S·ªë ti·ªÅn c√≥ th·ªÉ ti√™u tho·∫£i m√°i c√≤n l·∫°i: ${fmt(remaining)}
- C√≤n 18 ng√†y trong th√°ng
- M·ª•c ti√™u ƒëang theo ƒëu·ªïi: ${goalsInfo || 'Ch∆∞a c√≥'}

Quy t·∫Øc:
1. Tr·∫£ l·ªùi ng·∫Øn g·ªçn, th√¢n thi·ªán, d√πng emoji
2. N·∫øu user h·ªèi v·ªÅ vi·ªác mua m·ªôt m√≥n ƒë·ªì, h√£y ph√¢n t√≠ch xem c√≥ n√™n mua kh√¥ng
3. N·∫øu m√≥n ƒë·ªì < 5% ng√¢n s√°ch c√≤n l·∫°i ‚Üí khuy·∫øn kh√≠ch mua
4. N·∫øu m√≥n ƒë·ªì 5-20% ng√¢n s√°ch ‚Üí c√¢n nh·∫Øc, n√™u trade-off
5. N·∫øu m√≥n ƒë·ªì > 20% ng√¢n s√°ch ‚Üí c·∫£nh b√°o nh·∫π nh√†ng
6. Lu√¥n t√¥n tr·ªçng quy·∫øt ƒë·ªãnh c·ªßa user, kh√¥ng ph√°n x√©t
7. N·∫øu ph√°t hi·ªán ƒë∆∞·ª£c s·ªë ti·ªÅn trong c√¢u h·ªèi, PH·∫¢I tr·∫£ v·ªÅ ·ªü cu·ªëi response theo format: [PARSED:t√™n_m√≥n:s·ªë_ti·ªÅn]

V√≠ d·ª• response:
"Cafe 50k ‚Äî mua ƒëi! ‚òï Ch·ªâ chi·∫øm 2% ng√¢n s√°ch, kh√¥ng ·∫£nh h∆∞·ªüng g√¨ t·ªõi m·ª•c ti√™u c·ªßa b·∫°n.
[PARSED:Cafe:50000]"`;

      // Always use fallback for now (API may not work in artifact)
      const useFallback = () => {
        // Parse amount with better regex - handle "50k", "50K", "50000", "150k"
        const amountMatch = query.match(/(\d+)\s*k/i) || query.match(/(\d{4,})/);
        if (amountMatch) {
          let amount = parseInt(amountMatch[1]);
          // If matched with 'k', multiply by 1000
          if (query.toLowerCase().includes('k') && amount < 1000) {
            amount *= 1000;
          }
          // Extract item name (everything except the amount part)
          const item = query.replace(/\d+\s*k?/gi, '').trim() || 'Item';
          const percent = remaining > 0 ? (amount / remaining * 100) : 100;

          state.chatParsed = { item, amount };

          if (percent < 5) {
            state.chatResponse = `<strong>${item} ${fmt(amount)}</strong> ‚Äî ${t('buyIt')} üéâ<br><br>${t('onlyPercent')} ${percent.toFixed(1)}% ${t('budget')}, ${t('comfortable')}`;
          } else if (percent < 20) {
            state.chatResponse = `<strong>${item} ${fmt(amount)}</strong> ‚Äî ${t('okToBuy')} üëç<br><br>${percent.toFixed(1)}% ${t('budget')}. ${t('considerIt')}`;
          } else {
            state.chatResponse = `<strong>${item} ${fmt(amount)}</strong> ‚Äî ${t('tooMuch')} ü§î<br><br>${percent.toFixed(1)}% ${t('percentOfBudget')} ${t('areYouSure')}`;
          }
        } else {
          state.chatResponse = t('notUnderstand');
        }
      };

      try {
        const response = await fetch('https://api.anthropic.com/v1/messages', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            model: 'claude-sonnet-4-20250514',
            max_tokens: 500,
            system: systemPrompt,
            messages: [{ role: 'user', content: query }]
          })
        });
        
        if (!response.ok) {
          throw new Error('API error');
        }
        
        const data = await response.json();
        let text = data.content?.[0]?.text;
        
        if (!text) {
          throw new Error('No response');
        }
        
        // Parse the response for item and amount
        const parseMatch = text.match(/\[PARSED:(.+?):(\d+)\]/);
        if (parseMatch) {
          state.chatParsed = {
            item: parseMatch[1],
            amount: parseInt(parseMatch[2])
          };
          text = text.replace(/\[PARSED:.+?\]/, '').trim();
        }
        
        state.chatResponse = text.replace(/\n/g, '<br>');
      } catch (err) {
        console.error('API Error:', err);
        useFallback();
      }
      
      state.chatLoading = false;
      render();
    };
    
    window.clearChat = () => {
      state.chatResponse = null;
      state.chatParsed = null;
      const input = $('askInput');
      if (input) input.value = '';
      render();
    };
    
    window.confirmChatPurchase = () => {
      if (state.chatParsed) {
        const emojis = ['‚òï', 'üçú', 'üöó', 'üõí', 'üé¨', 'üõçÔ∏è', 'üíä', 'üì¶'];
        const item = state.chatParsed.item;
        let emoji = emojis[0];
        if (item.toLowerCase().includes('cafe') || item.toLowerCase().includes('c√† ph√™')) emoji = '‚òï';
        else if (item.toLowerCase().includes('c∆°m') || item.toLowerCase().includes('ƒÉn')) emoji = 'üçú';
        else if (item.toLowerCase().includes('grab') || item.toLowerCase().includes('xe')) emoji = 'üöó';
        else if (item.toLowerCase().includes('si√™u th·ªã') || item.toLowerCase().includes('ch·ª£')) emoji = 'üõí';
        else emoji = emojis[Math.floor(Math.random() * emojis.length)];

        state.transactions.unshift({
          emoji,
          name: state.chatParsed.item,
          amount: state.chatParsed.amount,
          timestamp: Date.now()
        });
        saveState();
      }
      clearChat();
    };
    
    window.openAddExpense = () => { state.showAddExpense = true; render(); };
    window.closeAddExpense = () => { state.showAddExpense = false; render(); };

    // AI-powered expense parser with auto category assignment
    window.parseAndAddExpense = () => {
      const text = $('expenseText')?.value?.trim();
      if (!text) return;

      // Parse amount from text
      const amount = parseAmount(text);
      if (amount <= 0) {
        alert(t('enterValidAmount') || 'Please enter a valid amount');
        return;
      }

      // Extract name (remove amount-related parts)
      let name = text
        .replace(/[\d,.]+\s*(k|tr|tri·ªáu|ngh√¨n|ng√†n|m|million|thousand|‰∏á|Îßå|Ïõê|ÂÜÜ|¬•|‚Ç¨|\$|‚Ç´|ƒë)/gi, '')
        .replace(/[\d,.]+/g, '')
        .trim();

      // If no name left, use generic
      if (!name) name = t('expense') || 'Expense';

      // AI category assignment based on keywords
      const categoryMap = {
        '‚òï': ['cafe', 'coffee', 'c√† ph√™', 'cappuccino', 'latte', 'starbucks', 'ÂíñÂï°', '„Ç≥„Éº„Éí„Éº', 'Ïª§Ìîº'],
        'üçú': ['c∆°m', 'ph·ªü', 'b√∫n', 'lunch', 'dinner', 'food', 'ƒÉn', 'meal', 'restaurant', 'ÂçàÈ§ê', 'ÊôöÈ§ê', '„É©„É≥„ÉÅ', 'Ï†êÏã¨', 'Ï†ÄÎÖÅ', 'almuerzo', 'd√©jeuner'],
        'üöó': ['grab', 'uber', 'taxi', 'xe', 'car', 'ride', 'gojek', 'ÊâìËΩ¶', '„Çø„ÇØ„Ç∑„Éº', 'ÌÉùÏãú'],
        'üõí': ['ch·ª£', 'si√™u th·ªã', 'market', 'grocery', 'supermarket', 'shop', 'Ë∂ÖÂ∏Ç', '„Çπ„Éº„Éë„Éº', 'ÎßàÌä∏', 'courses', 'compras'],
        'üç∫': ['beer', 'bia', 'r∆∞·ª£u', 'wine', 'drink', 'bar', 'pub', 'Âï§ÈÖí', '„Éì„Éº„É´', 'Îß•Ï£º'],
        'üé¨': ['movie', 'phim', 'cinema', 'netflix', 'show', 'ÁîµÂΩ±', 'Êò†Áîª', 'ÏòÅÌôî', 'cine'],
        'üíä': ['thu·ªëc', 'medicine', 'pharmacy', 'doctor', 'hospital', 'ËçØ', 'Ëñ¨', 'ÏïΩ', 'pharmacie', 'farmacia'],
        'üéÆ': ['game', 'gaming', 'steam', 'playstation', 'xbox', 'Ê∏∏Êàè', '„Ç≤„Éº„É†', 'Í≤åÏûÑ'],
        'üëï': ['qu·∫ßn', '√°o', 'clothes', 'fashion', 'shirt', 'dress', 'Ë°£Êúç', 'Êúç', 'Ïò∑', 'v√™tements', 'ropa'],
        'üíÑ': ['makeup', 'm·ªπ ph·∫©m', 'cosmetic', 'beauty', 'ÂåñÂ¶Ü', 'ÂåñÁ≤ß', 'ÌôîÏû•Ìíà', 'maquillage'],
        'üì±': ['phone', 'ƒëi·ªán tho·∫°i', 'mobile', 'ÊâãÊú∫', 'Êê∫Â∏Ø', 'Ìï∏ÎìúÌè∞', 't√©l√©phone', 'tel√©fono'],
        'üè†': ['rent', 'thu√™ nh√†', 'housing', 'ÊàøÁßü', 'ÂÆ∂Ë≥É', 'ÏßëÏÑ∏', 'loyer', 'alquiler'],
        'üí°': ['ƒëi·ªán', 'electric', 'electricity', 'bill', 'ÁîµË¥π', 'ÈõªÊ∞ó', 'Ï†ÑÍ∏∞', '√©lectricit√©'],
        'üì∂': ['internet', 'wifi', 'data', 'ÁΩëÁªú', '„Ç§„É≥„Çø„Éº„Éç„ÉÉ„Éà', 'Ïù∏ÌÑ∞ÎÑ∑'],
        'üéÅ': ['gift', 'qu√†', 'present', 'Á§ºÁâ©', '„Éó„É¨„Çº„É≥„Éà', 'ÏÑ†Î¨º', 'cadeau', 'regalo'],
        '‚úàÔ∏è': ['travel', 'flight', 'bay', 'trip', 'vacation', 'ÊóÖË°å', 'Ïó¨Ìñâ', 'voyage', 'viaje'],
        'üèãÔ∏è': ['gym', 'fitness', 'sport', 'workout', 'ÂÅ•Ë∫´', '„Ç∏„É†', 'Ìó¨Ïä§'],
        'üìö': ['book', 's√°ch', 'education', 'course', 'study', '‰π¶', 'Êú¨', 'Ï±Ö', 'livre', 'libro'],
      };

      // Find matching emoji
      let emoji = 'üí∏'; // default
      const lowerName = name.toLowerCase();
      const lowerText = text.toLowerCase();

      for (const [e, keywords] of Object.entries(categoryMap)) {
        if (keywords.some(kw => lowerName.includes(kw) || lowerText.includes(kw))) {
          emoji = e;
          break;
        }
      }

      // Capitalize first letter of name
      name = name.charAt(0).toUpperCase() + name.slice(1);

      // Add transaction with timestamp
      state.transactions.unshift({ emoji, name, amount, timestamp: Date.now() });
      state.totalExpensesLogged++;
      state.showAddExpense = false;
      updateStreak();
      saveState();

      // Check for milestones
      const milestones = checkMilestones();
      if (milestones.length > 0) {
        celebrateMilestone(milestones[0]);
      }

      render();
    };
    window.confirmAddExpenseFromModal = () => {
      const name = $('expenseName')?.value;
      const rawAmount = $('expenseAmount')?.value;
      const amount = parseAmount(rawAmount);
      if (name && amount > 0) {
        const emojis = ['üõçÔ∏è', 'üçΩÔ∏è', 'üé¨', 'üéÅ', 'üíä', 'üì¶', 'üéÆ', '‚ú®'];
        state.transactions.unshift({
          emoji: emojis[Math.floor(Math.random() * emojis.length)],
          name,
          amount,
          timestamp: Date.now()
        });
        state.showAddExpense = false;
        saveState();
        render();
      }
    };
    window.quickAddExpense = (emoji, name, amount) => {
      state.transactions.unshift({ emoji, name, amount, timestamp: Date.now() });
      state.showAddExpense = false;
      saveState();
      render();
    };

    window.depositToGoal = (goalId) => {
      const goal = state.goals.find(g => g.id === goalId);
      if (!goal) return;

      const currentDeposit = state.goalDeposits[goalId] || 0;
      const remaining = goal.amount - currentDeposit;
      const suggested = Math.min(parseInt(state.allocations[goalId]) || 0, remaining);

      openInputModal({
        icon: 'üí∞',
        title: t('deposit') || 'N·∫°p ti·ªÅn',
        subtitle: `${goal.e} ${getGoalName(goal)} - ${t('remaining') || 'C√≤n l·∫°i'}: ${fmt(remaining)}`,
        placeholder: t('enterAmount') || 'Nh·∫≠p s·ªë ti·ªÅn',
        value: suggested > 0 ? suggested.toString() : '',
        buttonText: t('deposit') || 'N·∫°p ti·ªÅn',
        onSubmit: (input) => {
          const amount = parseAmount(input);
          if (amount > 0) {
            state.goalDeposits[goalId] = currentDeposit + Math.min(amount, remaining);
            state.inputModal = null;
            saveState();
            const milestones = checkMilestones();
            if (milestones.length > 0) {
              celebrateMilestone(milestones[0]);
            }
            render();
          }
        }
      });
    };

    window.withdrawFromGoal = (goalId) => {
      const goal = state.goals.find(g => g.id === goalId);
      const currentDeposit = state.goalDeposits[goalId] || 0;
      if (currentDeposit <= 0) return;

      openInputModal({
        icon: 'üí∏',
        title: t('withdraw') || 'R√∫t ti·ªÅn',
        subtitle: `${goal?.e || 'üéØ'} ${getGoalName(goal)} - ${t('available') || 'C√≥ th·ªÉ r√∫t'}: ${fmt(currentDeposit)}`,
        placeholder: t('enterAmount') || 'Nh·∫≠p s·ªë ti·ªÅn',
        value: '',
        buttonText: t('withdraw') || 'R√∫t ti·ªÅn',
        onSubmit: (input) => {
          const amount = parseAmount(input);
          if (amount > 0 && amount <= currentDeposit) {
            state.goalDeposits[goalId] = currentDeposit - amount;
            state.inputModal = null;
            saveState();
            render();
          }
        }
      });
    };

    // B2: Future Self Visualization - Edit goal note
    window.editGoalNote = (goalId) => {
      const goal = state.goals.find(g => g.id === goalId);
      if (!goal) return;

      const currentNote = state.goalNotes[goalId] || '';
      openInputModal({
        icon: '‚úèÔ∏è',
        title: t('futureSelfNote') || 'Ghi ch√∫ t∆∞∆°ng lai',
        subtitle: t('futureSelfPrompt') || 'T·∫°i sao b·∫°n mu·ªën m·ª•c ti√™u n√†y?',
        placeholder: t('futureSelfPlaceholder') || 'M√¥ t·∫£ c·∫£m gi√°c khi ƒë·∫°t ƒë∆∞·ª£c...',
        value: currentNote,
        buttonText: t('save') || 'L∆∞u',
        onSubmit: (input) => {
          state.goalNotes[goalId] = input.trim();
          state.inputModal = null;
          saveState();
          render();
        }
      });
    };

    // B5: Settings Screen - Edit functions
    window.editIncome = () => {
      const current = state.income || '';
      openInputModal({
        icon: 'üí∞',
        title: t('editIncome') || 'Ch·ªânh thu nh·∫≠p',
        subtitle: t('monthlyIncome') || 'Thu nh·∫≠p h√†ng th√°ng c·ªßa b·∫°n',
        placeholder: t('enterIncome') || 'Nh·∫≠p s·ªë ti·ªÅn',
        value: parseInt(current) > 0 ? current : '',
        buttonText: t('save') || 'L∆∞u',
        onSubmit: (input) => {
          const amount = parseAmount(input);
          if (amount > 0) {
            state.income = amount.toString();
            state.inputModal = null;
            saveState();
            render();
          }
        }
      });
    };

    window.editFixedExpenses = () => {
      // Cycle through each fixed expense and let user edit
      if (!Array.isArray(state.fixedExpenses)) return;
      state.fixedExpenses.forEach((expense, index) => {
        const current = parseInt(expense.amount) || 0;
        const label = t(expense.nameKey) || expense.nameKey;
        const input = prompt(`${expense.e} ${label}:`, current > 0 ? current.toString() : '0');
        if (input !== null) {
          const amount = parseAmount(input);
          state.fixedExpenses[index].amount = amount.toString();
        }
      });
      saveState();
      render();
    };

    window.toggleFixedExpenses = () => {
      state.fixedExpanded = !state.fixedExpanded;
      render();
    };

    window.updateFixedExpense = (idx, value) => {
      if (!Array.isArray(state.fixedExpenses) || !state.fixedExpenses[idx]) return;
      const amount = parseAmount(value);
      state.fixedExpenses[idx].amount = amount.toString();
      saveState();
      render();
    };

    window.addNewFixedExpense = () => {
      state.showAddFixed = true;
      render();
      setTimeout(() => $('newFixedNameInput')?.focus(), 100);
    };

    window.closeAddFixed = () => {
      state.showAddFixed = false;
      render();
    };

    window.submitNewFixed = () => {
      const name = $('newFixedNameInput')?.value;
      const amountStr = $('newFixedAmountInput')?.value;
      if (!name || !name.trim()) return;
      const amount = parseAmount(amountStr);
      if (!Array.isArray(state.fixedExpenses)) state.fixedExpenses = [];
      state.fixedExpenses.push({
        nameKey: name.trim(),
        emoji: 'üì¶',
        amount: amount.toString()
      });
      state.showAddFixed = false;
      saveState();
      render();
    };

    window.editGoalsAllocation = () => {
      // Let user edit allocation for each goal
      if (!Array.isArray(state.goals) || state.goals.length === 0) {
        alert(t('noGoals') || 'No goals set');
        return;
      }
      state.goals.forEach(g => {
        const current = state.allocations[g.id] || 0;
        const goalName = getGoalName(g);
        const input = prompt(`${g.e} ${goalName} - ${t('monthlyAllocation') || 'Monthly allocation'}:`, current > 0 ? fmt(current) : '0');
        if (input !== null) {
          const amount = parseAmount(input);
          state.allocations[g.id] = amount;
        }
      });
      saveState();
      render();
    };

    window.redoQuiz = () => {
      if (confirm(t('redoQuizConfirm') || 'Retake personality quiz? Your current type will be replaced.')) {
        state.quizAnswers = [];
        state.quizStep = 0;
        state.screen = 'onboarding';
        state.step = 1;
        saveState();
        render();
      }
    };

    window.editLanguage = () => {
      const languages = ['vi', 'en', 'zh', 'ja', 'ko', 'fr', 'es'];
      const labels = languages.map(l => `${LANGUAGES[l]?.flag || 'üåê'} ${LANGUAGES[l]?.label || l}`);
      const currentIndex = languages.indexOf(state.language);
      const choice = prompt(
        `${t('selectLanguage') || 'Select language'}:\n${languages.map((l, i) => `${i + 1}. ${labels[i]}`).join('\n')}\n\n${t('enterNumber') || 'Enter number (1-7)'}:`,
        (currentIndex + 1).toString()
      );
      if (choice !== null) {
        const index = parseInt(choice) - 1;
        if (index >= 0 && index < languages.length) {
          state.language = languages[index];
          saveState();
          render();
        }
      }
    };

    window.resetAllData = () => {
      if (confirm(t('resetConfirm') || 'Are you sure? This will delete all your data and start fresh.')) {
        if (confirm(t('resetConfirm2') || 'This cannot be undone. Really reset?')) {
          localStorage.removeItem(STORAGE_KEY);
          location.reload();
        }
      }
    };

    // Set archetype-based defaults when quiz completes
    const setArchetypeDefaults = (archetype) => {
      switch (archetype) {
        case 'dreamer':
          state.cycleMode = 'buffer';
          state.debtHandling = 'deduct_buffer';
          break;
        case 'experiencer':
          state.cycleMode = 'rollover';
          state.debtHandling = 'forgive';
          break;
        case 'giver':
          state.cycleMode = 'buffer';
          state.debtHandling = 'deduct_buffer';
          break;
        case 'planner':
          state.cycleMode = 'buffer';
          state.debtHandling = 'deduct_buffer';
          break;
        default:
          state.cycleMode = 'buffer';
          state.debtHandling = 'deduct_buffer';
      }
    };

    // Cycle Settings handlers
    window.setCycleDay = (day) => {
      state.cycleDay = day;
      saveState();
      render();
    };

    window.setCycleMode = (mode) => {
      state.cycleMode = mode;
      saveState();
      render();
    };

    window.setDebtHandling = (handling) => {
      state.debtHandling = handling;
      saveState();
      render();
    };

    window.withdrawBuffer = () => {
      if (state.buffer <= 0) return;
      const input = prompt(t('withdrawBufferPrompt') || `R√∫t bao nhi√™u t·ª´ Buffer? (Hi·ªán c√≥: ${fmt(state.buffer)})`, state.buffer.toString());
      if (input === null) return;
      const amount = parseAmount(input);
      if (amount > 0 && amount <= state.buffer) {
        state.buffer -= amount;
        saveState();
        render();
      }
    };

    render();
  </script>
</body>
</html>
